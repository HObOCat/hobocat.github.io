<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="MyCatÁöÑ‰ΩøÁî® - https://hobocat.github.io/post/database/2019-11-12-mycat/">
    <meta name="author" content="Jack - https://hobocat.github.io/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>MyCatÁöÑ‰ΩøÁî®</title>
    
    <base target="_blank">
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    
    
    
    
    <link rel="stylesheet" href="https://hobocat.github.io/style.min.94e7ed14b48117025ebd1148adc11f7268f1ebf50d97297ac663edf1aa6f52dc.css">
    
    <script>const DARK =  false ;</script>
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate cool">
        <div class="container-floating-box">
	<div class="box box1"></div>
	<div class="box box11"></div>
	<div class="box box12"></div>
	<div class="box box2"></div>
	<div class="box box3"></div>
	<div class="box box4"></div>
	<div class="box box5"></div>
	<div class="box box6"></div>
	<div class="box box7"></div>
	<div class="box box8"></div>
	<div class="box box9"></div>
</div>
        <div class="cool-before" style="background: url('/imgs/bg/wallhaven-6qr21l.jpg') left top/100% no-repeat fixed;"></div>
        <div id="header" class=""><div class="container-header">

    
    
    
    <div class="right">
        
        <h1 class="title">MyCatÁöÑ‰ΩøÁî®</h1>
    
        
        
            <div id="toc">üìú</div>
        
    </div>
</div>
</div>
        <div id="content">










<div class="container-main container-page ">

    

    
    
    
    <div class="rel">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </div>
    
    

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="7409" width="12" height="12">
                <path
                    d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z"
                    p-id="7410" fill="#adb5bd"></path>
            </svg>
            2019-11-12&nbsp;&nbsp;&nbsp;
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="23838" width="11" height="11">
                <path
                    d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z"
                    p-id="23839" fill="#adb5bd"></path>
            </svg>
            2024-05-15&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="33866" width="12" height="12">
                <path
                    d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z"
                    fill="#adb5bd" p-id="33867"></path>
                <path
                    d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z"
                    fill="#adb5bd" p-id="33868"></path>
            </svg>
            7460 Â≠ó</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="32892" width="12" height="12">
                <path
                    d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z"
                    p-id="32893" fill="#adb5bd"></path>
                <path
                    d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z"
                    p-id="32894" fill="#adb5bd"></path>
            </svg>
            15 ÂàÜÈíü</span>
        <div class="container-ctgtag">
	<div class="taxonomy">
		<div class="tag">
			
			
			<a href="/tags/database">database</a>
			
		</div>
	</div>
</div>
        
    </div>

    <div class="toc">
        <div class="container-page-operation">
	<div class="page-operation">
		<div><a href="/"><img src="/imgs/icons/home-2.svg" alt=""></a></div>
		<div><a href="/nav"><img src="/imgs/icons/iov-navigate-1.svg" alt=""></a></div>
		<div><a href="/wiki"><img src="/imgs/icons/wiki.svg" alt=""></a></div>
		<div><a href="/tags"><img src="/imgs/icons/treetags.svg" alt=""></a></div>
		<div id="light-dark"><a><img src="/imgs/icons/moon2.svg" alt=""></a></div>
		<div><a href="#"><img src="/imgs/icons/up2.svg" alt=""></a></div>
	</div>
</div>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#‰∏ÄmycatÊ¶ÇËßà">‰∏Ä„ÄÅMyCatÊ¶ÇËßà</a>
      <ul>
        <li><a href="#mycatÁÆÄ‰ªã">MyCatÁÆÄ‰ªã</a></li>
        <li><a href="#mycatÁöÑÂü∫Êú¨ÂÖÉÁ¥†">MyCatÁöÑÂü∫Êú¨ÂÖÉÁ¥†</a></li>
        <li><a href="#ÂÆâË£Ömycat">ÂÆâË£ÖMyCat</a></li>
      </ul>
    </li>
    <li><a href="#‰∫åmycatÊ†∏ÂøÉÈÖçÁΩÆ">‰∫å„ÄÅMyCatÊ†∏ÂøÉÈÖçÁΩÆ</a>
      <ul>
        <li><a href="#serverxmlÁõ∏ÂÖ≥ÈÖçÁΩÆ">server.xmlÁõ∏ÂÖ≥ÈÖçÁΩÆ</a></li>
        <li><a href="#rulexmlÁõ∏ÂÖ≥ÈÖçÁΩÆ">rule.xmlÁõ∏ÂÖ≥ÈÖçÁΩÆ</a></li>
        <li><a href="#schemaxmlÁõ∏ÂÖ≥ÈÖçÁΩÆ">schema.xmlÁõ∏ÂÖ≥ÈÖçÁΩÆ</a></li>
      </ul>
    </li>
    <li><a href="#‰∏âÊï∞ÊçÆÂ∫ìÁöÑÂûÇÁõ¥ÂàáÂàÜ">‰∏â„ÄÅÊï∞ÊçÆÂ∫ìÁöÑÂûÇÁõ¥ÂàáÂàÜ</a>
      <ul>
        <li><a href="#ÂûÇÁõ¥ÂàáÂàÜÈÖçÁΩÆÁ§∫‰æã">ÂûÇÁõ¥ÂàáÂàÜÈÖçÁΩÆÁ§∫‰æã</a></li>
        <li><a href="#ÂûÇÁõ¥ÂàáÂàÜÁöÑ‰ºòÁº∫ÁÇπ">ÂûÇÁõ¥ÂàáÂàÜÁöÑ‰ºòÁº∫ÁÇπ</a></li>
      </ul>
    </li>
    <li><a href="#ÂõõÊï∞ÊçÆÂ∫ìÁöÑÊ∞¥Âπ≥ÂàáÂàÜ">Âõõ„ÄÅÊï∞ÊçÆÂ∫ìÁöÑÊ∞¥Âπ≥ÂàáÂàÜ</a>
      <ul>
        <li><a href="#ÂàÜÁâáÂêéÁöÑÊü•ËØ¢Â§ÑÁêÜ">ÂàÜÁâáÂêéÁöÑÊü•ËØ¢Â§ÑÁêÜ</a></li>
        <li><a href="#ÂàÜÁâáÈîÆÁöÑÈÄâÊã©">ÂàÜÁâáÈîÆÁöÑÈÄâÊã©</a></li>
        <li><a href="#Ê∞¥Âπ≥ÂàáÂàÜÈÖçÁΩÆÁ§∫‰æã">Ê∞¥Âπ≥ÂàáÂàÜÈÖçÁΩÆÁ§∫‰æã</a></li>
        <li><a href="#Ê∞¥Âπ≥ÂàáÂàÜÂºïÂèë‰∏ªÈîÆÈóÆÈ¢ò">Ê∞¥Âπ≥ÂàáÂàÜÂºïÂèë‰∏ªÈîÆÈóÆÈ¢ò</a></li>
      </ul>
    </li>
    <li><a href="#‰∫îmycatÈ´òÂèØÁî®Êê≠Âª∫">‰∫î„ÄÅMyCatÈ´òÂèØÁî®Êê≠Âª∫</a>
      <ul>
        <li><a href="#mycatÈõÜÁæ§Êê≠Âª∫">MyCatÈõÜÁæ§Êê≠Âª∫</a></li>
        <li><a href="#mycatËá™Ë∫´È´òÂèØÁî®">MyCatËá™Ë∫´È´òÂèØÁî®</a></li>
      </ul>
    </li>
    <li><a href="#ÂÖ≠mycatÁõëÊéß">ÂÖ≠„ÄÅMyCatÁõëÊéß</a>
      <ul>
        <li><a href="#‰ΩøÁî®mycatÁîüÊàêÊâßË°åsqlËÆ∞ÂΩï">‰ΩøÁî®MyCatÁîüÊàêÊâßË°åSQLËÆ∞ÂΩï</a></li>
        <li><a href="#mycatÂëΩ‰ª§Ë°åÁÆ°ÁêÜÂ∑•ÂÖ∑">MyCatÂëΩ‰ª§Ë°åÁÆ°ÁêÜÂ∑•ÂÖ∑</a></li>
        <li><a href="#mycatÁöÑguiÁÆ°ÁêÜÂ∑•ÂÖ∑">MyCatÁöÑGUIÁÆ°ÁêÜÂ∑•ÂÖ∑</a></li>
      </ul>
    </li>
    <li><a href="#‰∏ÉmycatÁöÑÈôêÂà∂">‰∏É„ÄÅMyCatÁöÑÈôêÂà∂</a>
      <ul>
        <li><a href="#mycat‰∏çÊîØÊåÅÁöÑsqlËØ≠Âè•">MyCat‰∏çÊîØÊåÅÁöÑSQLËØ≠Âè•</a></li>
        <li><a href="#ÂØπ‰∫ãÂä°ÁöÑÊîØÊåÅÊúâÈôêxa-‰∫ãÂä°">ÂØπ‰∫ãÂä°ÁöÑÊîØÊåÅÊúâÈôêÔºàXA ‰∫ãÂä°Ôºâ</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

    <div class='content  content-card'>
        <h2 id="‰∏ÄmycatÊ¶ÇËßà">‰∏Ä„ÄÅMyCatÊ¶ÇËßà</h2>
<h3 id="mycatÁÆÄ‰ªã">MyCatÁÆÄ‰ªã</h3>
<p>‚Äã	ÊîØÊåÅÂØπMySQLÁ≠âÊï∞ÊçÆÂ∫ìËøõË°åÂûÇÁõ¥ÂàáÂàÜÔºåÊ∞¥Âπ≥ÂàáÂàÜÂπ∂ÂÆûÁé∞‰∫ÜËØªÂÜôÂàÜÁ¶ªÂíåË¥üËΩΩÂùáË°°ÁöÑÊï∞ÊçÆÂ∫ì‰∏≠Èó¥‰ª∂</p>
<h3 id="mycatÁöÑÂü∫Êú¨ÂÖÉÁ¥†">MyCatÁöÑÂü∫Êú¨ÂÖÉÁ¥†</h3>
<p><strong>ÈÄªËæëÂ∫ì</strong>
<img src="/img/mycat/Logic-library.png" style='float:right;margin-rigth:100px;padding:3px; zoom:35%;' /></p>
<ul>
<li>
<p>ÂØπ‰∫éÂ∫îÁî®Êù•ËØ¥Áõ∏ÂΩì‰∫éMySQLÁöÑÊï∞ÊçÆÂ∫ì</p>
</li>
<li>
<p>ÈÄªËæëÂ∫ìÂèØÂØπÂ∫îÂêéÁ´ØÁöÑÂ§ö‰∏™Áâ©ÁêÜÊï∞ÊçÆÂ∫ì</p>
</li>
<li>
<p>ÈÄªËæëÂ∫ìÂπ∂‰∏ç‰øùÂ≠òÊï∞ÊçÆ</p>
</li>
</ul>
<hr>
<p><strong>ÈÄªËæëË°®</strong>
<img src="/img/mycat/Logic-table.png" style='float:right;margin-rigth:100px;padding:3px; zoom:35%;' /></p>
<ul>
<li>ÂØπ‰∫éÂ∫îÁî®Êù•ËØ¥Áõ∏ÂΩì‰∫éMySQLÁöÑÊï∞ÊçÆË°®</li>
<li>ÈÄªËæëË°®ÂèØÂØπÂ∫îÂêéÁ´ØÁöÑÂ§ö‰∏™Áâ©ÁêÜÊï∞ÊçÆË°®</li>
<li>ÈÄªËæëË°®Âπ∂‰∏ç‰øùÂ≠òÊï∞ÊçÆ</li>
</ul>
<hr>
<p><strong>ÈÄªËæëË°®ÁöÑÁ±ªÂà´</strong></p>
<ul>
<li>ÊåâÁÖßÊòØÂê¶Ë¢´Ê∞¥Âπ≥ÂàÜÁâáÂàíÂàÜ‰∏∫ÔºöÂàÜÁâáË°®‰∫éÈùûÂàÜÁâáË°®</li>
<li>ÂÖ®Â±ÄË°®ÔºöÂú®ÊâÄÊúâÂàÜÁâáÊï∞ÊçÆÂ∫ìÈÉΩÂ≠òÂú®ÁöÑË°®</li>
<li>ERÂÖ≥Á≥ªË°®ÔºöÊåâÁÖßERÂÖ≥Á≥ªËøõË°åÂàÜÁâáÁöÑË°®ÔºàÂ≠êË°®ÂíåÂ§´Ë°®Â≠òÂú®‰∫éÂêå‰∏ÄÊï∞ÊçÆÂ∫ìÁ§∫‰æãÔºâ</li>
</ul>
<h3 id="ÂÆâË£Ömycat">ÂÆâË£ÖMyCat</h3>
<p>ÂâçÁΩÆÊù°‰ª∂ÔºöJDK7‰ª•‰∏ä</p>
<p><strong>Á¨¨‰∏ÄÊ≠•ÔºöÂª∫Á´ãMyCatËøêË°åÁöÑÁ≥ªÁªüË¥¶Âè∑</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>adduser mycat
</span></span><span style="display:flex;"><span>groupadd mycat
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨‰∫åÊ≠•ÔºöËß£ÂéãMyCatÂπ∂Â∞ÜÁõÆÂΩïÊâÄÂ±ûËÄÖ</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>tar -zxvf Mycat-server-X.Y-RELEASE-linux.tar.gz
</span></span><span style="display:flex;"><span>chgrp -R mycat mycat
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨‰∏âÊ≠•ÔºöÈÖçÁΩÆÁéØÂ¢ÉÂèòÈáè(/etc/profile)</strong></p>
<pre tabindex="0"><code class="language-conf" data-lang="conf">PATH=$PATH:/opt/mycat/bin
export MYCAT_HOME=/opt/mycat
</code></pre><p><strong>Á¨¨ÂõõÊ≠•ÔºöÂêØÂä®mycat</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>mycat start
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Â¶ÇÊûúÊµãËØïÁéØÂ¢ÉÂÜÖÂ≠òÊúâÈôêÈúÄË¶Å‰øÆÊîπMyCat‰∏ã<code>bin/wrapper.conf</code>ÂΩì‰∏≠ÁöÑÂÜÖÂ≠òÈôêÂà∂</p>
</blockquote>
<h2 id="‰∫åmycatÊ†∏ÂøÉÈÖçÁΩÆ">‰∫å„ÄÅMyCatÊ†∏ÂøÉÈÖçÁΩÆ</h2>
<p>Ê†∏ÂøÉÈÖçÁΩÆÊñá‰ª∂ÊÄªËßà</p>
<p><strong>server.xml</strong>ÔºöÈÖçÁΩÆÁ≥ªÁªüÂèÇÊï∞„ÄÅÁî®Êà∑ËÆøÈóÆÊùÉÈôê„ÄÅSQLÈò≤ÁÅ´Â¢ô‰ª•ÂèäSQLÊã¶Êà™</p>
<p><strong>log4j2.xml</strong>ÔºöÊó•ÂøóÈÖçÁΩÆ</p>
<p><strong>schema.xml</strong> - ÈÄªËæëÂ∫ì„ÄÅÈÄªËæëË°®„ÄÅÁâ©ÁêÜÂ∫ìÂÆö‰πâ</p>
<p><strong>rule.xml</strong> - ÈÄªËæëË°®Ê∞¥Âπ≥ÂàáÂàÜËßÑÂàô</p>
<h3 id="serverxmlÁõ∏ÂÖ≥ÈÖçÁΩÆ">server.xmlÁõ∏ÂÖ≥ÈÖçÁΩÆ</h3>
<p><strong>Á≥ªÁªüÂèÇÊï∞ÈÖçÁΩÆ</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;system&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- 1‰∏∫ÂºÄÂêØÂÆûÊó∂ÁªüËÆ°„ÄÅ0‰∏∫ÂÖ≥Èó≠ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;useSqlStat&#34;</span><span style="color:#000080">&gt;</span>0<span style="color:#000080">&lt;/property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- 1‰∏∫ÂºÄÂêØÂÖ®Â±Ä‰∏ÄËá¥ÊÄßÊ£ÄÊµã„ÄÅ0‰∏∫ÂÖ≥Èó≠ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;useGlobleTableCheck&#34;</span><span style="color:#000080">&gt;</span>0<span style="color:#000080">&lt;/property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÊåáÂÆö‰ΩøÁî® Mycat ÂÖ®Â±ÄÂ∫èÂàóÁöÑÁ±ªÂûã
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">            0 ‰∏∫Êú¨Âú∞Êñá‰ª∂ÊñπÂºè
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">            1 ‰∏∫Êï∞ÊçÆÂ∫ìÊñπÂºè
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">            2 ‰∏∫Êó∂Èó¥Êà≥Â∫èÂàóÊñπÂºè
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">            3 ‰∏∫ÂàÜÂ∏ÉÂºè ZK ID ÁîüÊàêÂô®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">            4 ‰∏∫ zk ÈÄíÂ¢û id ÁîüÊàê„ÄÇ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;sequnceHandlerType&#34;</span><span style="color:#000080">&gt;</span>2<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- 1‰∏∫ÂºÄÂêØmysqlÂéãÁº©ÂçèËÆÆ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;useCompression&#34;&gt;1&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ËÆæÁΩÆÊ®°ÊãüÁöÑMySQLÁâàÊú¨Âè∑ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;fakeMySQLVersion&#34;&gt;5.6.20&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!--  Ëøô‰∏™Â±ûÊÄßÊåáÂÆöÊØèÊ¨°ÂàÜÈÖç Socket Direct Buffer ÁöÑÂ§ßÂ∞è --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;processorBufferChunk&#34;&gt;40960&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- Â§ÑÁêÜÂô®ÁºìÂÜ≤Ê±†Á±ªÂûã
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">            0: DirectByteBufferPool
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">            1 ByteBufferArena
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;processorBufferPoolType&#34;</span><span style="color:#000080">&gt;</span>0<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÈªòËÆ§ÊòØ65535 64K Áî®‰∫ésqlËß£ÊûêÊó∂ÊúÄÂ§ßÊñáÊú¨ÈïøÂ∫¶ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;maxStringLiteralLength&#34;&gt;65535&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÂêéÂè∞‰ªªÂä°socketÈùûÂª∂Ëøü --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;backSocketNoDelay&#34;&gt;1&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÂâçÂè∞‰ªªÂä°socketÈùûÂª∂Ëøü --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;frontSocketNoDelay&#34;&gt;1&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- NIOÁ∫øÁ®ãÊ±†Â§ßÂ∞èÁî®‰∫éÂ§ÑÁêÜÂºÇÊ≠•‰ªªÂä°ÔºåÈúÄÊ±ÇÂ∞èÔºåÂª∫ËÆÆËÆæÁΩÆ‰∏∫ËæÉÂ∞èÂÄº --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;processorExecutor&#34;&gt;16&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- MyCatÊúçÂä°ËøûÊé•Á´ØÂè£ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;serverPort&#34;&gt;8066&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- MyCatÁÆ°ÁêÜËøûÊé•Á´ØÂè£ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;managerPort&#34;&gt;9066&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ËøûÊé•ÊúÄÈïøÈó≤ÁΩÆÊó∂Èó¥ÔºåË∂ÖËøáÊó∂Èó¥MyCat‰∏ªÂä®Êñ≠ÂºÄËøûÊé•ÔºåÂçï‰ΩçÊØ´Áßí --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;idleTimeout&#34;&gt;300000&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÁõëÂê¨ÁΩëÂç° --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;bindIp&#34;&gt;0.0.0.0&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÂâçÁ´ØÂÜôÈòüÂàóÂ§ßÂ∞è --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;frontWriteQueueSize&#34;&gt;4096&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ËøõÁ®ãÊï∞ÈáèÔºåÈªòËÆ§ÂíåCPUÊ†∏Êï∞ÔºåÂª∫ËÆÆÊúÄÂ§ßÂÄº‰∏∫cpuÁöÑ3ÂÄç --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;processors&#34;&gt;32&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!--ÂàÜÂ∏ÉÂºè‰∫ãÂä°ÂºÄÂÖ≥
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">           0‰∏∫‰∏çËøáÊª§ÂàÜÂ∏ÉÂºè‰∫ãÂä°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">           1‰∏∫ËøáÊª§ÂàÜÂ∏ÉÂºè‰∫ãÂä°ÔºàÂ¶ÇÊûúÂàÜÂ∏ÉÂºè‰∫ãÂä°ÂÜÖÂè™Ê∂âÂèäÂÖ®Â±ÄË°®ÔºåÂàô‰∏çËøáÊª§Ôºâ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">           2‰∏∫‰∏çËøáÊª§ÂàÜÂ∏ÉÂºè‰∫ãÂä°,‰ΩÜÊòØËÆ∞ÂΩïÂàÜÂ∏ÉÂºè‰∫ãÂä°Êó•Âøó
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;handleDistributedTransactions&#34;</span><span style="color:#000080">&gt;</span>0<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÊòØÂê¶ÂêØÁî®ÈùûÂ†ÜÂÜÖÂ≠òÂ§ÑÁêÜË∑®ÂàÜÁâáÁªìÊûúÈõÜÔºö1ÂºÄÂêØ„ÄÅ0ÂÖ≥Èó≠ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;useOffHeapForMerge&#34;</span><span style="color:#000080">&gt;</span>1<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÂÜÖÂ≠ò‰πüÂ§ßÂ∞èÔºåÂçï‰Ωç‰∏∫m --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;memoryPageSize&#34;</span><span style="color:#000080">&gt;</span>1m<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- Ê∫¢Âá∫Êñá‰ª∂ÁºìÂÜ≤Âå∫Â§ßÂ∞èÔºåÂçï‰Ωç‰∏∫k --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;spillsFileBufferSize&#34;</span><span style="color:#000080">&gt;</span>1k<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ‰ΩøÁî®ÊµÅËæìÂá∫Ôºå0‰ª£Ë°®Âê¶ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;useStreamOutput&#34;</span><span style="color:#000080">&gt;</span>0<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- Á≥ªÁªü‰øùÁïôÂÜÖÂ≠òÂ§ßÂ∞èÔºåÂçï‰Ωç‰∏∫m --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;systemReserveMemorySize&#34;</span><span style="color:#000080">&gt;</span>384m<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!--ÊòØÂê¶ÈááÁî®zookeeperÂçèË∞ÉÂàáÊç¢  --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;useZKSwitch&#34;</span><span style="color:#000080">&gt;</span>true<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ‰ª•‰∏ãÂèÇÊï∞ÈªòËÆ§ÈÖçÁΩÆÊú™Âá∫Áé∞ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÈªòËÆ§Â≠óÁ¨¶ÈõÜ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;charset&#34;&gt;utf8&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- SqlÊâßË°åË∂ÖÊó∂Êó∂Èó¥ÔºåÂçï‰ΩçÁßí --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;sqlExecuteTimeout&#34;&gt;300&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ËøîÂõûÊï∞ÊçÆÈõÜÈªòËÆ§Â§ßÂ∞è --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;defaultMaxLimit&#34;&gt;100&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÂÖÅËÆ∏ÁöÑÊúÄÂ§ßÂåÖÂ§ßÂ∞è --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;maxPacketSize&#34;&gt;104857600&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/system&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ÈÖçÁΩÆÁî®Êà∑ÂèäÁî®Êà∑ËÆøÈóÆÊùÉÈôê</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- Áî®Êà∑Âêç --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;user</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;root&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÂØÜÁ†Å --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;password&#34;</span><span style="color:#000080">&gt;</span>123456<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÊâÄËÉΩËÆøÈóÆÂà∞ÁöÑÈÄªËæëÂ∫ì,ÂèØÂàÜÈÖçÂ§ö‰∏™Êï∞ÊçÆÂ∫ì --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;schemas&#34;&gt;B1,DB2,DB3...&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;schemas&#34;</span><span style="color:#000080">&gt;</span>TESTDB<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ‰ΩøÁî®Âä†ÂØÜÂØÜÁ†ÅÁôªÈôÜ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- &lt;property name=&#34;usingDecrypt&#34;&gt;1&lt;/property&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÂØπË°®Á∫ßDMLÊùÉÈôêËÆæÁΩÆ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- checkÔºöÊòØÂê¶ÂêØÁî®Ëøô‰∏™ÊùÉÈôê
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">         dmlÈ°∫Â∫èÔºöinsert„ÄÅupdate„ÄÅselect„ÄÅdeleteÔºàtable‰∏äÁöÑË°®Á§∫‰∏∫ÊâÄÊúâÂ∫ì‰∏ãÁöÑÈªòËÆ§ÊùÉÈôêÔºâ	
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    &lt;privileges check=&#34;false&#34;&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">      &lt;schema name=&#34;TESTDB&#34; dml=&#34;0110&#34; &gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">        &lt;table name=&#34;tb01&#34; dml=&#34;0000&#34;&gt;&lt;/table&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">        &lt;table name=&#34;tb02&#34; dml=&#34;1111&#34;&gt;&lt;/table&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">      &lt;/schema&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    &lt;/privileges&gt;		
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/user&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;user</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;user&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;password&#34;</span><span style="color:#000080">&gt;</span>user<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;schemas&#34;</span><span style="color:#000080">&gt;</span>TESTDB<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- Áî®Êà∑ÊòØÂê¶Êó∂Âè™ËØªÁî®Êà∑Âè™ËÉΩÊü•ËØ¢Êï∞ÊçÆÂ∫ì --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;readOnly&#34;</span><span style="color:#000080">&gt;</span>true<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/user&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>ÂØÜÁ†ÅÂèØÂä†ÂØÜÈÖçÁΩÆÔºöMyCatÁöÑlibÊñá‰ª∂‰∏ãÊâßË°å<code>java -cp Mycat-server-X.Y.Z.jar io.mycat.util.DecryptUtil 0:[user]:[password]</code>Âä†ÂØÜÂØÜÁ†Å</p>
</blockquote>
<p><strong>SQLÈò≤ÁÅ´Â¢ô‰ª•ÂèäSQLÊã¶Êà™</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">ÂÖ®Â±ÄSQLÈò≤ÁÅ´Â¢ôËÆæÁΩÆ 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  whitehost ÂÖÅËÆ∏ËÆøÈóÆÁöÑÂêçÂçï
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  blacklist-&gt;check ÊòØÂê¶ÂêØÁî®ÈªëÂêçÂçï
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;firewall&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;whitehost&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;host</span> <span style="color:#008080">host=</span><span style="color:#d14">&#34;127.0.0.1&#34;</span> <span style="color:#008080">user=</span><span style="color:#d14">&#34;mycat&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;host</span> <span style="color:#008080">host=</span><span style="color:#d14">&#34;127.0.0.2&#34;</span> <span style="color:#008080">user=</span><span style="color:#d14">&#34;mycat&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/whitehost&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;blacklist</span> <span style="color:#008080">check=</span><span style="color:#d14">&#34;true&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- ÂºÄÂêØÊ£ÄÊü•DELETEËØ≠Âè•ÂêéÈù¢whereÊòØÂê¶‰∏∫Á©∫ --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;deleteWhereNoneCheck&#34;</span><span style="color:#000080">&gt;</span>true<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- ÂºÄÂêØÊ£ÄÊü•ÈùûÂü∫Êú¨ËØ≠Âè•ÁöÑÂÖ∂‰ªñËØ≠Âè•(DDL) --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;noneBaseStatementAllow&#34;</span><span style="color:#000080">&gt;</span>true<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/blacklist&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/firewall&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="rulexmlÁõ∏ÂÖ≥ÈÖçÁΩÆ">rule.xmlÁõ∏ÂÖ≥ÈÖçÁΩÆ</h3>
<p><strong>rule.xmlÁöÑËßÑÂàôÁ§∫‰æã</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    tableRule‰ª£Ë°®Ë°®ÁöÑÂàÜÁâáËßÑÂàôÔºåname‰∏∫ÂîØ‰∏ÄÊ†áËØÜÁ¨¶Âè∑
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    columnsÔºöÊ∞¥Âπ≥ÂàáÂàÜ‰æùÊçÆÁöÑÂàó
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    algorithmÔºö‰ª£Ë°®‰ΩøÁî®ÁöÑÂÖ∑‰ΩìÁÆóÊ≥ï
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;tableRule</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;mod-long&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;rule&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;columns&gt;</span>id<span style="color:#000080">&lt;/columns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;algorithm&gt;</span>mod-long<span style="color:#000080">&lt;/algorithm&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/rule&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/tableRule&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    function‰ª£Ë°®Ê∞¥Âπ≥ÂàáÂàÜÁöÑÁÆóÊ≥ïÔºåname‰∏∫ÂîØ‰∏ÄÊ†áËØÜÁ¨¶Âè∑Ôºåclass‰∏∫ÂÆûÁé∞Á±ª
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    propertyÊ†áÁ≠æÔºöjavabeanËßÑËåÉÊ≥®ÂÖ•ÁöÑÂ±ûÊÄß
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;function</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;mod-long&#34;</span> <span style="color:#008080">class=</span><span style="color:#d14">&#34;io.mycat.route.function.PartitionByMod&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;count&#34;</span><span style="color:#000080">&gt;</span>3<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/function&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Â∏∏Áî®ÁöÑÂàáÂàÜÁÆóÊ≥ï</strong></p>
<ul>
<li>ÁÆÄÂçïÂèñÊ®°ÂàÜÁâá</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;tableRule</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;mod-long&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;rule&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;columns&gt;</span>user_id<span style="color:#000080">&lt;/columns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;algorithm&gt;</span>mod-long<span style="color:#000080">&lt;/algorithm&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/rule&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/tableRule&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;function</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;mod-long&#34;</span> <span style="color:#008080">class=</span><span style="color:#d14">&#34;io.mycat.route.function.PartitionByMod&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;count&#34;</span><span style="color:#000080">&gt;</span>3<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/function&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂØπcolumnsÂàóËøõË°åÂçÅËøõÂà∂ÂèñÊ®°ËøêÁÆóËøõË°åÔºåÊâÄ‰ª•columnsÂàóÂøÖÈ°ª‰∏∫Êï¥Êï∞Ôºåcount‰∏∫ÂàÜÁâáÊï∞Èáè</p>
<ul>
<li>HashÂèñÊ®°ÂàÜÁâá</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;tableRule</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;user_login&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;rule&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;columns&gt;</span>user_name<span style="color:#000080">&lt;/columns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;algorithm&gt;</span>mod-hash<span style="color:#000080">&lt;/algorithm&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/rule&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/tableRule&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;function</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;mod-hash&#34;</span> <span style="color:#008080">class=</span><span style="color:#d14">&#34;io.mycat.route.function.PartitionByHashMod&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;count&#34;</span><span style="color:#000080">&gt;</span>3<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/function&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂèØ‰ª•ÂØπÂ≠óÁ¨¶‰∏≤„ÄÅÊï∞Â≠óÁ±ªÂûãÁöÑÂàóÂÅöhashËøêÁÆó‰πãÂêéÂÜçÂèñÊ®°ËøõË°åÂàÜÁâáÔºåcount‰∏∫ÂàÜÁâáÊï∞Èáè</p>
<ul>
<li>Êûö‰∏æÂàÜÁâá</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;tableRule</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;sharding-by-intfile&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;rule&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;columns&gt;</span>area_id<span style="color:#000080">&lt;/columns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;algorithm&gt;</span>area-map-file<span style="color:#000080">&lt;/algorithm&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/rule&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/tableRule&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;function</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;area-map-file&#34;</span> <span style="color:#008080">class=</span><span style="color:#d14">&#34;io.mycat.route.function.PartitionByFileMap&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;mapFile&#34;</span><span style="color:#000080">&gt;</span>area-map-file.txt<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;type&#34;</span><span style="color:#000080">&gt;</span>0<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;defaultNode&#34;</span><span style="color:#000080">&gt;</span>0<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/function&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> area-map-filet.txt ÈÖçÁΩÆÔºö
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">   10000=0
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">   10010=1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">   DEFAULT_NODE=1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">--&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>typeÈªòËÆ§ÂÄº‰∏∫0Ôºå0Ë°®Á§∫key‰∏∫IntegerÔºåÈùû0Ë°®Á§∫key‰∏∫ StringÔºå ÊâÄÊúâÁöÑËäÇÁÇπÈÖçÁΩÆÈÉΩÊòØ‰ªé0ÂºÄÂßãÔºåÂèä0‰ª£Ë°®ËäÇÁÇπ1</p>
<p>defaultNodeÈªòËÆ§ËäÇÁÇπÔºöÂ∞è‰∫é0Ë°®Á§∫‰∏çËÆæÁΩÆÈªòËÆ§ËäÇÁÇπÔºåÂ§ß‰∫éÁ≠â‰∫é0Ë°®Á§∫ËÆæÁΩÆÈªòËÆ§ËäÇÁÇπ„ÄêÂ¶ÇÊûú‰∏çÈÖçÁΩÆÈªòËÆ§ËäÇÁÇπÁ¢∞Âà∞‰∏çËØÜÂà´ÁöÑÊûö‰∏æÂÄºÂ∞±‰ºöÊä•Èîô„Äë</p>
<ul>
<li>Â≠óÁ¨¶‰∏≤ËåÉÂõ¥ÂèñÊ®°ÂàÜÁâá</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;tableRule</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;mod-string-rang-prefix&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;rule&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;columns&gt;</span>user_id<span style="color:#000080">&lt;/columns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;algorithm&gt;</span>sharding-by-prefixpattern<span style="color:#000080">&lt;/algorithm&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/rule&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/tableRule&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;function</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;mod-string-rang-prefix&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#008080">class=</span><span style="color:#d14">&#34;io.mycat.route.function.PartitionByPrefixPattern&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;patternValue&#34;</span><span style="color:#000080">&gt;</span>256<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;prefixLength&#34;</span><span style="color:#000080">&gt;</span>5<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;mapFile&#34;</span><span style="color:#000080">&gt;</span>partition-pattern.txt<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/function&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  partition-pattern.txt
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    0-127=0
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    128-255=1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">--&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚Äã	Â≠óÁ¨¶‰∏≤ËåÉÂõ¥ÂèñÊ®°ÂàÜÁâáÊòØÂ∞ÜÂ≠óÁ¨¶‰∏≤ÂâçÁºÄASCIIÁ†ÅÊåáÂÆöÂâçÁºÄÁõ∏Âä†ÁÑ∂ÂêéËøõË°åÂèñÊ®°ËøêÁÆó„ÄÇprefixLengthÔºöÈúÄË¶ÅÊà™ÂèñÁöÑÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ÔºåpatternValueÔºöÂèñÊ®°ÁöÑÊ®°Êï∞„ÄÇÂ¶ÇÊûúmapFileÊñá‰ª∂Êúâ‰∫õÂèñÊ®°‰πãÂêéÂÄºÊú™ÂåÖÂê´ÔºåÊèíÂÖ•ÂèñÊ®°ÂêéÊú™ÂåÖÂê´ÁöÑÂÄº‰ºöÊä•Èîô„ÄÇ</p>
<ul>
<li>ËåÉÂõ¥ÂàÜÁâá</li>
</ul>
<p>Ê≠§ÂàÜÁâáÈÄÇÁî®‰∫éÔºåÊèêÂâçËßÑÂàíÂ•ΩÂàÜÁâáÂ≠óÊÆµÊüê‰∏™ËåÉÂõ¥Â±û‰∫éÂì™‰∏™ÂàÜÁâá„Äêstart &lt;= range &lt;= end „Äë</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;tableRule</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;file-rang-partition&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;rule&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;columns&gt;</span>user_id<span style="color:#000080">&lt;/columns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;algorithm&gt;</span>&gt;rang-long<span style="color:#000080">&lt;/algorithm&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/rule&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/tableRule&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;function</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;rang-long&#34;</span> <span style="color:#008080">class=</span><span style="color:#d14">&#34;io.mycat.route.function.AutoPartitionByLong&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;mapFile&#34;</span><span style="color:#000080">&gt;</span>file-rang-partition.txt<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;defaultNode&#34;</span><span style="color:#000080">&gt;</span>0<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/function&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  file-rang-partition.txt
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    0-10000000=0
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    10000001-20000000=1
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">--&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>Ëá™ÁÑ∂ÊúàÂàÜÁâá</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;tableRule</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;sharding-by-month&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;rule&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;columns&gt;</span>create_time<span style="color:#000080">&lt;/columns&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;algorithm&gt;</span>sharding-by-month<span style="color:#000080">&lt;/algorithm&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/rule&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/tableRule&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;function</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;sharding-by-month&#34;</span> <span style="color:#008080">class=</span><span style="color:#d14">&#34;io.mycat.route.function.PartitionByMonth&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dateFormat&#34;</span><span style="color:#000080">&gt;</span>yyyy-MM-dd<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;sBeginDate&#34;</span><span style="color:#000080">&gt;</span>2014-01-01<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/function&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>MycatËøòÊèê‰æõ‰∫ÜÁ±ª‰ººredisÁöÑcrc32slotÂàÜÁâáÔºåÈúÄË¶ÅÂª∫Á´ãÊßΩÊò†Â∞ÑË°®</p>
</blockquote>
<h3 id="schemaxmlÁõ∏ÂÖ≥ÈÖçÁΩÆ">schema.xmlÁõ∏ÂÖ≥ÈÖçÁΩÆ</h3>
<p><strong>schemaÊ†áÁ≠æÂÆö‰πâMyCatÂÆû‰æã‰∏≠ÁöÑÈÄªËæëÂ∫ì</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  nameÔºöÈÄªËæëÂ∫ìÁöÑÂêçÁß∞ÔºåÂÖ®Â±ÄÂîØ‰∏Ä
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  checkSQLschema
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> true: Â¶ÇÊûúSQL‰∏≠Âà∂ÂÆö‰∫Ü‰∫ÜDBÂêçÁß∞Âàô‰ºöÂëóMyCatËá™Âä®Âà†Èô§ÂêéÊâßË°å
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> false:‰∏çÊ£ÄÊü•
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  sqlMaxLimitÔºöËøîÂõûÁªìÊûúÈõÜÊï∞ÈáèÁöÑÊúÄÂ§ßÂÄºÔºåÂ¶ÇÊûúschemaÊ†áÁ≠æÊúâÈÖçÁΩÆÔºåÂàô‰∏ç‰ºöÂèñserverÊñá‰ª∂ÁöÑÈÖçÁΩÆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;schema</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;TESTDB&#34;</span> <span style="color:#008080">checkSQLschema=</span><span style="color:#d14">&#34;false&#34;</span> <span style="color:#008080">sqlMaxLimit=</span><span style="color:#d14">&#34;100&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- tableÊ†áÁ≠æ„ÄÇ„ÄÇ„ÄÇ --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/schema&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>tableÊ†áÁ≠æÂÆö‰πâ‰∫ÜMyCat‰∏≠ÁöÑÈÄªËæëË°®</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  nameÔºöÈÄªËæëË°®ÁöÑÂêçÁß∞‰πüÊòØÁâ©ÁêÜË°®ÂêçÁß∞ÔºåÊØè‰∏™schema‰∏ãÂîØ‰∏Ä
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  dataNodeÔºöÊâÄÂ±ûÁöÑ dataNodeÈúÄË¶ÅÂíådataNodeÊ†áÁ≠æ‰∏≠nameÂ±ûÊÄßÁöÑÂÄºÁõ∏‰∫íÂØπÂ∫îÔºåÈ°∫Â∫è‰∏éÂàÜÁâáËßÑÂàôÊûö‰∏æÊúâÂØπÂ∫îÂÖ≥Á≥ª
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  ruleÔºöÁî®‰∫éÊåáÂÆöÈÄªËæëË°®Ë¶Å‰ΩøÁî®ÁöÑËßÑÂàôÔºàrule.xml‰∏≠ÂÆö‰πâÔºâÂøÖÈ°ª‰∏étableRuleÊ†áÁ≠æ‰∏≠nameÂ±ûÊÄßÂ±ûÊÄßÂÄº‰∏Ä‰∏ÄÂØπÂ∫î
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  primaryKeyÔºöËØ•ÈÄªËæëË°®ÂØπÂ∫îÁúüÂÆûË°®ÁöÑ‰∏ªÈîÆÔºåÂ¶ÇÊûúÂàÜÁâáÈîÆ‰∏çÊòØ‰∏ªÈîÆÂàô‰ºöÁºìÂ≠ò‰∏ªÈîÆÂíåÂàÜÁâáÈîÆÁöÑÊò†Â∞ÑÂÖ≥Á≥ª
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">              Â¶ÇÊûúÂëΩ‰∏≠ÁºìÂ≠òÔºåÂàô‰ΩøÁî®Èùû‰∏ªÈîÆËøõË°åÊü•ËØ¢ÁöÑÊó∂ÂÄôÂ∞±‰∏ç‰ºöËøõË°åÂπøÊí≠ÂºèÁöÑÊü•ËØ¢ÔºåÂ∞±‰ºöÁõ¥Êé•ÂèëÈÄÅËØ≠Âè•ÁªôÂÖ∑‰ΩìÁöÑDataNode
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  typeÔºöÂ¶ÇÊûúÊòØÂÖ®Â±ÄË°®ÈúÄË¶ÅÊåáÂÆöglobal
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  autoIncrementÔºöÂ¶ÇÊûú‰ΩøÁî®Ëá™Â¢ûIDÈúÄË¶ÅÈÖçÁΩÆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  needAddLimitÔºöSQLÊü•ËØ¢‰∏çÂåÖÂê´limitÊó∂MyCatËá™Âä®Ê∑ªÂä†limitÈªòËÆ§trueÔºålimitÂÄº‰∏∫ÈÖçÁΩÆÁöÑÊúÄÂ§ßËøîÂõûÁªìÊûúÈõÜ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- dataNode=&#34;dn1,dn2,dn3&#34; ==&gt; dataNode=&#34;dn$1-3&#34; --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;travelrecord&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn1,dn2,dn3&#34;</span> <span style="color:#008080">rule=</span><span style="color:#d14">&#34;auto-sharding-long&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;ID&#34;</span> <span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!--ÂèØËÉΩÂ≠òÂú®childTable --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/table&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>dataNodeÊ†áÁ≠æÂÆö‰πâ‰∫ÜMyCat‰∏≠ÁöÑÊï∞ÊçÆËäÇÁÇπ</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  nameÔºöÂÖ®Â±ÄÂîØ‰∏ÄÊ†áËØÜ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  dataHostÔºöÂØπÂ∫îÁöÑdataHostÊ†áÁ≠æÔºåÁî®‰∫éÊåáÂÆöÂÖ∑‰ΩìÊï∞ÊçÆÂ∫ìÁ§∫‰æã
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  databaseÔºöÁúüÂÆûÁöÑÁâ©ÁêÜÂ∫ìÂêçÁß∞
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;dataNode</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dn1&#34;</span> <span style="color:#008080">dataHost=</span><span style="color:#d14">&#34;DH100&#34;</span> <span style="color:#008080">database=</span><span style="color:#d14">&#34;db1&#34;</span> <span style="color:#000080">&gt;&lt;/dataNode&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>dataHostÊ†áÁ≠æÂÆö‰πâ‰∫ÜÊï∞ÊçÆÂ∫ìÂÆû‰æã„ÄÅËØªÂÜôÂàÜÁ¶ªÈÖçÁΩÆÂíåÂøÉË∑≥ËØ≠Âè•</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  nameÔºöÂîØ‰∏ÄÊ†áËØÜdataHostÊ†áÁ≠æÂÖ®Â±ÄÂîØ‰∏Ä
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  balance
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    0Ôºö‰∏çÂºÄÂêØËØªÂÜôÂàÜÁ¶ªÊú∫Âà∂ÔºåÊâÄÊúâËØªÊìç‰ΩúÈÉΩÂèëÈÄÅÂà∞ÂΩìÂâçÂèØÁî®ÁöÑwriteHost‰∏ä
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    1ÔºöÂÖ®ÈÉ®ÁöÑreadHost‰∏éstand by writeHostÂèÇ‰∏éselectËØ≠Âè•ÁöÑË¥üËΩΩÂùáË°°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">       ÁÆÄÂçïÁöÑËØ¥ÔºåÂΩìÂèå‰∏ª‰∏ªÂ§áÊ®°ÂºèÔºåÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÔºåM2,S1,S2 ÈÉΩÂèÇ‰∏é select ËØ≠Âè•ÁöÑË¥üËΩΩÂùáË°°„ÄÇ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    2ÔºöÊâÄÊúâËØªÊìç‰ΩúÈÉΩÈöèÊú∫ÁöÑÂú®writeHost„ÄÅreadhost‰∏äÂàÜÂèë
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    3ÔºöÊâÄÊúâËØªËØ∑Ê±ÇÈöèÊú∫ÁöÑÂàÜÂèëÂà∞wiriterHostÂØπÂ∫îÁöÑreadhostÊâßË°åÔºåÈÄÇÂêà‰∏Ä‰∏ªÂ§ö‰ªéÊ®°Âºè
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  dbTypeÔºöÂêéÁ´ØÊï∞ÊçÆÂ∫ìÁ±ªÂûã
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  writeType
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    0ÔºöÊâÄÊúâÂÜôÊìç‰ΩúÂèëÈÄÅÂà∞ÈÖçÁΩÆÁöÑÁ¨¨‰∏Ä‰∏™writeHostÔºåÁ¨¨‰∏Ä‰∏™ÊåÇ‰∫ÜÂàáÂà∞ËøòÁîüÂ≠òÁöÑÁ¨¨‰∫å‰∏™writeHost
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">      ÈáçÊñ∞ÂêØÂä®ÂêéÂ∑≤ÂàáÊç¢ÂêéÁöÑ‰∏∫ÂáÜÔºåÂàáÊç¢ËÆ∞ÂΩïÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠:dnindex.properties
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    1ÔºöÊâÄÊúâÂÜôÊìç‰ΩúÈÉΩÈöèÊú∫ÁöÑÂèëÈÄÅÂà∞ÈÖçÁΩÆÁöÑ writeHostÔºå1.5 ‰ª•ÂêéÂ∫üÂºÉ‰∏çÊé®Ëçê
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  switchTypeÔºö
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    -1ÔºöË°®Á§∫‰∏çËá™Âä®ÂàáÊç¢ÔºåÂ¶ÇÊûúÂêéÂè∞Â∑≤Áªè‰ΩøÁî®MMMÊàñMHAËøôÁßçÈ´òÂèØÁî®ÁÆ°ÁêÜÂ∑•ÂÖ∑ÔºåÂàôÈúÄË¶ÅÂÖ≥Èó≠
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    1ÔºöÈªòËÆ§ÂÄºÔºåËá™Âä®ÂàáÊç¢„ÄÇÂΩìÁ¨¨‰∏Ä‰∏™writeHostÂÆïÊú∫Ëá™Âä®ÂàáÊç¢‰∏∫Á¨¨‰∫å‰∏™writeHost
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">    2ÔºöÂü∫‰∫éMySQL‰∏ª‰ªéÂêåÊ≠•ÁöÑÁä∂ÊÄÅÂÜ≥ÂÆöÊòØÂê¶ÂàáÊç¢ÔºåÂøÉË∑≥ËØ≠Âè•‰∏∫ show slave status
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  maxConÔºöÊï∞ÊçÆÂ∫ìËøûÊé•Ê±†ÊúÄÂ§ßËøûÊé•Êï∞
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  minConÔºöÊï∞ÊçÆÂ∫ìËøûÊé•Ê±†ÊúÄÂ∞èËøûÊé•Êï∞
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  dbDriverÔºönative‰∏∫MySQLÂéüË∫´ÂçèËÆÆÔºåÂ¶ÇÊûúdbType‰∏çÊòØmysqlÂàôÈúÄË¶ÅËÆæÁΩÆ‰∏∫ÂÖ∑‰ΩìÁöÑDriverÁ±ªÂêç
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;dataHost</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;DH100&#34;</span> <span style="color:#008080">maxCon=</span><span style="color:#d14">&#34;1000&#34;</span> <span style="color:#008080">minCon=</span><span style="color:#d14">&#34;10&#34;</span> <span style="color:#008080">balance=</span><span style="color:#d14">&#34;0&#34;</span> <span style="color:#008080">switchType=</span><span style="color:#d14">&#34;-1&#34;</span> <span style="color:#008080">writeType=</span><span style="color:#d14">&#34;0&#34;</span> <span style="color:#008080">dbType=</span><span style="color:#d14">&#34;mysql&#34;</span> <span style="color:#008080">dbDriver=</span><span style="color:#d14">&#34;native&#34;</span> <span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- heartbeat:ÂøÉË∑≥ÊµãËØïËØ≠Âè• --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;heartbeat&gt;</span>select user()<span style="color:#000080">&lt;/heartbeat&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;writeHost</span> <span style="color:#008080">host=</span><span style="color:#d14">&#34;hostM1&#34;</span> <span style="color:#008080">url=</span><span style="color:#d14">&#34;localhost:3306&#34;</span> <span style="color:#008080">user=</span><span style="color:#d14">&#34;root&#34;</span> <span style="color:#008080">password=</span><span style="color:#d14">&#34;123456&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> &lt;readHost host=&#34;hostS1&#34; url=&#34;localhost:3306&#34; user=&#34;root&#34; password=&#34;123456&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/writeHost&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- 
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  &lt;writeHost host=&#34;hostM2&#34; url=&#34;localhost:3316&#34; user=&#34;root&#34; password=&#34;123456&#34;/&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/dataHost&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="‰∏âÊï∞ÊçÆÂ∫ìÁöÑÂûÇÁõ¥ÂàáÂàÜ">‰∏â„ÄÅÊï∞ÊçÆÂ∫ìÁöÑÂûÇÁõ¥ÂàáÂàÜ</h2>
<p>‚Äã	È°πÁõÆÂàùÊúüÂèØËÉΩÂè™ÊòØ‰∏Ä‰∏™Âçï‰∏ÄÁöÑÊï∞ÊçÆÂ∫ìÔºåÈöèÁùÄ‰∏öÂä°ÁöÑÂ¢ûÈïøËÄåÂá∫Áé∞‰∫ÜÊÄßËÉΩÁì∂È¢à„ÄÇÂΩìÊó†Ê≥ïÈÄöËøá‰ºòÂåñÊù•Ëß£ÂÜ≥ÊÄßËÉΩÁì∂È¢àÊó∂Â∫îËØ•È¶ñÂÖàÈÄöËøáÂàÜÂ∫ìÁöÑÊñπÂºèËøõË°åËß£ÂÜ≥„ÄÇÂºïÂÖ•MyCatËøõË°åÂàÜÂ∫ìÁöÑÂ•ΩÂ§ÑÊòØÊúâËøûÊé•Ê±†ÁöÑÁÆ°ÁêÜÂíåÂ∞ΩÈáèÂ∞ëÁöÑ‰øÆÊîπÂêéÂè∞ÁöÑ‰ª£Á†Å„ÄÇ</p>
<p><strong>ËøõË°åÂûÇÁõ¥ÂàáÂàÜÁöÑÊ≠•È™§</strong></p>
<p>‚ë†„ÄÅÊî∂ÈõÜÂàÜÊûê‰∏öÂä°Ê®°Âùó‰πãÈó¥ÁöÑÂÖ≥Á≥ª</p>
<p>‚ë°„ÄÅÂ§çÂà∂ÂÖ®ÈáèÊï∞ÊçÆÂà∞ÂÖ∂ÂÆÉÂÆû‰æãÔºàÂª∫Á´ã‰∏ª‰ªéÂÖ≥Á≥ªÔºåÂú®ÈÖçÁΩÆÂ•ΩMyCat‰πãÂâç‰øùÊåÅÊï∞ÊçÆÈÉΩ‰∏∫Á∫ø‰∏äÂÖ®ÈáèÊï∞ÊçÆÔºâ</p>
<p>‚ë¢„ÄÅÈÖçÁΩÆMyCatÂûÇÁõ¥ÂàÜÂ∫ì</p>
<p>‚ë£„ÄÅÈÄöËøáMyCatËÆøÈóÆDB</p>
<p>‚ë§„ÄÅÂà†Èô§ÂéüÂ∫ì‰∏≠Â∑≤ËøÅÁßªÁöÑË°®</p>
<blockquote>
<p>‰∏ª‰ªéÂÖ≥Á≥ªÂª∫Á´ãÊó∂‰ªéÂ∫ì‰∏äÁöÑDBÂêçÂ≠óÂèØËÉΩÂèëÁîü‰∫ÜÊîπÂèòÔºåÈúÄË¶Å‰ΩøÁî®‰ª•‰∏ãÂëΩ‰ª§‰øÆÊîπÂ§á‰ªΩÂà∞‰ªéÊï∞ÊçÆÂ∫ìÁöÑÂêçÁß∞</p>
<p><code>change replication filter replicate_rewrite_db(([masterDBName],[slaveDBName]))</code></p>
</blockquote>
<h3 id="ÂûÇÁõ¥ÂàáÂàÜÈÖçÁΩÆÁ§∫‰æã">ÂûÇÁõ¥ÂàáÂàÜÈÖçÁΩÆÁ§∫‰æã</h3>
<p><strong>ÈÖçÁΩÆMyCatÂûÇÁõ¥ÂàÜÂ∫ì</strong></p>
<ul>
<li><strong>schema.xml</strong></li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;?xml version=&#34;1.0&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;!DOCTYPE mycat:schema SYSTEM &#34;schema.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;mycat:schema</span> <span style="color:#008080">xmlns:mycat=</span><span style="color:#d14">&#34;http://io.mycat/&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;schema</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;app_db&#34;</span> <span style="color:#008080">checkSQLschema=</span><span style="color:#d14">&#34;false&#34;</span> <span style="color:#008080">sqlMaxLimit=</span><span style="color:#d14">&#34;100&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- ËÆ¢ÂçïÊ®°Âùó --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;order_cart&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;cart_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn152&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;order_customer_addr&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;customer_addr_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn152&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;order_master&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;order_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn152&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;order_detail&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;order_detail_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn152&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- ‰ªìÈÖçÊ®°Âùó --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;shipping_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;ship_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn152&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;warehouse_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;w_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn152&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;warehouse_proudct&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;wp_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn152&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- ÂïÜÂìÅÊ®°Âùó --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;product_brand_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;brand_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn151&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;product_category&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;category_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn151&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;product_comment&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;comment_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn151&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;product_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;product_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn151&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;product_pic_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;product_pic_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn151&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;product_supplier_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;supplier_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn151&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- Áî®Êà∑Ê®°Âùó --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;customer_balance_log&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;balance_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;customer_inf&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;customer_inf_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;customer_level_inf&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;customer_level&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;customer_login&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;customer_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;customer_login_log&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;login_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;customer_point_log&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;point_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- Âú∞Âå∫‰ø°ÊÅØ,ÂÖ®Â±ÄË°® --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;region_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;region_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149,dn151,dn152&#34;</span>  <span style="color:#008080">type=</span><span style="color:#d14">&#34;global&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/schema&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataNode</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dn152&#34;</span> <span style="color:#008080">dataHost=</span><span style="color:#d14">&#34;dh152&#34;</span> <span style="color:#008080">database=</span><span style="color:#d14">&#34;order_db&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataNode</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dn151&#34;</span> <span style="color:#008080">dataHost=</span><span style="color:#d14">&#34;dh151&#34;</span> <span style="color:#008080">database=</span><span style="color:#d14">&#34;product_db&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataNode</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dn149&#34;</span> <span style="color:#008080">dataHost=</span><span style="color:#d14">&#34;dh149&#34;</span> <span style="color:#008080">database=</span><span style="color:#d14">&#34;consumers_db&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataHost</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dh152&#34;</span> <span style="color:#008080">maxCon=</span><span style="color:#d14">&#34;1000&#34;</span> <span style="color:#008080">minCon=</span><span style="color:#d14">&#34;10&#34;</span> <span style="color:#008080">balance=</span><span style="color:#d14">&#34;2&#34;</span> <span style="color:#008080">writeType=</span><span style="color:#d14">&#34;0&#34;</span> <span style="color:#008080">dbType=</span><span style="color:#d14">&#34;mysql&#34;</span> <span style="color:#008080">dbDriver=</span><span style="color:#d14">&#34;native&#34;</span> <span style="color:#008080">switchType=</span><span style="color:#d14">&#34;1&#34;</span>  <span style="color:#008080">slaveThreshold=</span><span style="color:#d14">&#34;100&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;heartbeat&gt;</span>select user()<span style="color:#000080">&lt;/heartbeat&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;writeHost</span> <span style="color:#008080">host=</span><span style="color:#d14">&#34;192.168.1.152&#34;</span> <span style="color:#008080">url=</span><span style="color:#d14">&#34;192.168.1.152:3306&#34;</span> <span style="color:#008080">user=</span><span style="color:#d14">&#34;root&#34;</span> <span style="color:#008080">password=</span><span style="color:#d14">&#34;123456&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/dataHost&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataHost</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dh151&#34;</span> <span style="color:#008080">maxCon=</span><span style="color:#d14">&#34;1000&#34;</span> <span style="color:#008080">minCon=</span><span style="color:#d14">&#34;10&#34;</span> <span style="color:#008080">balance=</span><span style="color:#d14">&#34;2&#34;</span> <span style="color:#008080">writeType=</span><span style="color:#d14">&#34;0&#34;</span> <span style="color:#008080">dbType=</span><span style="color:#d14">&#34;mysql&#34;</span> <span style="color:#008080">dbDriver=</span><span style="color:#d14">&#34;native&#34;</span> <span style="color:#008080">switchType=</span><span style="color:#d14">&#34;1&#34;</span>  <span style="color:#008080">slaveThreshold=</span><span style="color:#d14">&#34;100&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;heartbeat&gt;</span>select user()<span style="color:#000080">&lt;/heartbeat&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;writeHost</span> <span style="color:#008080">host=</span><span style="color:#d14">&#34;192.168.1.151&#34;</span> <span style="color:#008080">url=</span><span style="color:#d14">&#34;192.168.1.151:3306&#34;</span> <span style="color:#008080">user=</span><span style="color:#d14">&#34;root&#34;</span> <span style="color:#008080">password=</span><span style="color:#d14">&#34;123456&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/dataHost&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataHost</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dh149&#34;</span> <span style="color:#008080">maxCon=</span><span style="color:#d14">&#34;1000&#34;</span> <span style="color:#008080">minCon=</span><span style="color:#d14">&#34;10&#34;</span> <span style="color:#008080">balance=</span><span style="color:#d14">&#34;2&#34;</span> <span style="color:#008080">writeType=</span><span style="color:#d14">&#34;0&#34;</span> <span style="color:#008080">dbType=</span><span style="color:#d14">&#34;mysql&#34;</span> <span style="color:#008080">dbDriver=</span><span style="color:#d14">&#34;native&#34;</span> <span style="color:#008080">switchType=</span><span style="color:#d14">&#34;1&#34;</span>  <span style="color:#008080">slaveThreshold=</span><span style="color:#d14">&#34;100&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;heartbeat&gt;</span>select user()<span style="color:#000080">&lt;/heartbeat&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;writeHost</span> <span style="color:#008080">host=</span><span style="color:#d14">&#34;192.168.1.149&#34;</span> <span style="color:#008080">url=</span><span style="color:#d14">&#34;192.168.1.149:3306&#34;</span> <span style="color:#008080">user=</span><span style="color:#d14">&#34;root&#34;</span> <span style="color:#008080">password=</span><span style="color:#d14">&#34;123456&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/writeHost&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/dataHost&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/mycat:schema&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><strong>server.xml</strong></li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;!DOCTYPE mycat:server SYSTEM &#34;server.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;mycat:server</span> <span style="color:#008080">xmlns:mycat=</span><span style="color:#d14">&#34;http://io.mycat/&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;system&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;useGlobleTableCheck&#34;</span><span style="color:#000080">&gt;</span>0<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;sequnceHandlerType&#34;</span><span style="color:#000080">&gt;</span>2<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;processorBufferPoolType&#34;</span><span style="color:#000080">&gt;</span>0<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;serverPort&#34;</span><span style="color:#000080">&gt;</span>8066<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;managerPort&#34;</span><span style="color:#000080">&gt;</span>9066<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;idleTimeout&#34;</span><span style="color:#000080">&gt;</span>300000<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;bindIp&#34;</span><span style="color:#000080">&gt;</span>0.0.0.0<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;frontWriteQueueSize&#34;</span><span style="color:#000080">&gt;</span>4096<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;processors&#34;</span><span style="color:#000080">&gt;</span>4<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;handleDistributedTransactions&#34;</span><span style="color:#000080">&gt;</span>0<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;useOffHeapForMerge&#34;</span><span style="color:#000080">&gt;</span>1<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;memoryPageSize&#34;</span><span style="color:#000080">&gt;</span>1m<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;spillsFileBufferSize&#34;</span><span style="color:#000080">&gt;</span>1k<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;useStreamOutput&#34;</span><span style="color:#000080">&gt;</span>0<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;systemReserveMemorySize&#34;</span><span style="color:#000080">&gt;</span>100m<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;useZKSwitch&#34;</span><span style="color:#000080">&gt;</span>false<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/system&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;user</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;root&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;password&#34;</span><span style="color:#000080">&gt;</span>123456<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;schemas&#34;</span><span style="color:#000080">&gt;</span>app_db<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/user&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/mycat:server&gt;</span>          
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Ë∑®ÂàÜÁâáÊü•ËØ¢Ëß£ÂÜ≥ÊñπÊ≥ï</p>
<p>‚Äã	‚ë†„ÄÅ‰ΩøÁî®MyCatÂÖ®Â±ÄË°®</p>
<p>‚Äã	‚ë°„ÄÅÂÜó‰ΩôÈÉ®ÂàÜÂÖ≥ÈîÆÊï∞ÊçÆ</p>
<p>‚Äã	‚ë¢„ÄÅ‰ΩøÁî®APIÁöÑÊñπÂºèËé∑ÂèñÊï∞ÊçÆ</p>
</blockquote>
<h3 id="ÂûÇÁõ¥ÂàáÂàÜÁöÑ‰ºòÁº∫ÁÇπ">ÂûÇÁõ¥ÂàáÂàÜÁöÑ‰ºòÁº∫ÁÇπ</h3>
<p>‰ºòÁÇπ</p>
<ul>
<li>ÊãÜÂàÜÁÆÄÂçïÊòé‰∫ÜÔºåÊãÜÂàÜËßÑÂàôÊòéÁ°Æ</li>
<li>Â∫îÁî®Á®ãÂ∫èÊ®°ÂùóÊ∏ÖÊô∞ÊòéÁ°ÆÔºåÊï¥ÂêàÂÆπÊòì</li>
<li>Êï∞ÊçÆÁª¥Êä§Êñπ‰æøÔºåÂÆπÊòìÂÆö‰Ωç</li>
</ul>
<p>Áº∫ÁÇπ</p>
<ul>
<li>ÈÉ®ÂàÜË°®ÂÖ≥ËÅîÊó†Ê≥ïÂú®Êï∞ÊçÆÂ∫ìÁ∫ßÂà´ÂÆåÊàêÔºåÈúÄË¶ÅÂú®Á®ãÂ∫è‰∏≠ÂÆåÊàê</li>
<li>ÂØπ‰∫éËÆøÈóÆÊûÅÂÖ∂È¢ëÁπÅ‰∏îÊï∞ÊçÆÈáèË∂ÖÂ§ßÁöÑË°®‰æùÊóß‰ºöÊúâÊÄßËÉΩÁì∂È¢à</li>
</ul>
<h2 id="ÂõõÊï∞ÊçÆÂ∫ìÁöÑÊ∞¥Âπ≥ÂàáÂàÜ">Âõõ„ÄÅÊï∞ÊçÆÂ∫ìÁöÑÊ∞¥Âπ≥ÂàáÂàÜ</h2>
<p>‚Äã	‰∏ÄËà¨ÊÉÖÂÜµ‰∏ãÊ∞¥Âπ≥ÂàáÂàÜÊòØÂú®ÂûÇÁõ¥ÂàáÂàÜ‰æùÊóß‰∏çËÉΩÊª°Ë∂≥ÊÄßËÉΩË¶ÅÊ±ÇÁöÑÊó∂ÂÄôËøõË°åÁöÑÔºåÂ∫îËØ•ÊåâÁÖßÊÄßËÉΩÈúÄÊ±ÇÂíå‰∏öÂä°ËßÑÂàôËøõË°åÊ∞¥Âπ≥ÂàáÂàÜÔºåÂç≥ÂèØ‰ª•‰∏çÊ∞¥Âπ≥ÂàáÂàÜÁöÑË°®‰∏çË¶ÅÊ∞¥Âπ≥ÂàáÂàÜ„ÄÇ</p>
<h3 id="ÂàÜÁâáÂêéÁöÑÊü•ËØ¢Â§ÑÁêÜ">ÂàÜÁâáÂêéÁöÑÊü•ËØ¢Â§ÑÁêÜ</h3>
<p><img src="/img/mycat/Shard-Query.png" alt="Shard Query"></p>
<p>1„ÄÅMyCatÊü•ÊâæÊü•ËØ¢SQL‰∏≠ÁöÑË°®ÂØπÂ∫îÁöÑÂàÜÁâá‰ø°ÊÅØ</p>
<p>2„ÄÅÂà§Êñ≠Êü•ËØ¢‰∏≠ÊòØÂê¶ÂåÖÂê´ÂàÜÁâáÈîÆ</p>
<ul>
<li>
<p>Â¶ÇÊûúÊü•ËØ¢‰∏≠ÂåÖÂê´ÂàÜÁâáÈîÆÔºåÂàôÊ†πÊçÆÂàÜÁâáÈîÆÁöÑÂàÜÁâáËßÑÂàôËøõË°åËÆ°ÁÆóÊü•ÊâæÂà∞ÂêéÂè∞ÁúüÂÆûÁâ©ÁêÜDBÂπ∂ÂèëÈÄÅSQL</p>
</li>
<li>
<p>Â¶ÇÊûú‰∏çÂåÖÂê´ÂàÜÁâáÈîÆÂàôÂØπÂêéÂè∞ÊâÄÊúâÈÖçÊúâÊ≠§TableÁöÑÁâ©ÁêÜËäÇÁÇπÂèëÈÄÅSQL</p>
</li>
</ul>
<h3 id="ÂàÜÁâáÈîÆÁöÑÈÄâÊã©">ÂàÜÁâáÈîÆÁöÑÈÄâÊã©</h3>
<ul>
<li>Â¶ÇÊûúÊ≤°ÊúâÂàÜÁâáÈîÆÂèØÈÄâÈÇ£Â∞±ÈÄâÊã©‰∏ªÈîÆ</li>
<li>Â¶ÇÊûúÊúâÂ§ö‰∏™ÂàÜÁâáÈîÆÈÄâÊã©
<ul>
<li>ÂàÜÁâáÈîÆÂèØ‰ª•Â∞ΩÂèØËÉΩÁöÑÂ∞ÜÊï∞ÊçÆÂùáÂåÄÂàÜÂ∏ÉÂà∞ÂêÑ‰∏™ËäÇÁÇπ‰∏ä</li>
<li>ËØ•‰∏öÂä°Â≠óÊÆµÊòØÊúÄÈ¢ëÁπÅÁöÑÊàñÊúÄÈáçË¶ÅÁöÑÊü•ËØ¢Êù°‰ª∂</li>
</ul>
</li>
</ul>
<h3 id="Ê∞¥Âπ≥ÂàáÂàÜÈÖçÁΩÆÁ§∫‰æã">Ê∞¥Âπ≥ÂàáÂàÜÈÖçÁΩÆÁ§∫‰æã</h3>
<p><strong>schema.xmlÈÖçÁΩÆ</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;?xml version=&#34;1.0&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;!DOCTYPE mycat:schema SYSTEM &#34;schema.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;mycat:schema</span> <span style="color:#008080">xmlns:mycat=</span><span style="color:#d14">&#34;http://io.mycat/&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;schema</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;app_db&#34;</span> <span style="color:#008080">checkSQLschema=</span><span style="color:#d14">&#34;false&#34;</span> <span style="color:#008080">sqlMaxLimit=</span><span style="color:#d14">&#34;100&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- ËÆ¢ÂçïÊ®°Âùó --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;order_cart&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;cart_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn152_order&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;order_customer_addr&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;customer_addr_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn152_order&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- ËÆ¢ÂçïË°®ÂçïÁã¨Ê∞¥Âπ≥ÂàáÂàÜ --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;order_master&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;order_id&#34;</span> <span style="color:#008080">rule=</span><span style="color:#d14">&#34;order_master_mod_long&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn152_order01,dn151_order02,dn149_order03&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#998;font-style:italic">&lt;!-- ERÂàÜÁâáÔºåÊ†πÊçÆjoinKeyÊù•ËøõË°åÂàÜÁâá --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000080">&lt;childTable</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;order_detail&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;order_detail_id&#34;</span> <span style="color:#008080">joinKey=</span><span style="color:#d14">&#34;order_id&#34;</span> <span style="color:#008080">parentKey=</span><span style="color:#d14">&#34;order_id&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/table&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- ‰ªìÈÖçÊ®°Âùó --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;shipping_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;ship_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn152_order&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;warehouse_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;w_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn152_order&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;warehouse_proudct&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;wp_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn152_order&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- ÂïÜÂìÅÊ®°Âùó --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;product_brand_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;brand_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn151_product&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;product_category&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;category_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn151_product&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;product_comment&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;comment_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn151_product&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;product_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;product_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn151_product&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;product_pic_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;product_pic_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn151_product&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;product_supplier_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;supplier_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn151_product&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- Áî®Êà∑Ê®°Âùó --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;customer_balance_log&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;balance_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149_consumers&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;customer_inf&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;customer_inf_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149_consumers&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;customer_level_inf&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;customer_level&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149_consumers&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;customer_login&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;customer_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149_consumers&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;customer_login_log&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;login_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149_consumers&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;customer_point_log&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;point_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149_consumers&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- Âú∞Âå∫‰ø°ÊÅØ,ÂÖ®Â±ÄË°® --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;table</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;region_info&#34;</span> <span style="color:#008080">primaryKey=</span><span style="color:#d14">&#34;region_id&#34;</span> <span style="color:#008080">dataNode=</span><span style="color:#d14">&#34;dn149_consumers,dn151_product,dn152_order&#34;</span>  <span style="color:#008080">type=</span><span style="color:#d14">&#34;global&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/schema&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataNode</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dn152_order01&#34;</span> <span style="color:#008080">dataHost=</span><span style="color:#d14">&#34;dh152&#34;</span> <span style="color:#008080">database=</span><span style="color:#d14">&#34;order_db01&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataNode</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dn151_order02&#34;</span> <span style="color:#008080">dataHost=</span><span style="color:#d14">&#34;dh151&#34;</span> <span style="color:#008080">database=</span><span style="color:#d14">&#34;order_db02&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataNode</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dn149_order03&#34;</span> <span style="color:#008080">dataHost=</span><span style="color:#d14">&#34;dh149&#34;</span> <span style="color:#008080">database=</span><span style="color:#d14">&#34;order_db03&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataNode</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dn152_order&#34;</span> <span style="color:#008080">dataHost=</span><span style="color:#d14">&#34;dh152&#34;</span> <span style="color:#008080">database=</span><span style="color:#d14">&#34;order_db&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataNode</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dn151_product&#34;</span> <span style="color:#008080">dataHost=</span><span style="color:#d14">&#34;dh151&#34;</span> <span style="color:#008080">database=</span><span style="color:#d14">&#34;product_db&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataNode</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dn149_consumers&#34;</span> <span style="color:#008080">dataHost=</span><span style="color:#d14">&#34;dh149&#34;</span> <span style="color:#008080">database=</span><span style="color:#d14">&#34;consumers_db&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataHost</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dh152&#34;</span> <span style="color:#008080">maxCon=</span><span style="color:#d14">&#34;1000&#34;</span> <span style="color:#008080">minCon=</span><span style="color:#d14">&#34;10&#34;</span> <span style="color:#008080">balance=</span><span style="color:#d14">&#34;2&#34;</span> <span style="color:#008080">writeType=</span><span style="color:#d14">&#34;0&#34;</span> <span style="color:#008080">dbType=</span><span style="color:#d14">&#34;mysql&#34;</span> <span style="color:#008080">dbDriver=</span><span style="color:#d14">&#34;native&#34;</span> <span style="color:#008080">switchType=</span><span style="color:#d14">&#34;1&#34;</span>  <span style="color:#008080">slaveThreshold=</span><span style="color:#d14">&#34;100&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;heartbeat&gt;</span>select user()<span style="color:#000080">&lt;/heartbeat&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;writeHost</span> <span style="color:#008080">host=</span><span style="color:#d14">&#34;192.168.1.152&#34;</span> <span style="color:#008080">url=</span><span style="color:#d14">&#34;192.168.1.152:3306&#34;</span> <span style="color:#008080">user=</span><span style="color:#d14">&#34;root&#34;</span> <span style="color:#008080">password=</span><span style="color:#d14">&#34;123456&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/dataHost&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataHost</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dh151&#34;</span> <span style="color:#008080">maxCon=</span><span style="color:#d14">&#34;1000&#34;</span> <span style="color:#008080">minCon=</span><span style="color:#d14">&#34;10&#34;</span> <span style="color:#008080">balance=</span><span style="color:#d14">&#34;2&#34;</span> <span style="color:#008080">writeType=</span><span style="color:#d14">&#34;0&#34;</span> <span style="color:#008080">dbType=</span><span style="color:#d14">&#34;mysql&#34;</span> <span style="color:#008080">dbDriver=</span><span style="color:#d14">&#34;native&#34;</span> <span style="color:#008080">switchType=</span><span style="color:#d14">&#34;1&#34;</span>  <span style="color:#008080">slaveThreshold=</span><span style="color:#d14">&#34;100&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;heartbeat&gt;</span>select user()<span style="color:#000080">&lt;/heartbeat&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;writeHost</span> <span style="color:#008080">host=</span><span style="color:#d14">&#34;192.168.1.151&#34;</span> <span style="color:#008080">url=</span><span style="color:#d14">&#34;192.168.1.151:3306&#34;</span> <span style="color:#008080">user=</span><span style="color:#d14">&#34;root&#34;</span> <span style="color:#008080">password=</span><span style="color:#d14">&#34;123456&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/dataHost&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;dataHost</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;dh149&#34;</span> <span style="color:#008080">maxCon=</span><span style="color:#d14">&#34;1000&#34;</span> <span style="color:#008080">minCon=</span><span style="color:#d14">&#34;10&#34;</span> <span style="color:#008080">balance=</span><span style="color:#d14">&#34;2&#34;</span> <span style="color:#008080">writeType=</span><span style="color:#d14">&#34;0&#34;</span> <span style="color:#008080">dbType=</span><span style="color:#d14">&#34;mysql&#34;</span> <span style="color:#008080">dbDriver=</span><span style="color:#d14">&#34;native&#34;</span> <span style="color:#008080">switchType=</span><span style="color:#d14">&#34;1&#34;</span>  <span style="color:#008080">slaveThreshold=</span><span style="color:#d14">&#34;100&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;heartbeat&gt;</span>select user()<span style="color:#000080">&lt;/heartbeat&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;writeHost</span> <span style="color:#008080">host=</span><span style="color:#d14">&#34;192.168.1.149&#34;</span> <span style="color:#008080">url=</span><span style="color:#d14">&#34;192.168.1.149:3306&#34;</span> <span style="color:#008080">user=</span><span style="color:#d14">&#34;root&#34;</span> <span style="color:#008080">password=</span><span style="color:#d14">&#34;123456&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/writeHost&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/dataHost&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/mycat:schema&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>rule.xmlÈÖçÁΩÆ</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;!DOCTYPE mycat:rule SYSTEM &#34;rule.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;mycat:rule</span> <span style="color:#008080">xmlns:mycat=</span><span style="color:#d14">&#34;http://io.mycat/&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;tableRule</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;order_master_mod_long&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;rule&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000080">&lt;columns&gt;</span>customer_id<span style="color:#000080">&lt;/columns&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000080">&lt;algorithm&gt;</span>mod-long<span style="color:#000080">&lt;/algorithm&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/rule&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/tableRule&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;function</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;mod-long&#34;</span> <span style="color:#008080">class=</span><span style="color:#d14">&#34;io.mycat.route.function.PartitionByMod&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;count&#34;</span><span style="color:#000080">&gt;</span>3<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/function&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/mycat:rule&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Ê∞¥Âπ≥ÂàáÂàÜÂºïÂèë‰∏ªÈîÆÈóÆÈ¢ò">Ê∞¥Âπ≥ÂàáÂàÜÂºïÂèë‰∏ªÈîÆÈóÆÈ¢ò</h3>
<p>‚Äã	Ê∞¥Âπ≥ÂàáÂàÜÂ∏¶Êù•‰∫Ü‰∏ªÈîÆËá™Â¢ûÈóÆÈ¢òÔºåÂèØ‰ª•‰ΩøÁî®Êú¨Âú∞Êñá‰ª∂ÊñπÂºè„ÄÅÊï∞ÊçÆÂ∫ìÊñπÂºè „ÄÅÊú¨Âú∞Êó∂Èó¥Êà≥ÊñπÂºè „ÄÅZK ID ÁîüÊàêÂô®ÂíåÁ®ãÂ∫è‰ΩøÁî®RedisÁîüÊàêËá™Â¢ûIDÁöÑÊñπÂºè</p>
<p><strong>Zk ÈÄíÂ¢ûÊñπÂºè</strong></p>
<p>ÂâçÊèêÊù°‰ª∂MyCatÊòØÈõÜÁæ§Ê®°ÂºèÔºåÂ∑≤Âä†ÂÖ•zookeeperÂª∫Á´ãËøûÊé•</p>
<ul>
<li>ÈÖçÁΩÆ<code>server.xml</code>Âä†ÂÖ•‰ª•‰∏ãÈÉ®ÂàÜ</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;system&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;sequnceHandlerType&#34;</span><span style="color:#000080">&gt;</span>4<span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/system&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ÈÖçÁΩÆ<code>sequence_conf.properties </code></li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ÂÖ®Â±Ä</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">GLOBAL.HISIDS</span><span style="color:#000;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">GLOBAL.MINID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">10001</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">GLOBAL.MAXID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">20000</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">GLOBAL.CURID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">10000</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># Ëá™ÂÆö‰πâÊï∞ÊçÆ</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">ORDER.HISIDS</span><span style="color:#000;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">ORDER.MINID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">1001</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">ORDER.MAXID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">2000</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">ORDER.CURID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">1000</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ÊèíÂÖ•SQLÊîπÈÄ†</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span><span style="color:#998;font-style:italic">-- ‰ΩøÁî®ÂÖ®Â±ÄÈÖçÁΩÆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">insert</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">into</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">order</span>(id,<span style="color:#bbb"> </span>...)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">values</span>(next<span style="color:#bbb"> </span>value<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>MYCATSEQ_GLOBAL,<span style="color:#bbb"> </span>...);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">-- ‰ΩøÁî®ÂçïÁã¨Ë°®ÈÖçÁΩÆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">insert</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">into</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">order</span>(id,<span style="color:#bbb"> </span>...)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">values</span>(next<span style="color:#bbb"> </span>value<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>MYCATSEQ_ORDER,<span style="color:#bbb"> </span>...);<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="‰∫îmycatÈ´òÂèØÁî®Êê≠Âª∫">‰∫î„ÄÅMyCatÈ´òÂèØÁî®Êê≠Âª∫</h2>
<p><img src="/img/mycat/ha.png" alt="ha"></p>
<h3 id="mycatÈõÜÁæ§Êê≠Âª∫">MyCatÈõÜÁæ§Êê≠Âª∫</h3>
<p>ÂâçÊúüÂáÜÂ§áÔºöÊê≠Âª∫Â•ΩzookeeperÈõÜÁæ§</p>
<p><strong>Á¨¨‰∏ÄÊ≠•ÔºöÊã∑Ë¥ù‰øÆÊîπÂíåÂ¢ûÂä†ÁöÑÈÖçÁΩÆÊñá‰ª∂Âà∞<code>$MyCat/conf/zkconf</code>‰∏ã</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ÈúÄÂ∞ÜÊâÄÊúâ‰øÆÊîπÁöÑÈÖçÁΩÆÂÖ®ÈÉ®Ë¶ÜÁõñ</span>
</span></span><span style="display:flex;"><span>cp rule.xml schema.xml server.xml zkconf/
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨‰∫åÊ≠•ÔºöÈÖçÁΩÆ<code>$MyCat/conf/myid.properties</code></strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#008080">loadZk</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">true</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">zkURL</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">192.168.1.158:2181,192.168.1.158:2182,192.168.1.158:2183</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ÈõÜÁæ§IDÔºåËßÑÂàí‰∏∫Âêå‰∏Ä‰∏™ÈõÜÁæ§ÁöÑclusterIdË¶ÅÁõ∏Âêå</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">clusterId</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">mycat-cluster</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ÊØè‰∏™ËäÇÁÇπÁöÑID,‰∏çËÉΩÈáçÂ§ç</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">myid</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">mycat_fz_01</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ÊØè‰∏™ËäÇÁÇπÁöÑÂêçÁß∞ÔºåÈúÄË¶ÅÂÖ®ÈÉ®ÂÜôËøôÈáå</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">clusterNodes</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">mycat_fz_01,mycat_fz_02</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">type</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">server</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">boosterDataHosts</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">dataHost1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨‰∏âÊ≠•Ôºö‰∏ä‰º†Êñá‰ª∂ÂÜÖÂÆπÂà∞zkÈõÜÁæ§</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># Ëøô‰∏™ÂëΩ‰ª§ÈúÄË¶ÅÂú®$MyCat/binÁõÆÂΩï‰∏ãÊâßË°åÂê¶ÂàôÁõÆÂΩï‰ΩçÁΩÆ‰ºöÂá∫Áé∞ÈóÆÈ¢ò</span>
</span></span><span style="display:flex;"><span>init_zk_data.sh
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨ÂõõÊ≠•ÔºöÈáçÂêØmycat</strong></p>
<blockquote>
<p>Ê≠§Êó∂ÂèØ‰ª•Êü•ÁúãÈõÜÁæ§‰∏≠ÊâÄÊúâmycatÈÖçÁΩÆÊòØÂê¶‰∏ÄËá¥</p>
</blockquote>
<h3 id="mycatËá™Ë∫´È´òÂèØÁî®">MyCatËá™Ë∫´È´òÂèØÁî®</h3>
<h4 id="Êê≠Âª∫haproxyÂÆûÁé∞mycatÂêéÂè∞Ë¥üËΩΩÂùáË°°">Êê≠Âª∫HaproxyÂÆûÁé∞MycatÂêéÂè∞Ë¥üËΩΩÂùáË°°</h4>
<p><strong>Á¨¨‰∏ÄÊ≠•ÔºöÂÆâË£ÖHaproxy</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>yum install haproxy
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨‰∫åÊ≠•Ôºö‰øÆÊîπ<code>/etc/haproxy/haproxy.cfg</code>ÁöÑÈÖçÁΩÆ</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cfg" data-lang="cfg"><span style="display:flex;"><span><span style="color:#008080">global</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">chroot      /var/lib/haproxy</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">pidfile     /var/run/haproxy.pid</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">maxconn     4000</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">user        haproxy</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">group       haproxy</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">daemon</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">stats socket /var/lib/haproxy/stats</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#008080">defaults</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">mode                    http</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">log                     global</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">option                  httplog</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">option                  dontlognull</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">option http-server-close</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># ‰ΩøÁî®tcpÊó∂Ê≥®ÈáäÊéâË¶Å‰∏ç‰ºöÊúâË≠¶Âëä</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># option forwardfor       except 127.0.0.0/8</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">option                  redispatch</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">retries                 3</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">timeout http-request    10s</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">timeout queue           1m</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">timeout connect         10s</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">timeout client          1m</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">timeout server          1m</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">timeout http-keep-alive 10s</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">timeout check           10s</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">maxconn                 3000</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># haproxyÁÆ°ÁêÜÂëòÁôªÈôÜÁïåÈù¢</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">listen admin_stats</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">bind 0.0.0.0:4001</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">mode http</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">stats uri /stats</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">stats realm Haproxy\ Statistics</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">stats auth admin:admin</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">stats admin if TRUE</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># mycatÊúçÂä°Ë¥üËΩΩ</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">listen allmycat_service</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">bind    0.0.0.0:8069</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">mode    tcp</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">option  tcplog</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">balance roundrobin</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">server  mycat1 192.168.1.158:8066 check inter 5s rise 2 fall 3</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">server  mycat2 192.168.1.149:8066 check inter 5s rise 2 fall 3</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">option  tcpka  #keepalivedÊ≠ªÈìæÊ£ÄÊµã</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># mycatÁõëÊéßÁ´ØÂè£Ë¥üËΩΩ</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">listen allmycat_admin</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">bind    0.0.0.0:9069</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">mode    tcp</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">option  tcplog</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">balance roundrobin</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">server  mycat1 192.168.1.158:9066 check inter 5s rise 2 fall 3</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">server  mycat2 192.168.1.149:9066 check inter 5s rise 2 fall 3</span>
</span></span><span style="display:flex;"><span>    <span style="color:#008080">option  tcpka  #keepalivedÊ≠ªÈìæÊ£ÄÊµã</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨‰∏âÊ≠•ÔºöÊ£ÄÊü•ÂêØÂä®</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># Ê£ÄÊü•ÈÖçÁΩÆÊñá‰ª∂ÊòØÂê¶Ê≠£Á°Æ</span>
</span></span><span style="display:flex;"><span>haproxy -c -f /etc/haproxy/haproxy.cfg
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ÂêØÂä®</span>
</span></span><span style="display:flex;"><span>haproxy -f /etc/haproxy/haproxy.cfg
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="Êê≠Âª∫keepalived‰ΩúÁî®‰∫éhaproxyÂÆûÁé∞È´òÂèØÁî®">Êê≠Âª∫keepalived‰ΩúÁî®‰∫éhaproxyÂÆûÁé∞È´òÂèØÁî®</h4>
<p><strong>Á¨¨‰∏ÄÊ≠•ÔºöÂÆâË£Ökeepalived</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>yum install keepalived
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨‰∫åÊ≠•Ôºö‰øÆÊîπ<code>/etc/keepalived/keepalived.conf</code>ÁöÑÈÖçÁΩÆ</strong></p>
<pre tabindex="0"><code class="language-conf" data-lang="conf">! Configuration File for keepalived

global_defs {
   # ÊØè‰∏™ËäÇÁÇπ‰∏ç‰∏ÄÊ†∑
   router_id 152
}

# Ê£ÄÊü•ËÑöÊú¨ÈÖçÁΩÆ„ÄÇÂøÖÈ°ªÂú®‰ΩøÁî®ËÑöÊú¨‰πãÂâçÈÖçÁΩÆÂ•Ω
vrrp_script check_haproxy {
    script &#34;/etc/keepalived/check_haproxy.sh&#34;
    interval 2  #Ê£ÄÊµãÊó∂Èó¥Èó¥Èöî
    weight -20  #Â¶ÇÊûúÊù°‰ª∂ÊàêÁ´ãÂàôÊùÉÈáçÂáè20
}

vrrp_instance VI_1 {
    # ÂàÜ‰∏∫MASTERÂíåBACKUP
    state MASTER
    # ÁΩëÂç°
    interface enp0s3
    # Âêå‰∏ÄÁªÑkeepaliveÊ≠§ÂÄº‰∏ÄÊ†∑Áî®‰∫éÂå∫ÂàÜÁªÑ
    virtual_router_id 101
    # ‰ºòÂÖàÁ∫ßÂà´
    priority 100
    # ÈùûÊä¢Âç†Ê®°ÂºèÔºåMASTERÊúâÁî®
    nopreempt
    # ÂπøÊí≠‰ºòÂÖàÁ∫ßÈó¥ÈöîÊó∂Èó¥
    advert_int 1
    authentication {
        auth_type PASS
        auth_pass 1111
    }
    virtual_ipaddress {
      192.168.1.101
    }
    # Ë¶ÅÊîæÂú®VIPÂêéÈù¢
    track_script {
        check_haproxy
    }
}
</code></pre><p><strong>Á¨¨‰∏âÊ≠•ÔºöÈÖçÁΩÆÊ£ÄÊü•ËÑöÊú¨„ÄêÂøÖÈ°ªË¶ÅÊúâÊâßË°åÊùÉÈôê„Äë</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#008080">A</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">`</span>ps -C haproxy --no-header |wc -l<span style="color:#d14">`</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">[</span> <span style="color:#008080">$A</span> -eq <span style="color:#099">0</span> <span style="color:#000;font-weight:bold">]</span>;<span style="color:#000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0086b3">echo</span> <span style="color:#d14">&#34;`date` haproxy is dead&#34;</span> &gt;&gt; /tmp/lvs.log
</span></span><span style="display:flex;"><span>    haproxy  -f /etc/haproxy/haproxy.cfg
</span></span><span style="display:flex;"><span>    sleep <span style="color:#099">2</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">if</span> <span style="color:#000;font-weight:bold">[</span> <span style="color:#d14">`</span>ps -C haproxy --no-header |wc -l<span style="color:#d14">`</span> -eq <span style="color:#099">0</span> <span style="color:#000;font-weight:bold">]</span>;<span style="color:#000;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0086b3">echo</span> <span style="color:#d14">&#34;`date` haproxy cannot start,stop keepalived&#34;</span> &gt;&gt; /tmp/lvs.log
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic"># ÊùÄÊ≠ªkeepalived</span>
</span></span><span style="display:flex;"><span>    ps -C keepalived --no-header | awk <span style="color:#d14">&#39;{print $1}&#39;</span>|xargs <span style="color:#0086b3">kill</span> -9
</span></span><span style="display:flex;"><span>    <span style="color:#0086b3">exit</span> <span style="color:#099">0</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#0086b3">echo</span> <span style="color:#d14">&#34;`date` haproxy restart&#34;</span> &gt;&gt; /tmp/lvs.log
</span></span><span style="display:flex;"><span>    <span style="color:#0086b3">exit</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">fi</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨ÂõõÊ≠•ÔºöÂêØÂä®keepalivedÂíåÊü•ÁúãÊó•Âøó</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>keepalived -f /etc/keepalived/keepalived.conf
</span></span><span style="display:flex;"><span>tail -f -n <span style="color:#099">50</span> /var/log/messages
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="ÂÖ≠mycatÁõëÊéß">ÂÖ≠„ÄÅMyCatÁõëÊéß</h2>
<h3 id="‰ΩøÁî®mycatÁîüÊàêÊâßË°åsqlËÆ∞ÂΩï">‰ΩøÁî®MyCatÁîüÊàêÊâßË°åSQLËÆ∞ÂΩï</h3>
<p>Âú®server.xmlÁöÑsystemÊ†áÁ≠æ‰∏ãÈÖçÁΩÆÊã¶Êà™</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;system&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÈÖçÁΩÆÊã¶Êà™Âô® --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;sqlInterceptor&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    io.mycat.server.interceptor.impl.StatisticsSqlInterceptor
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÈÖçÁΩÆÊã¶Êà™SQLÁ±ªÂûã --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;sqlInterceptorType&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    selectÔºåupdateÔºåinsertÔºådelete
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- ÈÖçÁΩÆSQLÁîüÊàêÊñá‰ª∂‰ΩçÁΩÆ --&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;sqlInterceptorFile&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    /opt/mycat/InterceptorFile/sql.txt
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/system&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="mycatÂëΩ‰ª§Ë°åÁÆ°ÁêÜÂ∑•ÂÖ∑">MyCatÂëΩ‰ª§Ë°åÁÆ°ÁêÜÂ∑•ÂÖ∑</h3>
<p>‰ΩøÁî®Âêç<code> mysql -u[username] -p -P[ÁÆ°ÁêÜÁ´ØÂè£ÔºåÈªòËÆ§9066] -h[ip]</code>ËøûÊé•MyCatÂëΩ‰ª§Ë°åÁÆ°ÁêÜÁ´Ø</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span><span style="color:#998;font-style:italic">-- Â∏ÆÂä©ÂëΩ‰ª§
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">show</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">@@</span>help<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">\</span>G;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">-- ÈáçÊñ∞Âä†ËΩΩÈÖçÁΩÆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>reload<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">@@</span>config;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>reload<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">@@</span>config_all;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">-- ÊòæÁ§∫Áâ©ÁêÜÊúçÂä°Âô®‰ø°ÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">show</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">@@</span><span style="color:#000;font-weight:bold">databases</span><span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">\</span>G;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">-- ÊòæÁ§∫datanodeËäÇÁÇπ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">show</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">@@</span>datanode<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">\</span>G;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">-- ÊòæÁ§∫ÊâÄÊúâËøûÊé•‰ø°ÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">show</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">@@</span>connection<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">\</span>G;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">-- ÊùÄÊ≠ªËøûÊé•
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">kill</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">@@</span>connection<span style="color:#bbb"> </span>id1,id2,...<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">-- Â±ïÁ§∫ÂêéÂè∞ÈìæÊé•ËØ¶ÁªÜ‰ø°ÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">show</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">@@</span>backend<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">\</span>G;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">-- ÊòæÁ§∫ÂΩìÂâçÁºìÂ≠ò‰ø°ÊÅØÔºàERÂàÜÁâá‰ø°ÊÅØ„ÄÅ‰∏ªÈîÆÁºìÂ≠ò„ÄÅË∑ØÁî±ÁºìÂ≠òÔºâ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">show</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">@@</span>cache<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">\</span>G;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">-- ÊòæÁ§∫ÈÖçÁΩÆÁöÑÁâ©ÁêÜÊúçÂä°Âô®‰ø°ÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">show</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">@@</span>datasource<span style="color:#bbb"> </span><span style="color:#a61717;background-color:#e3d2d2">\</span>G;<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="mycatÁöÑguiÁÆ°ÁêÜÂ∑•ÂÖ∑">MyCatÁöÑGUIÁÆ°ÁêÜÂ∑•ÂÖ∑</h3>
<p>‰ΩøÁî®mycat-webÂèØ‰ª•Êõ¥Âä†Áõ¥ËßÇÁöÑÁúãÂà∞<strong>mycatÈõÜÁæ§Áä∂ÊÄÅ</strong>Ôºå<a href="http://dl.mycat.io/mycat-web-1.0">‰∏ãËΩΩÂú∞ÂùÄ</a>ÔºåÈÖçÁΩÆÊó∂Ê≥®ÊÑè‰øÆÊîπ<code>mycat-web/WEB-INF/classes/mycat.properties</code>ÔºåÈªòËÆ§ËÆøÈóÆÂú∞ÂùÄ<code>http://ip:8082/mycat</code></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-properties" data-lang="properties"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># Âè™ÈúÄ‰øÆÊîπzookeeperËøôË°å</span>
</span></span><span style="display:flex;"><span><span style="color:#008080">zookeeper</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">localhost:2181</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/img/mycat/mycat-web.png" alt="mycat-web"></p>
<h2 id="‰∏ÉmycatÁöÑÈôêÂà∂">‰∏É„ÄÅMyCatÁöÑÈôêÂà∂</h2>
<h3 id="mycat‰∏çÊîØÊåÅÁöÑsqlËØ≠Âè•">MyCat‰∏çÊîØÊåÅÁöÑSQLËØ≠Âè•</h3>
<ul>
<li>DDLËØ≠Âè•„ÄêÂ¶ÇÔºöcreate table like xxx / create table select xxx / create table„Äë</li>
<li>Ë∑®Â∫ìÂ§öË°®ÂÖ≥ËÅîÔºåÂ≠êÊü•ËØ¢</li>
<li>select for update/select lock in share mode„ÄêËøô‰ø©ËØ≠Âè•Âè™‰ºöÈöèÊú∫ÂèëÈÄÅÂà∞ÂêéÁ´Ø‰∏Ä‰∏™ËäÇÁÇπÂØºËá¥Êï∞ÊçÆÂ∫ìÂá∫Áé∞ÈóÆÈ¢ò„Äë</li>
<li>Â§öË°®updateÊàñupdateÂàÜÁâáÈîÆ</li>
<li>Ë∑®ÂàÜÁâáÁöÑÂ∏¶ÊúâlimitÁöÑupdate/delete</li>
</ul>
<h3 id="ÂØπ‰∫ãÂä°ÁöÑÊîØÊåÅÊúâÈôêxa-‰∫ãÂä°">ÂØπ‰∫ãÂä°ÁöÑÊîØÊåÅÊúâÈôêÔºàXA ‰∫ãÂä°Ôºâ</h3>
<p><img src="/img/mycat/xa.png" alt="xa"></p>
<p>Á¨¨‰∏ÄÊ≠•ÔºöÂÉèÂêéÂè∞Êï∞ÊçÆÂ∫ìÂèëÈÄÅbegin</p>
<p>Á¨¨‰∫åÊ≠•ÔºöÂèëÈÄÅÊâßË°åÁöÑSQLÔºåÁ≠âÂæÖÊâÄÊúâËäÇÁÇπÈÉΩËøîÂõûÊàêÂäüÊâçÊâßË°å‰∏ãÈù¢Ê≠•È™§ÔºåÂ¶ÇÊûúÊúâ‰ªª‰Ωï‰∏Ä‰∏™ËøîÂõûÂ§±Ë¥•ÔºåÂÖ®ÈÉ®rollback</p>
<p>Á¨¨‰∏âÊ≠•ÔºöÊâßË°åcommitÁ≠âÂæÖÊâÄÊúâËäÇÁÇπËøîÂõûÔºåÁ≠âÂæÖÁªìÊûúËøîÂõûÁªôÂÆ¢Êà∑Á´ØÔºåÂ¶ÇÊûúÊúâ‰ªª‰Ωï‰∏Ä‰∏™ËøîÂõûÂ§±Ë¥•ÔºåËøîÂõû‰∫ãÂä°Â§ÑÁêÜÂ§±Ë¥•</p>
<blockquote>
<p>Â¶ÇÊûúÊúâcommitËøáÁ®ã‰∏≠‰ªªÊÑè‰∏Ä‰∏™ËäÇÁÇπÊä•ÈîôÔºåÊï∞ÊçÆ‰∏ÄËá¥ÊÄßÂ∞ÜÊó†Ê≥ï‰øùËØÅÔºàÂèØËÉΩÊÄßÂæàÂ∞èÔºâ</p>
</blockquote>

    </div>

    

    <div class="container-comment-giscus">
        <script src="https://giscus.app/client.js"
        data-repo="loveminimal/comment"
        data-repo-id="R_kgDOJNJQ8g"
        data-category="General"
        data-category-id="DIC_kwDOJNJQ8s4CYl0m"
        data-mapping="title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="noborder_light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
        </script>
</div>
</div>

        </div>
        <div id="footer"><div class="container-footer">
    

    <div class="beian">
        
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41092802000242">
            

        </a>

        
        <a href="//beian.miit.gov.cn" target="_blank">
            
            <span class="some">icp...<span>
            
        </a>
    </div>

    
    <div class="info">
        
        <a href="https://github.com/loveminimal/hugo-theme-virgo">üïäÔ∏è</a> 2016 - <span id="info-date"></span>
    </div>

</div></div>
        <div class="cool-after" style="
            
                background-color: rgba(255, 255, 255, 0.49); 
                backdrop-filter: saturate(100%) blur(6px);
            
            "></div>
    </body>
</html>
