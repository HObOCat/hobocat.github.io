<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="MongoDB‰ΩøÁî®ËØ¶Ëß£ - https://hobocat.github.io/post/nosql/2021-01-29-mongodb/">
    <meta name="author" content="Jack - https://hobocat.github.io/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>MongoDB‰ΩøÁî®ËØ¶Ëß£</title>
    
    <base target="_blank">
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    
    
    
    
    <link rel="stylesheet" href="https://hobocat.github.io/style.min.94e7ed14b48117025ebd1148adc11f7268f1ebf50d97297ac663edf1aa6f52dc.css">
    
    <script>const DARK =  false ;</script>
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate cool">
        <div class="container-floating-box">
	<div class="box box1"></div>
	<div class="box box11"></div>
	<div class="box box12"></div>
	<div class="box box2"></div>
	<div class="box box3"></div>
	<div class="box box4"></div>
	<div class="box box5"></div>
	<div class="box box6"></div>
	<div class="box box7"></div>
	<div class="box box8"></div>
	<div class="box box9"></div>
</div>
        <div class="cool-before" style="background: url('/imgs/bg/wallhaven-6qr21l.jpg') left top/100% no-repeat fixed;"></div>
        <div id="header" class=""><div class="container-header">

    
    
    
    <div class="right">
        
        <h1 class="title">MongoDB‰ΩøÁî®ËØ¶Ëß£</h1>
    
        
        
            <div id="toc">üìú</div>
        
    </div>
</div>
</div>
        <div id="content">










<div class="container-main container-page ">

    

    
    
    
    <div class="rel">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <div class="curtag-desc">
            <a href="https://hobocat.github.io/tags/nosql/"><img src="/imgs/icons/tag.svg" width="16" /> Áõ∏ÂÖ≥ÊñáÁ´†ÔºöNoSQL <sup>3</sup></a>
        </div>

        <div class="curtag-post">
            
            
            
                <div class="curtag-post-item curtag-post-item--active">
                    <a href="https://hobocat.github.io/post/nosql/2021-01-29-mongodb/">MongoDB‰ΩøÁî®ËØ¶Ëß£</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://hobocat.github.io/post/nosql/2019-03-21-redis/">Redis‰ΩøÁî®ËØ¶Ëß£</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://hobocat.github.io/post/nosql/2022-09-05-redisstruct/">redisÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ</a>
                </div>
                
                
        </div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </div>
    
    

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="7409" width="12" height="12">
                <path
                    d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z"
                    p-id="7410" fill="#adb5bd"></path>
            </svg>
            2021-01-29&nbsp;&nbsp;&nbsp;
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="23838" width="11" height="11">
                <path
                    d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z"
                    p-id="23839" fill="#adb5bd"></path>
            </svg>
            2024-05-15&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="33866" width="12" height="12">
                <path
                    d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z"
                    fill="#adb5bd" p-id="33867"></path>
                <path
                    d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z"
                    fill="#adb5bd" p-id="33868"></path>
            </svg>
            14828 Â≠ó</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="32892" width="12" height="12">
                <path
                    d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z"
                    p-id="32893" fill="#adb5bd"></path>
                <path
                    d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z"
                    p-id="32894" fill="#adb5bd"></path>
            </svg>
            30 ÂàÜÈíü</span>
        <div class="container-ctgtag">
	<div class="taxonomy">
		<div class="tag">
			
			
			<a href="/tags/nosql">NoSQL</a>
			
		</div>
	</div>
</div>
        
    </div>

    <div class="toc">
        <div class="container-page-operation">
	<div class="page-operation">
		<div><a href="/"><img src="/imgs/icons/home-2.svg" alt=""></a></div>
		<div><a href="/nav"><img src="/imgs/icons/iov-navigate-1.svg" alt=""></a></div>
		<div><a href="/wiki"><img src="/imgs/icons/wiki.svg" alt=""></a></div>
		<div><a href="/tags"><img src="/imgs/icons/treetags.svg" alt=""></a></div>
		<div id="light-dark"><a><img src="/imgs/icons/moon2.svg" alt=""></a></div>
		<div><a href="#"><img src="/imgs/icons/up2.svg" alt=""></a></div>
	</div>
</div>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#‰∏ÄmongodbÁÆÄ‰ªãÂÆâË£Ö">‰∏Ä„ÄÅMongoDBÁÆÄ‰ªã&amp;ÂÆâË£Ö</a>
      <ul>
        <li><a href="#ÁÆÄ‰ªã">ÁÆÄ‰ªã</a></li>
        <li><a href="#ÂçïËäÇÁÇπÂÆâË£Ö">ÂçïËäÇÁÇπÂÆâË£Ö</a></li>
      </ul>
    </li>
    <li><a href="#‰∫åÂü∫Êú¨Ê¶ÇÂøµ">‰∫å„ÄÅÂü∫Êú¨Ê¶ÇÂøµ</a>
      <ul>
        <li><a href="#Êó†Ê®°ÂºèÊï∞ÊçÆÂ∫ì">Êó†Ê®°ÂºèÊï∞ÊçÆÂ∫ì</a></li>
        <li><a href="#mongodb‰∏âË¶ÅÁ¥†">MongoDB‰∏âË¶ÅÁ¥†</a></li>
        <li><a href="#mongodbÁöÑÊï∞ÊçÆÁ±ªÂûã">MongoDBÁöÑÊï∞ÊçÆÁ±ªÂûã</a></li>
      </ul>
    </li>
    <li><a href="#‰∏âÁî®Êà∑ÊùÉÈôê">‰∏â„ÄÅÁî®Êà∑ÊùÉÈôê</a>
      <ul>
        <li><a href="#ÂàõÂª∫Áî®Êà∑">ÂàõÂª∫Áî®Êà∑</a></li>
        <li><a href="#ÁôªÈôÜÁî®Êà∑">ÁôªÈôÜÁî®Êà∑</a></li>
        <li><a href="#Êü•ÁúãÁî®Êà∑‰ø°ÊÅØ">Êü•ÁúãÁî®Êà∑‰ø°ÊÅØ</a></li>
        <li><a href="#Êõ¥Êñ∞Áî®Êà∑">Êõ¥Êñ∞Áî®Êà∑</a></li>
        <li><a href="#‰øÆÊîπÁî®Êà∑ÂØÜÁ†ÅÂáΩÊï∞">‰øÆÊîπÁî®Êà∑ÂØÜÁ†ÅÂáΩÊï∞</a></li>
        <li><a href="#Âà†Èô§Áî®Êà∑">Âà†Èô§Áî®Êà∑</a></li>
      </ul>
    </li>
    <li><a href="#ÂõõdatabaseÊìç‰Ωú">Âõõ„ÄÅDatabaseÊìç‰Ωú</a></li>
    <li><a href="#‰∫îcollectionÊìç‰Ωú">‰∫î„ÄÅCollectionÊìç‰Ωú</a></li>
    <li><a href="#ÂÖ≠document-Êìç‰Ωú">ÂÖ≠„ÄÅDocument Êìç‰Ωú</a>
      <ul>
        <li><a href="#Êñ∞Â¢ûÊñáÊ°£">Êñ∞Â¢ûÊñáÊ°£</a></li>
        <li><a href="#Êü•ËØ¢ÊñáÊ°£">Êü•ËØ¢ÊñáÊ°£</a></li>
        <li><a href="#Êõ¥Êñ∞ÊñáÊ°£">Êõ¥Êñ∞ÊñáÊ°£</a></li>
        <li><a href="#Âà†Èô§ÊñáÊ°£">Âà†Èô§ÊñáÊ°£</a></li>
      </ul>
    </li>
    <li><a href="#‰∏ÉÂÜÖÁΩÆÂáΩÊï∞">‰∏É„ÄÅÂÜÖÁΩÆÂáΩÊï∞</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#ÂÖ´ËøêÁÆóÁ¨¶">ÂÖ´„ÄÅËøêÁÆóÁ¨¶</a></li>
    <li><a href="#‰πùÁ¥¢Âºï">‰πù„ÄÅÁ¥¢Âºï</a>
      <ul>
        <li><a href="#ÂàõÂª∫Á¥¢Âºï">ÂàõÂª∫Á¥¢Âºï</a></li>
        <li><a href="#Êü•ÁúãÁ¥¢Âºï">Êü•ÁúãÁ¥¢Âºï</a></li>
        <li><a href="#Á¥¢ÂºïÁ±ªÂûã">Á¥¢ÂºïÁ±ªÂûã</a></li>
        <li><a href="#Êü•ËØ¢ËÆ°Âàí">Êü•ËØ¢ËÆ°Âàí</a></li>
      </ul>
    </li>
    <li><a href="#ÂçÅÈõÜÁæ§">ÂçÅ„ÄÅÈõÜÁæ§</a>
      <ul>
        <li><a href="#Â§çÂà∂ÈõÜreplication-set">Â§çÂà∂ÈõÜÔºàReplication SetÔºâ</a></li>
        <li><a href="#ÂàÜÁâáÈõÜÁæ§shard-cluster">ÂàÜÁâáÈõÜÁæ§Ôºàshard clusterÔºâ</a></li>
      </ul>
    </li>
    <li><a href="#ÂçÅ‰∏Äspring-data-mongodb">ÂçÅ‰∏Ä„ÄÅSpring Data Mongodb</a>
      <ul>
        <li><a href="#ÂàõÂª∫ÊñáÊ°£">ÂàõÂª∫ÊñáÊ°£</a></li>
        <li><a href="#Êõ¥Êñ∞ÊñáÊ°£-1">Êõ¥Êñ∞ÊñáÊ°£</a></li>
        <li><a href="#Âà†Èô§ÊñáÊ°£-1">Âà†Èô§ÊñáÊ°£</a></li>
        <li><a href="#Êü•ËØ¢ÊñáÊ°£-1">Êü•ËØ¢ÊñáÊ°£</a></li>
        <li><a href="#ËÅöÂêàÊìç‰Ωú">ËÅöÂêàÊìç‰Ωú</a></li>
        <li><a href="#gridfsÊìç‰Ωú">GridFSÊìç‰Ωú</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

    <div class='content  '>
        <h2 id="‰∏ÄmongodbÁÆÄ‰ªãÂÆâË£Ö">‰∏Ä„ÄÅMongoDBÁÆÄ‰ªã&amp;ÂÆâË£Ö</h2>
<h3 id="ÁÆÄ‰ªã">ÁÆÄ‰ªã</h3>
<p>‚Äã	MongoDBÊòØNoSQLÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊñáÊ°£ÂûãÊï∞ÊçÆÂ∫ìÔºåÊñáÊ°£ÂûãÊï∞ÊçÆÂ∫ì‰∏éÂÖ≥Á≥ªÂûãÊúÄ‰∏∫Êé•Ëøë„ÄÇÂÆÉÊîØÊåÅÁöÑÊï∞ÊçÆÁªìÊûÑÈùûÂ∏∏ÊùæÊï£ÔºåÊòØÁ±ª‰ººjsonÁöÑbsonÊ†ºÂºèÔºåÂõ†Ê≠§ÂèØ‰ª•Â≠òÂÇ®ÊØîËæÉÂ§çÊùÇÁöÑÊï∞ÊçÆÁ±ªÂûã„ÄÇMongoDBÂÖ∑Êúâ‰æøÊç∑Âíå‰∏∞ÂØåÁöÑÊü•ËØ¢ÊâãÊÆµÔºåÈ´òÂèØÁî®Ôºà‰∏ªÂ§áÔºâÁöÑÁâπÊÄßÔºåÊ®™ÂêëÊâ©Â±ïÔºàshardingÔºâÁöÑËÉΩÂäõÔºåÂπ∂ÊîØÊåÅÂ§ö‰∏™Â≠òÂÇ®ÂºïÊìéÔºàwiredtiger„ÄÅmmapÔºâÁ≠â‰ºòÁßÄÁâπÊÄß„ÄÇ</p>
<h3 id="ÂçïËäÇÁÇπÂÆâË£Ö">ÂçïËäÇÁÇπÂÆâË£Ö</h3>
<p><strong>Á¨¨‰∏ÄÊ≠•ÔºöÂÆâË£Ö‰æùËµñ</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>yum install -y make
</span></span><span style="display:flex;"><span>yum install -y gcc-c++
</span></span><span style="display:flex;"><span>yum install -y openssl
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨‰∫åÊ≠•ÔºötarÂåÖËß£ÂéãÁº©</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>tar -zxvf mongodb-linux-x86_64-rhel<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.tgz -C /opt/module/
</span></span><span style="display:flex;"><span>mv /opt/module/mongodb-linux-x86_64-rhel<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span> /opt/module/mongodb
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨‰∏âÊ≠•ÔºöÁõÆÂΩï</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ÂàõÂª∫Êï∞ÊçÆÂ≠òÂÇ®ÁõÆÂΩï</span>
</span></span><span style="display:flex;"><span>mkdir -p /opt/module/mongodb/data
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ÂàõÂª∫Êó•ÂøóÂ≠òÂÇ®ÁõÆÂΩï</span>
</span></span><span style="display:flex;"><span>mkdir -p /opt/module/mongodb/logs
</span></span><span style="display:flex;"><span>touch /opt/module/mongodb/logs/mongodb.log
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨ÂõõÊ≠•ÔºöÂçïËäÇÁÇπÂêØÂä®</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ÊñπÂºè‰∏ÄÔºöÂêéÂè∞ÂêØÂä®ÊñπÂºè --forkÔºåÂê¶ÂàôÊòØ‰∏™ÂâçÂè∞ËøõÁ®ã</span>
</span></span><span style="display:flex;"><span>./mongod --dbpath<span style="color:#000;font-weight:bold">=</span>/opt/module/mongodb/data --logpath<span style="color:#000;font-weight:bold">=</span>/opt/module/mongodb/logs/mongodb.log --bind_ip_all --fork <span style="color:#000;font-weight:bold">[</span>--logappend<span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ÊñπÂºè‰∫åÔºöÈÖçÁΩÆÊñá‰ª∂ÂêØÂä®</span>
</span></span><span style="display:flex;"><span>mkdir -p /opt/module/mongodb/conf
</span></span><span style="display:flex;"><span>vim /opt/module/mongodb/conf/mongodb.conf
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># logpath=/opt/module/mongodb/logs/mongodb.log</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># dbpath=/opt/module/mongodb/data</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># bind_ip_all=true</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># fork=true</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># logappend=true</span>
</span></span><span style="display:flex;"><span>./mongod -f /opt/module/mongodb/conf/mongodb.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨ÂõõÊ≠•ÔºöÂÖ≥Èó≠</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ÊñπÂºè‰∏ÄÔºökillËøõÁ®ã</span>
</span></span><span style="display:flex;"><span>ps -aux | grep mongod
</span></span><span style="display:flex;"><span><span style="color:#0086b3">kill</span> -9 <span style="color:#000;font-weight:bold">[</span>processId<span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ÊñπÂºè‰∫åÔºöÂëΩ‰ª§ÂÖ≥Èó≠ÔºåÂÖ≥Èó≠Êó∂ÂøÖÈ°ªÊåáÂÆöÊï∞ÊçÆÂ≠òÊîæ‰ΩçÁΩÆ</span>
</span></span><span style="display:flex;"><span>./mongod --shutdown -dbpath<span style="color:#000;font-weight:bold">=</span>/opt/module/mongodb/data
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ÊñπÂºè‰∏âÔºöËøõÂÖ•mongoÂÆ¢Êà∑Á´ØÔºå‰ΩøÁî®ÂáΩÊï∞ÂÖ≥Èó≠</span>
</span></span><span style="display:flex;"><span>./mongo
</span></span><span style="display:flex;"><span>use admin
</span></span><span style="display:flex;"><span>db.shutdownServer<span style="color:#000;font-weight:bold">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="‰∫åÂü∫Êú¨Ê¶ÇÂøµ">‰∫å„ÄÅÂü∫Êú¨Ê¶ÇÂøµ</h2>
<h3 id="Êó†Ê®°ÂºèÊï∞ÊçÆÂ∫ì">Êó†Ê®°ÂºèÊï∞ÊçÆÂ∫ì</h3>
<p>‚Äã	ÂæàÂ§öNoSQLÊï∞ÊçÆÂ∫ìÊúâÊó†Ê®°ÂºèÁöÑÂÖ±ÂêåÁÇπ„ÄÇËã•Ë¶ÅÂú®ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì‰∏≠Â≠òÂÇ®Êï∞ÊçÆÔºåÈ¶ñÂÖàÂøÖÈ°ªÂÆö‰πâ<code>Ê®°Âºè</code>Ôºå‰πüÂ∞±ÊòØÁî®‰∏ÄÁßçÈ¢ÑÂÆö‰πâÁªìÊûÑÂêëÊï∞ÊçÆÂ∫ìËØ¥ÊòéË¶ÅÊúâÂì™‰∫õË°®Ê†ºÔºåË°®‰∏≠ÊúâÂì™‰∫õÂàóÔºåÊØè‰∏ÄÂàóÈÉΩÂ≠òÊîæ‰ΩïÁßçÁ±ªÂûãÁöÑÊï∞ÊçÆ„ÄÇÂøÖÈ°ªÂÖàÂÆö‰πâÂ•ΩÊ®°ÂºèÔºåÁÑ∂ÂêéÊâçËÉΩÂ≠òÊîæÊï∞ÊçÆ„ÄÇ</p>
<p>‚Äã	Áõ∏ÊØî‰πã‰∏ãÔºåNoSQLÊï∞ÊçÆÂ∫ìÁöÑÊï∞ÊçÆÂ≠òÂÇ®Â∞±ÊØîËæÉÈöèÊÑè„ÄÇ<code>ÈîÆÂÄºÊï∞ÊçÆÂ∫ì</code>ÂèØ‰ª•Êää‰ªª‰ΩïÊï∞ÊçÆÂ≠òÊîæÂú®‰∏Ä‰∏™ÈîÆÁöÑÂêç‰∏ã„ÄÇ<code>ÊñáÊ°£Êï∞ÊçÆÂ∫ì</code>ÂÆûÈôÖ‰∏ä‰πüÂ¶ÇÊ≠§ÔºåÂõ†‰∏∫ÂÆÉÂØπÊâÄÂ≠òÂÇ®ÁöÑÊñáÊ°£ÁªìÊûÑÊ≤°ÊúâÈôêÂà∂„ÄÇÂú®ÂàóÊóèÊï∞ÊçÆÂ∫ì‰∏≠Ôºå‰ªªÊÑèÂàóÈáåÈù¢ÈÉΩÂèØ‰ª•ÈöèÊÑèÂ≠òÊîæÊï∞ÊçÆ„ÄÇ‰Ω†ÂèØ‰ª•Âú®<code>ÂõæÊï∞ÊçÆÂ∫ì</code>‰∏≠Êñ∞Â¢ûËæπÔºå‰πüÂèØ‰ª•ÈöèÊÑèÂêëËäÇÁÇπÂíåËæπ‰∏≠Ê∑ªÂä†Â±ûÊÄß„ÄÇ</p>
<h3 id="mongodb‰∏âË¶ÅÁ¥†">MongoDB‰∏âË¶ÅÁ¥†</h3>
<p><strong>MongoDB‰∏âË¶ÅÁ¥†‰∏é‰º†ÁªüÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÊ¶ÇÂøµÁ±ªÊØî</strong></p>
<table>
<thead>
<tr>
<th>‰º†ÁªüÊï∞ÊçÆÂ∫ì</th>
<th>MongDB</th>
<th>Ëß£ÈáäËØ¥Êòé</th>
</tr>
</thead>
<tbody>
<tr>
<td>database</td>
<td>database</td>
<td>Êï∞ÊçÆÂ∫ì</td>
</tr>
<tr>
<td>table</td>
<td>collection</td>
<td>Êï∞ÊçÆÂ∫ìË°®/ÈõÜÂêà</td>
</tr>
<tr>
<td>row</td>
<td>document</td>
<td>Êï∞ÊçÆËÆ∞ÂΩïË°å/ÊñáÊ°£</td>
</tr>
<tr>
<td>column</td>
<td>field</td>
<td>Êï∞ÊçÆÂ≠óÊÆµ/Âüü</td>
</tr>
<tr>
<td>index</td>
<td>index</td>
<td>Á¥¢Âºï</td>
</tr>
<tr>
<td>table joins</td>
<td></td>
<td>Ë°®ËøûÊé•ÔºåMongoDB‰∏çÊîØÊåÅ</td>
</tr>
<tr>
<td>primary key</td>
<td>primary key</td>
<td>‰∏ªÈîÆÔºåMongoDBËá™Âä®Â∞Ü_idÂ≠óÊÆµËÆæÁΩÆ‰∏∫‰∏ªÈîÆ</td>
</tr>
</tbody>
</table>
<p><strong>‰º†ÁªüÊï∞ÊçÆÂ∫ìÁöÑrow‰∏émongoDBÁöÑdocumentÂØπÊØî</strong></p>
<p>rowÔºöÊØè‰∏ÄË°åÈÉΩÊòØ‰∏ÄÊ†∑ÁöÑÂ≠óÊÆµÔºå‰∏çÂèØÊ∑ªÂä†‰∏çÂèØÂáèÂ∞ëÔºå‰πüÂ∞±ËØ¥<span style="color:red">fieldsÁöÑ‰∏™Êï∞Âú®ÂÆö‰πâtableÁöÑÊó∂ÂÄôÂ∞±Â∑≤ÁªèÂ£∞ÊòéÂÆåÊàêÁöÑ</span></p>
<p>documentÔºö ÂÆÉÁöÑÊØè‰∏Ä‰∏™documentÈÉΩÊòØÁã¨Á´ãÁöÑÔºåÂêåÊó∂‰πü<span style="color:red">‰∏çÊòØÂú®ÂàõÂª∫collectionÁöÑÊó∂ÂÄôÁªèÂ£∞ÊòéÂÆåÊàêÁöÑ</span></p>
<h3 id="mongodbÁöÑÊï∞ÊçÆÁ±ªÂûã">MongoDBÁöÑÊï∞ÊçÆÁ±ªÂûã</h3>
<table>
<thead>
<tr>
<th>Êï∞ÊçÆÁ±ªÂûã</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td>String</td>
<td>Â≠óÁ¨¶‰∏≤Ôºå‰ªÖUTF-8ÁºñÁ†ÅÂêàÊ≥ï</td>
</tr>
<tr>
<td>Integer</td>
<td>Êï¥ÂûãÊï∞ÂÄºÔºåÊ†πÊçÆÊúçÂä°Âô®‰∏çÂêåÔºåÂèØÂàÜ‰∏∫32‰ΩçÊàñ64‰Ωç</td>
</tr>
<tr>
<td>Boolean</td>
<td>Â∏ÉÂ∞îÂÄº</td>
</tr>
<tr>
<td>Double</td>
<td>ÂèåÁ≤æÂ∫¶ÊµÆÁÇπÊï∞</td>
</tr>
<tr>
<td>Array</td>
<td>Áî®‰∫éÂ∞ÜÊï∞ÁªÑÊàñÂàóË°®ÊàñÂ§ö‰∏™ÂÄºÂ≠òÂÇ®‰∏∫‰∏Ä‰∏™ÈîÆ</td>
</tr>
<tr>
<td>Timestamp</td>
<td>Êó∂Èó¥Êà≥</td>
</tr>
<tr>
<td>Object</td>
<td>Áî®‰∫éÂÜÖÂµåÊñáÊ°£</td>
</tr>
<tr>
<td>Null</td>
<td>Áî®‰∫éÂàõÂª∫Á©∫ÊñáÊ°£</td>
</tr>
<tr>
<td>Symbol</td>
<td>Á¨¶Âè∑„ÄÇËØ•Êï∞ÊçÆÁ±ªÂûãÂü∫Êú¨‰∏äÁ≠âÂêå‰∫éÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºå‰ΩÜ‰∏çÂêåÁöÑÊòØÔºåÂÆÉ‰∏ÄËà¨Áî®‰∫é‰ΩøÁî®‰∫ÜÁâπÊÆäÁ¨¶Âè∑Á±ªÂûãÁöÑËØ≠Ë®Ä</td>
</tr>
<tr>
<td>Date</td>
<td>Êó•ÊúüÊó∂Èó¥„ÄÇÁî®UNIXÊó∂Èó¥Ê†ºÂºèÊù•Â≠òÂÇ®Êó•Êúü</td>
</tr>
</tbody>
</table>
<h2 id="‰∏âÁî®Êà∑ÊùÉÈôê">‰∏â„ÄÅÁî®Êà∑ÊùÉÈôê</h2>
<p>‚Äã	Mongodb‰Ωú‰∏∫Êó∂‰∏ãÊúÄ‰∏∫ÁÉ≠Èó®ÁöÑÊï∞ÊçÆÂ∫ìÔºåÈÇ£‰πàÂÖ∂ÂÆâÂÖ®È™åËØÅ‰πüÊòØÂøÖ‰∏çÂèØÂ∞ëÁöÑÔºåÂê¶Âàô‰∏Ä‰∏™Ê≤°ÊúâÈ™åËØÅÁöÑÊï∞ÊçÆÂ∫ìÊö¥Èú≤Âá∫ÂéªÔºå‰ªª‰Ωï‰∫∫ÂèØÈöèÊÑèÊìç‰ΩúÔºåËøôÂ∞ÜÊòØÈùûÂ∏∏Âç±Èô©ÁöÑ„ÄÇÊàë‰ª¨ÂèØ‰ª•ÈÄöËøá‰ΩøÁî®‰∏∫MongoDBÂàõÂª∫Áî®Êà∑ÁöÑÊñπÂºèÊù•Èôç‰ΩéÈ£éÈô©„ÄÇ</p>
<table>
<thead>
<tr>
<th style="text-align:left">ÊùÉÈôêÂêç</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">read</td>
<td>ÂÖÅËÆ∏Áî®Êà∑ËØªÂèñÊåáÂÆöÊï∞ÊçÆÂ∫ì</td>
</tr>
<tr>
<td style="text-align:left">readWrite</td>
<td>ÂÖÅËÆ∏Áî®Êà∑ËØªÂÜôÊåáÂÆöÊï∞ÊçÆÂ∫ì</td>
</tr>
<tr>
<td style="text-align:left">dbAdmin</td>
<td>ÂÖÅËÆ∏Áî®Êà∑Âú®ÊåáÂÆöÊï∞ÊçÆÂ∫ì‰∏≠ÊâßË°åÁÆ°ÁêÜÂáΩÊï∞ÔºåÂ¶ÇÁ¥¢ÂºïÂàõÂª∫„ÄÅÂà†Èô§ÔºåÊü•ÁúãÁªüËÆ°ÊàñËÆøÈóÆsystem.profile</td>
</tr>
<tr>
<td style="text-align:left">userAdmin</td>
<td>ÂÖÅËÆ∏Áî®Êà∑Âêësystem.usersÈõÜÂêàÂÜôÂÖ•ÔºåÂèØ‰ª•Âú®ÊåáÂÆöÊï∞ÊçÆÂ∫ìÈáåÂàõÂª∫„ÄÅÂà†Èô§ÂíåÁÆ°ÁêÜÁî®Êà∑</td>
</tr>
<tr>
<td style="text-align:left">clusterAdmin</td>
<td>Âè™Âú®adminÊï∞ÊçÆÂ∫ì‰∏≠ÂèØÁî®ÔºåËµã‰∫àÁî®Êà∑ÊâÄÊúâÂàÜÁâáÂíåÂ§çÂà∂ÈõÜÁõ∏ÂÖ≥ÂáΩÊï∞ÁöÑÁÆ°ÁêÜÊùÉÈôê</td>
</tr>
<tr>
<td style="text-align:left">readAnyDatabase</td>
<td>Âè™Âú®adminÊï∞ÊçÆÂ∫ì‰∏≠ÂèØÁî®ÔºåËµã‰∫àÁî®Êà∑ÊâÄÊúâÊï∞ÊçÆÂ∫ìÁöÑËØªÊùÉÈôêÔºåÈô§Á≥ªÁªüÂ∫ìÁöÑÈõÜÂêà</td>
</tr>
<tr>
<td style="text-align:left">readWriteAnyDatabase</td>
<td>Âè™Âú®adminÊï∞ÊçÆÂ∫ì‰∏≠ÂèØÁî®ÔºåËµã‰∫àÁî®Êà∑ÊâÄÊúâÊï∞ÊçÆÂ∫ìÁöÑËØªÂÜôÊùÉÈôêÔºåÈô§Á≥ªÁªüÂ∫ìÁöÑÈõÜÂêà</td>
</tr>
<tr>
<td style="text-align:left">userAdminAnyDatabase</td>
<td>Âè™Âú®adminÊï∞ÊçÆÂ∫ì‰∏≠ÂèØÁî®ÔºåËµã‰∫àÁî®Êà∑ÊâÄÊúâÊï∞ÊçÆÂ∫ìÁöÑuserAdminÊùÉÈôêÔºåÈô§Á≥ªÁªüÂ∫ìÁöÑÈõÜÂêà</td>
</tr>
<tr>
<td style="text-align:left">dbAdminAnyDatabase</td>
<td>Âè™Âú®adminÊï∞ÊçÆÂ∫ì‰∏≠ÂèØÁî®ÔºåËµã‰∫àÁî®Êà∑ÊâÄÊúâÊï∞ÊçÆÂ∫ìÁöÑdbAdminÊùÉÈôêÔºåÈô§Á≥ªÁªüÂ∫ìÁöÑÈõÜÂêà</td>
</tr>
<tr>
<td style="text-align:left">root</td>
<td>Âè™Âú®adminÊï∞ÊçÆÂ∫ì‰∏≠ÂèØÁî®„ÄÇË∂ÖÁ∫ßË¥¶Âè∑ÔºåË∂ÖÁ∫ßÊùÉÈôê</td>
</tr>
</tbody>
</table>
<h3 id="ÂàõÂª∫Áî®Êà∑">ÂàõÂª∫Áî®Êà∑</h3>
<p>ÂâçÁΩÆÊù°‰ª∂ÔºöÂú®adminÂ∫ì‰∏ãÊìç‰Ωú„ÄÇÂ¶ÇÊûúÈÖçÁΩÆ<code>auth=true</code>ÂêØÂä®ÂèÇÊï∞ÂàôÈúÄË¶ÅÊúâÊùÉÈôêÁöÑÁî®Êà∑Êìç‰ΩúÔºåÂê¶ÂàôÂÖà‰∏çÈÖçÁΩÆÊ≠§ÂèÇÊï∞ÔºåÂàõÂª∫ÂÆåÁî®Êà∑‰πãÂêéÂºÄÂêØÊ≠§ÂèÇÊï∞ÔºåÂπ∂ÈáçÂêØÊúçÂä°„ÄÇ</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">ËØ≠Ê≥ïÔºö
db.createUser({ 
    user: &#34;&lt;name&gt;&#34;,
    pwd: &#34;&lt;cleartext password&gt;&#34;,
    customData: { &lt;any Object Data&gt; },
    roles: [
        { role: &#34;&lt;role&gt;&#34;, db: &#34;&lt;database&gt;&#34; },
        ...
    ]
});
</code></pre><ul>
<li>
<p>userÔºöÊñ∞Âª∫Áî®Êà∑Âêç</p>
</li>
<li>
<p>pwdÔºöÊñ∞Âª∫Áî®Êà∑ÂØÜÁ†Å</p>
</li>
<li>
<p>customDataÔºöÂ≠òÊîæ‰∏Ä‰∫õÁî®Êà∑Áõ∏ÂÖ≥ÁöÑËá™ÂÆö‰πâÊï∞ÊçÆÔºåËØ•Â±ûÊÄß‰πüÂèØÂøΩÁï•</p>
</li>
<li>
<p>rolesÔºöÊï∞ÁªÑÁ±ªÂûãÔºåÈÖçÁΩÆÁî®Êà∑ÁöÑÊùÉÈôê</p>
</li>
</ul>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.createUser({user:&#39;root&#39;,pwd:&#39;root&#39;,roles:[{role:&#39;root&#39;,db:&#39;admin&#39;}]})
</code></pre><blockquote>
<p>ÂàõÂª∫Áî®Êà∑ÂÆåÊàê‰πãÂêéÔºåÈÖçÁΩÆ<code>auth=true</code>ÂêØÂä®ÂèÇÊï∞</p>
</blockquote>
<h3 id="ÁôªÈôÜÁî®Êà∑">ÁôªÈôÜÁî®Êà∑</h3>
<p>ÂâçÁΩÆÊù°‰ª∂ÔºöÂú®adminÂ∫ì‰∏ãÊìç‰Ωú</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">ËØ≠Ê≥ïÔºö
db.auth(&#39;&lt;username&gt;&#39;, &#39;&lt;password&gt;&#39;);

Á§∫‰æãÔºö
db.auth(&#39;root&#39;,&#39;root&#39;);
</code></pre><h3 id="Êü•ÁúãÁî®Êà∑‰ø°ÊÅØ">Êü•ÁúãÁî®Êà∑‰ø°ÊÅØ</h3>
<p>ÂâçÁΩÆÊù°‰ª∂ÔºöÂú®adminÂ∫ì‰∏ãÊìç‰Ωú</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">show users
db.system.users.find()
</code></pre><h3 id="Êõ¥Êñ∞Áî®Êà∑">Êõ¥Êñ∞Áî®Êà∑</h3>
<p>ÂâçÁΩÆÊù°‰ª∂ÔºöÂú®adminÂ∫ì‰∏ãÊìç‰Ωú</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">ËØ≠Ê≥ïÔºö
db.updateUser(&#39;&lt;username&gt;&#39;, {&lt;Êñ∞ÁöÑÁî®Êà∑Êï∞ÊçÆÂØπË±°&gt;});

Á§∫‰æãÔºö
db.updateUser(&#39;root&#39;, {&#39;pwd&#39;:&#39;123456&#39;, &#39;roles&#39;:[{&#39;role&#39;:&#39;root&#39;, &#39;db&#39;:&#39;admin&#39;}]});
</code></pre><h3 id="‰øÆÊîπÁî®Êà∑ÂØÜÁ†ÅÂáΩÊï∞">‰øÆÊîπÁî®Êà∑ÂØÜÁ†ÅÂáΩÊï∞</h3>
<p>ËôΩÁÑ∂Êõ¥Êñ∞Áî®Êà∑ÂáΩÊï∞‰πüÂèØ‰ª•‰øÆÊîπÁî®Êà∑ÂØÜÁ†ÅÔºåMongoDB‰πüÊèê‰æõ‰∫ÜÁã¨Á´ã‰øÆÊîπÂØÜÁ†ÅÁöÑÂáΩÊï∞</p>
<p>ÂâçÁΩÆÊù°‰ª∂ÔºöÂú®adminÂ∫ì‰∏ãÊìç‰Ωú</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">ËØ≠Ê≥ïÔºö
db.changeUserPassword(&#34;&lt;newUserName&gt;&#34;,&#34;&lt;newPassword&gt;&#34;)

Á§∫‰æãÔºö
db.changeUserPassword(&#39;root&#39;, &#39;123456&#39;);
</code></pre><h3 id="Âà†Èô§Áî®Êà∑">Âà†Èô§Áî®Êà∑</h3>
<p>ÂâçÁΩÆÊù°‰ª∂ÔºöÂú®adminÂ∫ì‰∏ãÊìç‰Ωú</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">ËØ≠Ê≥ïÔºö
db.dropUser(&#39;&lt;userName&gt;&#39;)

Á§∫‰æãÔºö
db.dropUser(&#39;root&#39;);
</code></pre><h2 id="ÂõõdatabaseÊìç‰Ωú">Âõõ„ÄÅDatabaseÊìç‰Ωú</h2>
<p><strong>ÂàõÂª∫Êï∞ÊçÆÂ∫ì</strong></p>
<p>Âú®MongoDB‰∏≠ÂàõÂª∫Êï∞ÊçÆÂ∫ìÁöÑÂëΩ‰ª§‰ΩøÁî®ÁöÑÊòØuseÂëΩ‰ª§„ÄÇËØ•ÂëΩ‰ª§Êúâ‰∏§Â±ÇÂê´‰πâÔºö</p>
<ol>
<li>ÂàáÊç¢Âà∞ÊåáÂÆöÊï∞ÊçÆÂ∫ì</li>
<li>Â¶ÇÊûúÂàáÊç¢ÁöÑÊï∞ÊçÆÂ∫ì‰∏çÂ≠òÂú®ÔºåÂàôÂàõÂª∫ËØ•Êï∞ÊçÆÂ∫ì</li>
</ol>
<p>Â¶ÇÊûúÂè™ÂàõÂª∫Êï∞ÊçÆÂ∫ìÊú™Âú®Êï∞ÊçÆÂ∫ì‰∏≠ÂàõÂª∫ÈõÜÂêàÔºåÂàôÊ≠§ÂàõÂª∫‰∏∫ÈÄªËæëÂàõÂª∫ÔºåÂú®ÂÜÖÂ≠ò‰∏≠Ôºå‰ΩÜÂπ∂Êú™Âú®ÁîüÊàêÂØπÂ∫îÁõÆÂΩï„ÄÇ‰ΩøÁî®Êü•ÁúãÊï∞ÊçÆÂ∫ìÂëΩ‰ª§ÊòØÊâ´ÊèèÁ£ÅÁõòÁõÆÂΩïÔºåÊâÄ‰ª•Êó†Ê≥ïÁúãÂà∞</p>
<p><strong>Êü•ÁúãÊï∞ÊçÆÂ∫ì</strong></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">show dbs
show databases
</code></pre><p><strong>Âà†Èô§Êï∞ÊçÆÂ∫ì</strong></p>
<p>Âú®MongoDB‰∏≠‰ΩøÁî®<code>db.dropDatabase()</code>ÂáΩÊï∞Êù•Âà†Èô§Êï∞ÊçÆÂ∫ì„ÄÇÂú®Âà†Èô§Êï∞ÊçÆÂ∫ì‰πãÂâçÔºåÈúÄË¶ÅÂàáÊç¢Âà∞ÈúÄË¶ÅÂà†Èô§ÁöÑÊï∞ÊçÆÂ∫ìÔºåÊâßË°åÂç≥ÂèØ</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
use test;
db.dropDatabase();
</code></pre><h2 id="‰∫îcollectionÊìç‰Ωú">‰∫î„ÄÅCollectionÊìç‰Ωú</h2>
<p>MongoDB‰∏≠ÁöÑÈõÜÂêàÊòØ‰∏ÄÁªÑÊñáÊ°£ÁöÑÈõÜÔºåÁõ∏ÂΩì‰∫éÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°®</p>
<p><strong>ÂàõÂª∫ÈõÜÂêà</strong></p>
<blockquote>
<p>Âú®MongoDB‰∏≠ÔºåÊàë‰ª¨‰πüÂèØ‰ª•‰∏çÁî®ÂàõÂª∫ÈõÜÂêàÔºåÂΩìÊàë‰ª¨ÊèíÂÖ•‰∏Ä‰∫õÊï∞ÊçÆÊó∂Ôºå‰ºöËá™Âä®ÂàõÂª∫ÈõÜÂêà</p>
</blockquote>
<p>ËØ≠Ê≥ïÊ†ºÂºèÔºö<code>db.createCollection(&lt;collectionName&gt;, &lt;options&gt;)</code></p>
<p>optionsÂèØ‰ª•ÊòØÂ¶Ç‰∏ãÂèÇÊï∞</p>
<table>
<thead>
<tr>
<th>Â≠óÊÆµ</th>
<th>Á±ªÂûã</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td>capped</td>
<td>Â∏ÉÂ∞î</td>
<td>ÔºàÂèØÈÄâÔºâÔºåÂ¶ÇÊûú‰∏∫ trueÔºåÂàôÂàõÂª∫Âõ∫ÂÆöÈõÜÂêàÔºå‰∏îÂøÖÈ°ªÊåáÂÆö size ÂèÇÊï∞<br/>Âõ∫ÂÆöÈõÜÂêàÊòØÊåáÂΩìËææÂà∞ÊúÄÂ§ßÂÄºÊó∂ÔºåÂÆÉ‰ºöËá™Âä®Ë¶ÜÁõñÊúÄÊó©ÁöÑÊñáÊ°£</td>
</tr>
<tr>
<td>size</td>
<td>Êï∞ÂÄº</td>
<td>ÔºàÂèØÈÄâÔºâ‰∏∫Âõ∫ÂÆöÈõÜÂêàÊåáÂÆö‰∏Ä‰∏™ÊúÄÂ§ßÂÄºÔºà‰ª•Â≠óËäÇËÆ°Ôºâ„ÄÇ  Â¶ÇÊûú capped ‰∏∫ trueÔºå‰πüÈúÄË¶ÅÊåáÂÆöËØ•Â≠óÊÆµ„ÄÇ</td>
</tr>
<tr>
<td>max</td>
<td>Êï∞ÂÄº</td>
<td>ÔºàÂèØÈÄâÔºâÊåáÂÆöÂõ∫ÂÆöÈõÜÂêà‰∏≠ÂåÖÂê´ÊñáÊ°£ÁöÑÊúÄÂ§ßÊï∞Èáè„ÄÇ</td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.createCollection(&#39;testCollection&#39;);
db.createCollection(&#39;testCollection&#39;, {&#39;capped&#39;:true, &#39;size&#39;:2000000, &#39;max&#39;:1000});
</code></pre><p><strong>Êü•ÁúãÈõÜÂêà</strong></p>
<p>Â¶ÇÊûúË¶ÅÊü•ÁúãÂ∑≤ÊúâÈõÜÂêàÔºåÂèØ‰ª•‰ΩøÁî®<code>show collections</code>Êàñ<code>show tables</code>ÂëΩ‰ª§</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">show collections;
show tables;
</code></pre><p><strong>Êü•ÁúãÈõÜÂêàËØ¶ÊÉÖ</strong></p>
<p>Â¶ÇÊûúË¶ÅÊü•ÁúãÂ∑≤ÊúâÈõÜÂêàÁöÑËØ¶ÊÉÖÔºåÂèØ‰ª•‰ΩøÁî®<code>db.&lt;collectionName&gt;.stats()</code>ÂëΩ‰ª§</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.testCollection.stats();
</code></pre><p><strong>Âà†Èô§ÈõÜÂêà</strong></p>
<p>ÈúÄË¶ÅÂÖàÂàáÊç¢Âà∞ÈúÄË¶ÅÂà†Èô§ÈõÜÂêàÊâÄÂú®ÁöÑÊï∞ÊçÆÂ∫ìÔºå‰ΩøÁî®<code>db.&lt;collectionName&gt;.drop()</code>ÂáΩÊï∞Âà†Èô§ÈõÜÂêàÂç≥ÂèØ</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.testCollection.drop();
</code></pre><h2 id="ÂÖ≠document-Êìç‰Ωú">ÂÖ≠„ÄÅDocument Êìç‰Ωú</h2>
<p>Âú®MongoDB‰∏≠ÊñáÊ°£ÊòØÊåáÂ§ö‰∏™ÈîÆÂèäÂÖ∂ÂÖ≥ËÅîÁöÑÂÄºÊúâÂ∫èÂú∞ÊîæÁΩÆÂú®‰∏ÄËµ∑Â∞±ÊòØÊñáÊ°£ÔºåÂÖ∂ÂÆûÊåáÁöÑÂ∞±ÊòØÊï∞ÊçÆ„ÄÇMongoDB‰∏≠ÁöÑÊñáÊ°£ÁöÑÊï∞ÊçÆÁªìÊûÑÂíåJSONÂü∫Êú¨‰∏ÄÊ†∑„ÄÇÊâÄÊúâÂ≠òÂÇ®Âú®ÈõÜÂêà‰∏≠ÁöÑÊï∞ÊçÆÈÉΩÊòØBSONÊ†ºÂºè„ÄÇBSONÊòØ‰∏ÄÁßçÁ±ª‰ººJSONÁöÑ‰∫åËøõÂà∂ÂΩ¢ÂºèÁöÑÂ≠òÂÇ®Ê†ºÂºèÔºåÊòØBinary JSONÁöÑÁÆÄÁß∞„ÄÇ</p>
<h3 id="Êñ∞Â¢ûÊñáÊ°£">Êñ∞Â¢ûÊñáÊ°£</h3>
<p><strong>Êñ∞Â¢ûÂçï‰∏ÄÊñáÊ°£</strong></p>
<ul>
<li>
<p><code>insert</code>ÂáΩÊï∞</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.insert(document)</code></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.insert({name: &#39;Âº†‰∏â&#39;, nickName: &#39;Tom&#39;, &#39;age&#39;: 18, course: [&#39;java&#39;, &#39;spring&#39;]});
</code></pre></li>
<li>
<p><code>save</code>ÂáΩÊï∞</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.save(document)</code></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.save({name: &#39;ÊùéÂõõ&#39;, nickName: &#39;Jack&#39;, &#39;age&#39;: 18, course: [&#39;html&#39;, &#39;js&#39;]});
</code></pre></li>
<li>
<p><code>insertOne</code>ÂáΩÊï∞</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.insertOne(document)</code></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.insertOne({name: &#39;Áéã‰∫î&#39;, nickName: &#39;King&#39;, &#39;age&#39;: 20, course: [&#39;java&#39;, &#39;js&#39;]});
</code></pre></li>
</ul>
<p><strong>ÊâπÈáèÊñ∞Â¢ûÊñáÊ°£</strong></p>
<ul>
<li>
<p><code>insert</code>ÂáΩÊï∞</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.insert(documents)</code></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.insert([
{name: &#39;Âº†‰∏â&#39;, nickName: &#39;Tom&#39;, &#39;age&#39;: 18, course: [&#39;java&#39;, &#39;spring&#39;]},
{name: &#39;ÊùéÂõõ&#39;, nickName: &#39;Jack&#39;, &#39;age&#39;: 18, course: [&#39;html&#39;, &#39;js&#39;]},
{name: &#39;Áéã‰∫î&#39;, nickName: &#39;King&#39;, &#39;age&#39;: 20, course: [&#39;java&#39;, &#39;js&#39;]}
]);
</code></pre></li>
<li>
<p><code>save</code>ÂáΩÊï∞</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.save(documents)</code></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.save([
{name: &#39;Âº†‰∏â&#39;, nickName: &#39;Tom&#39;, &#39;age&#39;: 18, course: [&#39;java&#39;, &#39;spring&#39;]},
{name: &#39;ÊùéÂõõ&#39;, nickName: &#39;Jack&#39;, &#39;age&#39;: 18, course: [&#39;html&#39;, &#39;js&#39;]},
{name: &#39;Áéã‰∫î&#39;, nickName: &#39;King&#39;, &#39;age&#39;: 20, course: [&#39;java&#39;, &#39;js&#39;]}
]);
</code></pre></li>
<li>
<p><code>insertMany</code>ÂáΩÊï∞</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.save(documents)</code></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.insertMany([
{name: &#39;Âº†‰∏â&#39;, nickName: &#39;Tom&#39;, &#39;age&#39;: 18, course: [&#39;java&#39;, &#39;spring&#39;]},
{name: &#39;ÊùéÂõõ&#39;, nickName: &#39;Jack&#39;, &#39;age&#39;: 18, course: [&#39;html&#39;, &#39;js&#39;]},
{name: &#39;Áéã‰∫î&#39;, nickName: &#39;King&#39;, &#39;age&#39;: 20, course: [&#39;java&#39;, &#39;js&#39;]}
]);
</code></pre></li>
</ul>
<h3 id="Êü•ËØ¢ÊñáÊ°£">Êü•ËØ¢ÊñáÊ°£</h3>
<h4 id="Âü∫Á°ÄÂ∫îÁî®">Âü∫Á°ÄÂ∫îÁî®</h4>
<ul>
<li>
<p><code>findOne</code>ÂáΩÊï∞Áî®‰∫éÊü•ËØ¢ÈõÜÂêà‰∏≠ÁöÑ‰∏Ä‰∏™ÊñáÊ°£</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.findOne({&lt;query&gt;}, {&lt;projection&gt;});</code></p>
<ol>
<li>queryÔºöÂèØÈÄâÔºå‰ª£Ë°®Êü•ËØ¢Êù°‰ª∂„ÄÇ</li>
<li>projectionÔºöÂèØÈÄâÔºå‰ª£Ë°®Êü•ËØ¢ÁªìÊûúÁöÑÊäïÂΩ±Â≠óÊÆµÂêç„ÄÇÂç≥Êü•ËØ¢ÁªìÊûúÈúÄË¶ÅËøîÂõûÂì™‰∫õÂ≠óÊÆµÊàñ‰∏çÈúÄË¶ÅËøîÂõûÂì™‰∫õÂ≠óÊÆµ„ÄÇ</li>
</ol>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.findOne();
db.user.findOne({name: &#39;Âº†‰∏â&#39;});
db.user.findOne({name: &#39;Âº†‰∏â&#39;}, {name: 1, age: 1, _id: 0});
</code></pre><blockquote>
<p>ÊäïÂΩ±Êó∂</p>
<p><code>_id</code>‰∏∫1ÁöÑÊó∂ÂÄôÔºåÂÖ∂‰ªñÂ≠óÊÆµÂøÖÈ°ªÊòØ1</p>
<p><code>_id</code>ÊòØ0ÁöÑÊó∂ÂÄôÔºåÂÖ∂‰ªñÂ≠óÊÆµÂèØ‰ª•ÊòØ0</p>
<p>Â¶ÇÊûúÊ≤°Êúâ<code>_id</code>Â≠óÊÆµÁ∫¶ÊùüÔºåÂ§ö‰∏™ÂÖ∂‰ªñÂ≠óÊÆµÂøÖÈ°ªÂêå‰∏∫0ÊàñÂêå‰∏∫1</p>
</blockquote>
</li>
<li>
<p>findÂáΩÊï∞Áî®‰∫éÊü•ËØ¢ÈõÜÂêà‰∏≠ÁöÑËã•Âπ≤ÊñáÊ°£</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.find({&lt;query&gt;}, {&lt;projection&gt;});</code></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.find();
db.user.find({name: &#39;Âº†‰∏â&#39;});
db.user.find({name: &#39;Âº†‰∏â&#39;}, {name: 1, age: 1, _id: 0});
</code></pre></li>
</ul>
<h4 id="ÂçïÊù°‰ª∂ÈÄªËæëËøêÁÆóÁ¨¶">ÂçïÊù°‰ª∂ÈÄªËæëËøêÁÆóÁ¨¶</h4>
<table>
<thead>
<tr>
<th>Êìç‰Ωú</th>
<th>Ê†ºÂºè</th>
<th>ËåÉ‰æã</th>
<th>Á±ª‰ººDBMËØ≠Âè•</th>
</tr>
</thead>
<tbody>
<tr>
<td>Á≠â‰∫é</td>
<td><code>{&lt;key&gt;:&lt;value&gt;</code>}Êàñ<br /><code>{&lt;key&gt;:{$eq:&lt;value&gt;}}</code></td>
<td>db.col.find({name: &ldquo;Âº†‰∏â&rdquo;})</td>
<td>where name = &lsquo;Âº†‰∏â&rsquo;</td>
</tr>
<tr>
<td>Â∞è‰∫é</td>
<td><code>{&lt;key&gt;:{$lt:&lt;value&gt;}}</code></td>
<td>db.col.find({age: {$lt: 20}})</td>
<td>where age &lt; 20</td>
</tr>
<tr>
<td>Â∞è‰∫éÁ≠â‰∫é</td>
<td><code>{&lt;key&gt;:{$lte:&lt;value&gt;}}</code></td>
<td>db.col.find({age: {$lte: 20}})</td>
<td>where age &lt;= 20</td>
</tr>
<tr>
<td>Â§ß‰∫é</td>
<td><code>{&lt;key&gt;:{$gt:&lt;value&gt;}}</code></td>
<td>db.col.find({age: {$gt: 10}})</td>
<td>where age &gt; 10</td>
</tr>
<tr>
<td>Â§ß‰∫éÁ≠â‰∫é</td>
<td><code>{&lt;key&gt;:{$gte:&lt;value&gt;}}</code></td>
<td>db.col.find({age: {$gte: 10}})</td>
<td>where age &gt;= 10</td>
</tr>
<tr>
<td>‰∏çÁ≠â‰∫é</td>
<td><code>{&lt;key&gt;:{$ne:&lt;value&gt;}}</code></td>
<td>db.col.find({age: {$ne: 20}})</td>
<td>where age != 20</td>
</tr>
</tbody>
</table>
<h4 id="Â§öÊù°‰ª∂ÈÄªËæëËøêÁÆóÁ¨¶">Â§öÊù°‰ª∂ÈÄªËæëËøêÁÆóÁ¨¶</h4>
<p><strong>AndÊù°‰ª∂</strong></p>
<p>MongoDBÁöÑ<code>find()</code>Âíå<code>findOne()</code>ÂáΩÊï∞ÂèØ‰ª•‰º†ÂÖ•Â§ö‰∏™ÈîÆ(key)ÔºåÊØè‰∏™ÈîÆ(key)‰ª•ÈÄóÂè∑ÈöîÂºÄÔºåÂç≥Â∏∏ËßÑSQLÁöÑANDÊù°‰ª∂</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.find({name: &#39;Âº†‰∏â&#39;, age :18});
</code></pre><p><strong>OrÊù°‰ª∂</strong></p>
<p>MongoDBÁöÑORÊù°‰ª∂ËØ≠Âè•‰ΩøÁî®‰∫ÜÂÖ≥ÈîÆÂ≠ó<code>$or</code>ÔºåËØ≠Ê≥ïÊ†ºÂºèÂ¶Ç‰∏ã</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.find({$or: [{name: &#39;Âº†‰∏â&#39;}, {age :18}]});
</code></pre><h4 id="typeÊü•ËØ¢">$typeÊü•ËØ¢</h4>
<p>Âú®MongoDB‰∏≠Ê†πÊçÆÂ≠óÊÆµÁöÑÊï∞ÈáèÁ±ªÂûãÊù•Êü•ËØ¢Êï∞ÊçÆ‰ΩøÁî®<code>$type</code>Êìç‰ΩúÁ¨¶Êù•ÂÆûÁé∞</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.find({&lt;attr&gt;:{$type:&lt;typeNum/typeAlias&gt;}})</code></p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Number</th>
<th>Alias</th>
</tr>
</thead>
<tbody>
<tr>
<td>Double</td>
<td>1</td>
<td>‚Äúdouble‚Äù</td>
</tr>
<tr>
<td>String</td>
<td>2</td>
<td>‚Äústring‚Äù</td>
</tr>
<tr>
<td>Object</td>
<td>3</td>
<td>‚Äúobject‚Äù</td>
</tr>
<tr>
<td>Array</td>
<td>4</td>
<td>‚Äúarray‚Äù</td>
</tr>
<tr>
<td>Binary data</td>
<td>5</td>
<td>‚ÄúbinData‚Äù</td>
</tr>
<tr>
<td>ObjectId</td>
<td>7</td>
<td>‚ÄúobjectId‚Äù</td>
</tr>
<tr>
<td>Boolean</td>
<td>8</td>
<td>‚Äúbool‚Äù</td>
</tr>
<tr>
<td>Date</td>
<td>9</td>
<td>‚Äúdate‚Äù</td>
</tr>
<tr>
<td>Null</td>
<td>10</td>
<td>‚Äúnull‚Äù</td>
</tr>
<tr>
<td>Regular Expression</td>
<td>11</td>
<td>‚Äúregex‚Äù</td>
</tr>
<tr>
<td>JavaScript</td>
<td>13</td>
<td>‚Äújavascript‚Äù</td>
</tr>
<tr>
<td>JavaScript (with scope)</td>
<td>15</td>
<td>‚ÄújavascriptWithScope‚Äù</td>
</tr>
<tr>
<td>32-bit integer</td>
<td>16</td>
<td>‚Äúint‚Äù</td>
</tr>
<tr>
<td>Timestamp</td>
<td>17</td>
<td>‚Äútimestamp‚Äù</td>
</tr>
<tr>
<td>64-bit integer</td>
<td>18</td>
<td>‚Äúlong‚Äù</td>
</tr>
</tbody>
</table>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.find({name: {$type: &#39;string&#39;}});
db.user.find({name: {$type: 2}});
</code></pre><h4 id="Ê≠£ÂàôÊü•ËØ¢">Ê≠£ÂàôÊü•ËØ¢</h4>
<p>MongoDB‰∏≠Êü•ËØ¢Êù°‰ª∂‰πüÂèØ‰ª•‰ΩøÁî®Ê≠£ÂàôË°®ËææÂºè‰Ωú‰∏∫ÂåπÈÖçÁ∫¶Êùü</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.find({&lt;filedName&gt;:&lt;reg&gt;/&lt;option&gt;})</code></p>
<p>optionÁöÑÈÄâÈ°πÊúâ</p>
<ul>
<li>i Ôºö‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜô‰ª•ÂåπÈÖçÂ§ßÂ∞èÂÜôÁöÑÊÉÖÂÜµ</li>
<li>mÔºöÂØπ‰∫éÂåÖÂê´ÈîöÁÇπÁöÑÊ®°ÂºèÔºåÂ∞Ü<code>\n</code>ËßÜ‰ΩúÊØèË°åÔºåÊØèË°åÈÉΩËøõË°åÂåπÈÖç</li>
<li>xÔºöËÆæÁΩÆxÈÄâÈ°πÂêéÔºåÊ≠£ÂàôË°®ËææÂºè‰∏≠ÁöÑÈùûËΩ¨‰πâÁöÑÁ©∫ÁôΩÂ≠óÁ¨¶Â∞ÜË¢´ÂøΩÁï•</li>
<li>sÔºöÂÖÅËÆ∏ÁÇπÂ≠óÁ¨¶Ôºà.ÔºâÂåπÈÖçÂåÖÊã¨Êç¢Ë°åÁ¨¶Âú®ÂÜÖÁöÑÊâÄÊúâÂ≠óÁ¨¶</li>
</ul>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.find({name: /^Âº†/});
db.user.find({name: /‰∏â$/});
db.user.find({nickName: /t/i});
</code></pre><h4 id="ÂàÜÈ°µÊü•ËØ¢">ÂàÜÈ°µÊü•ËØ¢</h4>
<p>Âú®MongoDB‰∏≠ËØªÂèñÊåáÂÆöÊï∞ÈáèÁöÑÊï∞ÊçÆËÆ∞ÂΩïÔºåÂèØ‰ª•‰ΩøÁî®ÁöÑ<code>limit</code>ÊñπÊ≥ïÔºå<code>limit(&lt;num&gt;)</code>ÊñπÊ≥ïÊé•Âèó‰∏Ä‰∏™Êï∞Â≠óÂèÇÊï∞ÔºåËØ•ÂèÇÊï∞ÊåáÂÆöËØªÂèñÁöÑËÆ∞ÂΩïÊù°Êï∞</p>
<p>Âú®MongoDB‰∏≠‰ΩøÁî®<code>skip</code>ÊñπÊ≥ïÊù•Ë∑≥ËøáÊåáÂÆöÊï∞ÈáèÁöÑÊñáÊ°£Ôºå<code>skip(&lt;num&gt;)</code>ÊñπÊ≥ïÂêåÊ†∑Êé•Âèó‰∏Ä‰∏™Êï∞Â≠óÂèÇÊï∞‰Ωú‰∏∫Ë∑≥ËøáÁöÑÊñáÊ°£Êù°Êï∞</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.find().skip(5).limit(5);
</code></pre><h4 id="ÊéíÂ∫è">ÊéíÂ∫è</h4>
<p>Âú® MongoDB‰∏≠‰ΩøÁî®<code>sort</code>ÊñπÊ≥ïÂØπÊï∞ÊçÆËøõË°åÊéíÂ∫èÔºå<code>sort(&lt;param&gt;) </code>ÂèØ‰ª•ÈÄöËøáÂèÇÊï∞ÊåáÂÆöÊéíÂ∫èÁöÑÂ≠óÊÆµÔºåÂπ∂‰ΩøÁî®<code>1</code>Âíå<code>-1</code>Êù•ÊåáÂÆöÊéíÂ∫èÁöÑÊñπÂºèÔºåÂÖ∂‰∏≠<code>1</code>‰∏∫ÂçáÂ∫èÊéíÂàóÔºåËÄå <code>-1</code>ÊòØÁî®‰∫éÈôçÂ∫èÊéíÂàó„ÄÇ</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.find().sort({age:&#39;asc&#39;})
</code></pre><h3 id="Êõ¥Êñ∞ÊñáÊ°£">Êõ¥Êñ∞ÊñáÊ°£</h3>
<h4 id="saveÊõ¥Êñ∞ÊñáÊ°£">saveÊõ¥Êñ∞ÊñáÊ°£</h4>
<p>save()ÂáΩÊï∞ÁöÑ‰ΩúÁî®ÊòØ‰øùÂ≠òÊñáÊ°£ÔºåÂ¶ÇÊûúÊñáÊ°£Â≠òÂú®ÂàôË¶ÜÁõñÔºåÂ¶ÇÊûúÊñáÊ°£‰∏çÂ≠òÂú®ÂàôÊñ∞Â¢û„ÄÇ<span style="color:red">save()ÂáΩÊï∞ÂØπÊñáÊ°£ÊòØÂê¶Â≠òÂú®ÁöÑÂîØ‰∏ÄÂà§Êñ≠Ê†áÂáÜÊòØ<code>_id</code>Á≥ªÁªüÂîØ‰∏ÄÂ≠óÊÆµÊòØÂê¶ÂåπÈÖç„ÄÇÊâÄ‰ª•‰ΩøÁî®save()ÂáΩÊï∞ÂÆûÁé∞Êõ¥Êñ∞Êìç‰ΩúÔºåÂàôÂøÖÈ°ªÊèê‰æõ<code>_id</code>Â≠óÊÆµÊï∞ÊçÆ</span></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.save({name:&#34;ËµµÂÖ≠&#34;}); -- Êñ∞Â¢û
db.user.save({&#34;_id&#34; : ObjectId(&#34;6010c798fc86950278e5caac&#34;),name:&#34;ËµµÂÖ≠&#34;, age: 22}); --Êõ¥Êñ∞
</code></pre><h4 id="updateÊõ¥Êñ∞ÊñáÊ°£">updateÊõ¥Êñ∞ÊñáÊ°£</h4>
<p><code>update()</code>ÂáΩÊï∞Áî®‰∫éÊõ¥Êñ∞Â∑≤Â≠òÂú®ÁöÑÊñáÊ°£</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">ËØ≠Ê≥ïÔºö
db.&lt;collectionName&gt;.update(
    &lt;query&gt;,
    &lt;update&gt;,
    &lt;upsert:boolean&gt;,
    &lt;multi:boolean&gt;
)
</code></pre><ul>
<li>queryÔºöupdateÁöÑÊü•ËØ¢Êù°‰ª∂ÔºåÁ±ª‰ººsqlÁöÑupdateÊõ¥Êñ∞ËØ≠Ê≥ïÂÜÖwhereÂêéÈù¢ÁöÑÂÜÖÂÆπ</li>
<li>updateÔºöupdateÁöÑÂØπË±°Âíå‰∏Ä‰∫õÊõ¥Êñ∞ÁöÑÊìç‰ΩúÁ¨¶Á≠âÔºå‰πüÂèØ‰ª•ÁêÜËß£‰∏∫sql updateÊü•ËØ¢ÂÜÖsetÂêéÈù¢ÁöÑ</li>
<li>upsertÔºöÂèØÈÄâÔºåËøô‰∏™ÂèÇÊï∞ÁöÑÊÑèÊÄùÊòØÔºåÂ¶ÇÊûú‰∏çÂ≠òÂú®updateÁöÑËÆ∞ÂΩïÔºåÊòØÂê¶ÊèíÂÖ•Ëøô‰∏™documentÔºåtrue‰∏∫ÊèíÂÖ•ÔºåÈªòËÆ§ÊòØfalseÔºå‰∏çÊèíÂÖ•</li>
<li><span style="color:red">multiÔºöÂèØÈÄâÔºåmongodb ÈªòËÆ§ÊòØfalseÔºåÂè™Êõ¥Êñ∞ÊâæÂà∞ÁöÑÁ¨¨‰∏ÄÊù°ËÆ∞ÂΩïÔºåÂ¶ÇÊûúËøô‰∏™ÂèÇÊï∞‰∏∫trueÔºåÂ∞±ÊääÊåâÊù°‰ª∂Êü•Âá∫Êù•Â§öÊù°ËÆ∞ÂΩïÂÖ®ÈÉ®Êõ¥Êñ∞„ÄÇÂè™ÊúâÂú®Ë°®ËææÂºèÊõ¥Êñ∞ËØ≠Ê≥ï‰∏≠ÊâçÂèØ‰ΩøÁî®„ÄÇ</span></li>
</ul>
<p>Âú®MongoDB‰∏≠ÁöÑupdateÊòØÊúâ‰∏§ÁßçÊõ¥Êñ∞ÊñπÂºèÔºå‰∏ÄÁßçÊòØË¶ÜÁõñÊõ¥Êñ∞Ôºå‰∏ÄÁßçÊòØË°®ËææÂºèÊõ¥Êñ∞„ÄÇ</p>
<ul>
<li>Ë¶ÜÁõñÊõ¥Êñ∞ÔºöÈ°æÂêçÊÄù‰πâÔºåÂ∞±ÊòØÈÄöËøáÊüêÊù°‰ª∂ÔºåÂ∞ÜÊñ∞ÊñáÊ°£Ë¶ÜÁõñÂéüÊúâÊñáÊ°£</li>
<li>Ë°®ËææÂºèÊõ¥Êñ∞ÔºöËøôÁßçÊõ¥Êñ∞ÊñπÂºèÊòØÈÄöËøáË°®ËææÂºèÊù•ÂÆûÁé∞Â§çÊùÇÊõ¥Êñ∞Êìç‰ΩúÔºåÂ¶ÇÔºöÂ≠óÊÆµÊõ¥Êñ∞„ÄÅÊï∞ÂÄºËÆ°ÁÆó„ÄÅÊï∞ÁªÑÊìç‰Ωú„ÄÅÂ≠óÊÆµÂêç‰øÆÊîπÁ≠â</li>
</ul>
<h5 id="Ë¶ÜÁõñÊõ¥Êñ∞">Ë¶ÜÁõñÊõ¥Êñ∞</h5>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.update({name: &#39;Âº†‰∏â&#39;},{name: &#39;Âº†&#39;});
</code></pre><p>Â∞Ü‰ºöÁªôÁ¨¨‰∏ÄÊù°Á¨¶ÂêàÊ∑ªÂä†ÁöÑÊï∞ÊçÆË¶ÜÁõñÔºåÂõ†‰∏∫<code>multi</code>ÈÄâÈ°πÈªòËÆ§‰∏∫false</p>
<h5 id="Ë°®ËææÂºèÊõ¥Êñ∞">Ë°®ËææÂºèÊõ¥Êñ∞</h5>
<p><strong>$inc</strong></p>
<p>‰ΩúÁî®ÔºöÂØπ‰∏Ä‰∏™Êï∞Â≠óÂ≠óÊÆµÁöÑÊüê‰∏™fieldÂ¢ûÂä†value</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.update({name: &#39;Âº†‰∏â&#39;},{$inc: {age: 1}});
</code></pre><p><strong>$set</strong></p>
<p>‰ΩúÁî®ÔºöÊääÊñáÊ°£‰∏≠Êüê‰∏™Â≠óÊÆµfieldÁöÑÂÄºËÆæ‰∏∫valueÔºåÂ¶ÇÊûúfield‰∏çÂ≠òÂú®ÔºåÂàôÂ¢ûÂä†Êñ∞ÁöÑÂ≠óÊÆµÂπ∂ËµãÂÄº‰∏∫value</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.update({name: &#39;Âº†‰∏â&#39;},{$set: {age: 20}});
</code></pre><p><strong>$unset</strong></p>
<p>‰ΩúÁî®ÔºöÂà†Èô§Êüê‰∏™Â≠óÊÆµfield</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.update({name: &#39;Âº†‰∏â&#39;},{$unset: {age: null}});
</code></pre><p>unsetÊåáÂÆöÁöÑÂ≠óÊÆµÂêéÂèØ‰ª•Ë∑ü‰ªª‰ΩïÂÄºÔºåÂè™ÊòØËµ∑Âç†‰Ωç‰ΩúÁî®</p>
<p><strong>$push</strong></p>
<p><span style="color:red">‰ΩúÁî®ÔºöÊäävalueËøΩÂä†Âà∞fieldÈáå„ÄÇÊ≥®ÔºöfieldÂè™ËÉΩÊòØÊï∞ÁªÑÁ±ªÂûãÔºåÂ¶ÇÊûúfield‰∏çÂ≠òÂú®Ôºå‰ºöËá™Âä®ÊèíÂÖ•‰∏Ä‰∏™Êï∞ÁªÑÁ±ªÂûã</span></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.update({name: &#39;Âº†‰∏â&#39;},{$push: {course: &#39;vue&#39;}});
</code></pre><p><strong>$addToSet</strong></p>
<p>‰ΩúÁî®ÔºöÂä†‰∏Ä‰∏™ÂÄºÂà∞Êï∞ÁªÑÂÜÖÔºåËÄå‰∏îÂè™ÊúâÂΩìËøô‰∏™ÂÄºÂú®Êï∞ÁªÑ‰∏≠‰∏çÂ≠òÂú®Êó∂ÊâçÂ¢ûÂä†</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.update({name: &#39;Âº†‰∏â&#39;},{$addToSet: {course: &#39;vue&#39;}});
</code></pre><p><strong>$pop</strong></p>
<p>Âà†Èô§Êï∞ÁªÑÂÜÖÁ¨¨‰∏Ä‰∏™ÂÄº<code>{$pop:{&lt;field&gt;:-1}}</code>„ÄÅÂà†Èô§Êï∞ÁªÑÂÜÖÊúÄÂêé‰∏Ä‰∏™ÂÄº<code>{$pop:{&lt;field&gt;:1}}</code></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.update({name: &#39;Âº†‰∏â&#39;},{$pop: {course: -1}});
</code></pre><p><strong>$pull</strong></p>
<p>‰ªéÊï∞ÁªÑfieldÂÜÖÂà†Èô§ÊâÄÊúâÁ≠â‰∫éÊåáÂÆöÂÄºÁöÑÂÄº</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.update({name: &#39;Âº†‰∏â&#39;},{$pull: {course: &#39;vue&#39;}});
</code></pre><p><strong>$pullAll</strong></p>
<p>Áî®Ê≥ïÂêå<code>$pull</code>‰∏ÄÊ†∑ÔºåÂèØ‰ª•‰∏ÄÊ¨°ÊÄßÂà†Èô§Êï∞ÁªÑÂÜÖÁöÑÂ§ö‰∏™ÂÄº</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.update({name: &#39;Âº†‰∏â&#39;},{$pullAll: {course: [&#39;vue&#39;, &#39;java&#39;, &#39;spring&#39;]}});
</code></pre><p><strong>$rename</strong></p>
<p>‰ΩúÁî®ÔºöÂØπÂ≠óÊÆµËøõË°åÈáçÂëΩÂêç„ÄÇÂ∫ïÂ±ÇÂÆûÁé∞ÊòØÂÖàÂà†Èô§old_fieldÂ≠óÊÆµÔºåÂÜçÂàõÂª∫new_fieldÂ≠óÊÆµ</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.update({name: &#39;Âº†‰∏â&#39;},{$rename: {nickName: &#39;nick&#39;}});
</code></pre><h3 id="Âà†Èô§ÊñáÊ°£">Âà†Èô§ÊñáÊ°£</h3>
<p><strong>deleteOneÂáΩÊï∞</strong></p>
<p>‰ΩúÁî®ÔºöÂà†Èô§‰∏Ä‰∏™Êª°Ë∂≥Ê∑ªÂä†ÁöÑÊï∞ÊçÆ</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.deleteOne({&lt;query&gt;})</code></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">db.user.deleteOne({&#39;name&#39;:&#39;Âº†‰∏â&#39;});
</code></pre><p><strong>deleteManyÂáΩÊï∞</strong></p>
<p>‰ΩúÁî®ÔºöÂà†Èô§ÊâÄÊúâÊª°Ë∂≥Ê∑ªÂä†ÁöÑÊï∞ÊçÆ</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.deleteMany({&lt;query&gt;})</code></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">db.user.deleteMany({&#39;name&#39;:&#39;Âº†‰∏â&#39;});
</code></pre><blockquote>
<p>Âà†Èô§ÊñáÊ°£ËøòÊúâ‰∏Ä‰∏™removeÂáΩÊï∞Ôºå‰ΩÜÂ∑≤ËøáÊó∂ÔºåÂÆòÊñπÊé®ËçêÁî®deleteOne()ÂíådeleteMany()ÂáΩÊï∞Êù•ÂÆûÁé∞Âà†Èô§Êìç‰Ωú„ÄÇ‰∏îÂú®4.0ÁâàÊú¨‰∏≠ÔºåremoveÂáΩÊï∞Âπ∂‰∏ç‰ºöÁúüÊ≠£ÁöÑÈáäÊîæÂ≠òÂÇ®Á©∫Èó¥ÔºåÈúÄË¶Å‰ΩøÁî®db.repairDatabase()ÂáΩÊï∞Êù•ÈáäÊîæÂ≠òÂÇ®Á©∫Èó¥„ÄÇ</p>
</blockquote>
<h2 id="‰∏ÉÂÜÖÁΩÆÂáΩÊï∞">‰∏É„ÄÅÂÜÖÁΩÆÂáΩÊï∞</h2>
<h4 id="aggregateÂáΩÊï∞">aggregateÂáΩÊï∞</h4>
<p>MongoDB‰∏≠ËÅöÂêàÁöÑÊñπÊ≥ï‰ΩøÁî®aggregate</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.aggregate(&lt;agg_options&gt;)</code></p>
<p>agg_optionsÔºöÊï∞ÁªÑÁ±ªÂûãÂèÇÊï∞Ôºå‰º†ÂÖ•ÂÖ∑‰ΩìÁöÑËÅöÂêàË°®ËææÂºèÔºåÊ≠§ÂèÇÊï∞‰ª£Ë°®ËÅöÂêàËßÑÂàôÔºåÂ¶ÇËÆ°ÁÆóÊÄªÂíå„ÄÅÂπ≥ÂùáÂÄº„ÄÅÊúÄÂ§ßÊúÄÂ∞èÂÄºÁ≠â„ÄÇ</p>
<h4 id="Ê±ÇÂíåsum">Ê±ÇÂíå$sum</h4>
<p>ËØ≠Ê≥ïÔºö<code>db.collectionName.aggregate([{&quot;$group&quot;:{&quot;_id&quot;:&lt;field/null&gt;, &quot;&lt;aggeName&gt;&quot;:{&quot;$sum&quot;:&quot;$&lt;field&gt;&quot;}}}])</code></p>
<ul>
<li><code>$group</code>ÔºöÂàÜÁªÑÔºå‰ª£Ë°®ËÅöÂêàÁöÑÂàÜÁªÑÊù°‰ª∂</li>
<li><code>_id</code>ÔºöÂàÜÁªÑÁöÑÂ≠óÊÆµ„ÄÇÁõ∏ÂΩì‰∫éSQLÂàÜÁªÑËØ≠Ê≥ïgroup by column‰∏≠ÁöÑcolumnÈÉ®ÂàÜ„ÄÇÂ¶ÇÊûúÊ†πÊçÆÊüêÂ≠óÊÆµÁöÑÂÄºÂàÜÁªÑÔºåÂàôÂÆö‰πâ‰∏∫<code>_id:'$field'</code>„ÄÇÂ¶ÇÊûú‰∏çÈúÄË¶ÅÂàÜÁªÑÂàô‰∏∫<code>_id:null</code></li>
<li><code>$sum</code>ÔºöÊ±ÇÂíåË°®ËææÂºè„ÄÇÁõ∏ÂΩì‰∫éSQL‰∏≠ÁöÑ<code>sum</code>ÂáΩÊï∞</li>
<li><code>$&lt;filed&gt;</code>Ôºö‰ª£Ë°®ÊñáÊ°£‰∏≠ÁöÑÈúÄË¶ÅÊ±ÇÂíåÂ≠óÊÆµ</li>
</ul>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.aggregate([{$group:{_id: null, sum_age: {$sum: &#39;$age&#39;}}}]);     --‰∏çÂàÜÁªÑÊ±ÇÂíå
db.user.aggregate([{$group:{_id: &#39;$name&#39;, sum_age: {$sum: &#39;$age&#39;}}}]);  --‰ª•nameÂàÜÁªÑ‰πãÂêéÊ±ÇÂíå
</code></pre><h4 id="ÁªüËÆ°sum">ÁªüËÆ°$sum</h4>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.aggregate([{$group:{_id: null, count: {&#39;$sum&#39;: 1}}}]);     --‰∏çÂàÜÁªÑÁªüËÆ°ÊÄªÊï∞
db.user.aggregate([{$group:{_id: &#39;$name&#39;, count: {&#39;$sum&#39;: 1}}}]);  --‰ª•nameÂàÜÁªÑ‰πãÂêéÁªüËÆ°ÊÄªÊï∞
</code></pre><h4 id="ÊúÄÂ§ßÂÄºmax">ÊúÄÂ§ßÂÄº$max</h4>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.aggregate([{$group:{_id: null, count: {&#39;$max&#39;: &#39;$age&#39;}}}]);     --‰∏çÂàÜÁªÑÁªüËÆ°ÊúÄÂ§ßÂÄº
db.user.aggregate([{$group:{_id: &#39;$name&#39;, count: {&#39;$max&#39;: &#39;$age&#39;}}}]);  --‰ª•nameÂàÜÁªÑ‰πãÂêéÁªüËÆ°ÊúÄÂ§ßÂÄº
</code></pre><h4 id="ÊúÄÂ∞èÂÄºmin">ÊúÄÂ∞èÂÄº$min</h4>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.aggregate([{$group:{_id: null, count: {&#39;$min&#39;: &#39;$age&#39;}}}]);     --‰∏çÂàÜÁªÑÁªüËÆ°ÊúÄÂ∞èÂÄº
db.user.aggregate([{$group:{_id: &#39;$name&#39;, count: {&#39;$min&#39;: &#39;$age&#39;}}}]);  --‰ª•nameÂàÜÁªÑ‰πãÂêéÁªüËÆ°ÊúÄÂ∞èÂÄº
</code></pre><h4 id="Âπ≥ÂùáÂÄºavg">Âπ≥ÂùáÂÄº$avg</h4>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.aggregate([{$group:{_id: null, age_avg: {&#39;$avg&#39;: &#39;$age&#39;}}}]);     --‰∏çÂàÜÁªÑÁªüËÆ°Âπ≥ÂùáÂÄº
db.user.aggregate([{$group:{_id: &#39;$name&#39;, age_avg: {&#39;$min&#39;: &#39;$age&#39;}}}]);  --‰ª•nameÂàÜÁªÑ‰πãÂêéÁªüËÆ°Âπ≥ÂùáÂÄº
</code></pre><h4 id="Â≠óÁ¨¶‰∏≤ÊãºÊé•">Â≠óÁ¨¶‰∏≤ÊãºÊé•</h4>
<p>ËØ≠Ê≥ïÔºö<code>db.collection.aggregate([{&quot;$project&quot;:{&quot;&lt;result_name&gt;&quot;:{&quot;$concat&quot;:[&quot;$&lt;field&gt;&quot;,...]}}}])</code></p>
<p><span style="color:red">ËøûÊé•Â≠óÊÆµÂøÖÈ°ªÊòØÂ≠óÁ¨¶‰∏≤ÔºåÂê¶ÂàôÊä•Èîô</span></p>
<p><code>$project</code>ÔºöÁÆ°ÈÅìÔºåËøõË°åÂ≠óÁ¨¶‰∏≤ÊãºÊé•Â§ÑÁêÜÔºåÊó•ÊúüÂ§ÑÁêÜÁ≠âÊìç‰ΩúÁöÑÂáΩÊï∞</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.aggregate([{$project: {&#39;name-age&#39;:{$concat:[&#39;$name&#39;, &#39;-&#39;, &#39;$nickName&#39;]}}}]);
</code></pre><h4 id="Â≠óÁ¨¶‰∏≤ËΩ¨Â§ßÂÜô">Â≠óÁ¨¶‰∏≤ËΩ¨Â§ßÂÜô</h4>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.aggregate([{$project: {nameUpper:{$toUpper:&#39;$nickName&#39;}}}]);
</code></pre><h4 id="Â≠óÁ¨¶‰∏≤ËΩ¨Â∞èÂÜô">Â≠óÁ¨¶‰∏≤ËΩ¨Â∞èÂÜô</h4>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.aggregate([{$project: {nameUpper:{$toLower:&#39;$nickName&#39;}}}]);
</code></pre><h4 id="Êà™ÂèñÂ≠óÁ¨¶‰∏≤">Êà™ÂèñÂ≠óÁ¨¶‰∏≤</h4>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.aggregate([{$project: {nameSub:{$substr:[&#39;$nickName&#39;, 0, 3]}}}]);
</code></pre><h4 id="Êó•ÊúüÊ†ºÂºèÂåñ">Êó•ÊúüÊ†ºÂºèÂåñ</h4>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.insert({&#34;birthDate&#34;:ISODate(&#39;2020-01-01T10:10:10.000Z&#39;)})
db.user.aggregate([{$project: {birth: {$dateToString: {format: &#39;%YÂπ¥%mÊúà%dÊó• %H:%M:%S&#39;, date: &#39;$birthDate&#39;}}}}]);
</code></pre><h4 id="Êù°‰ª∂ËøáÊª§">Êù°‰ª∂ËøáÊª§</h4>
<p><code>$match</code>ÔºöÂåπÈÖçÊù°‰ª∂ÔºåÊîæÂú®ÂâçÈù¢ÔºåÁõ∏ÂΩì‰∫éSQL‰∏≠ÁöÑwhereÂ≠êÂè•Ôºå‰ª£Ë°®ËÅöÂêà‰πãÂâçËøõË°åÊù°‰ª∂Á≠õÈÄâ„ÄÇÊîæÂú®ÂêéÈù¢ÔºåÁõ∏ÂΩì‰∫éSQL‰∏≠ÁöÑhavingÂ≠êÂè•„ÄÇ‰ª£Ë°®ËÅöÂêà‰πãÂêéËøõË°åÊù°‰ª∂Á≠õÈÄâÔºåÂè™ËÉΩÁ≠õÈÄâËÅöÂêàÁªìÊûúÔºå‰∏çËÉΩÁ≠õÈÄâËÅöÂêàÊù°‰ª∂„ÄÇ</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">Á§∫‰æãÔºö
db.user.aggregate([{$match: {age: {$lt: 20}}},{$group:{_id: null, count: {$sum: 1}}}]);
</code></pre><h2 id="ÂÖ´ËøêÁÆóÁ¨¶">ÂÖ´„ÄÅËøêÁÆóÁ¨¶</h2>
<p>Âú®MongoDB‰∏≠ÔºåÊï∞Â≠¶Á±ªÂûãÔºàint/long/doubleÔºâÂíåÊó•ÊúüÁ±ªÂûãÔºàdateÔºâÂèØ‰ª•ÂÅöÊï∞Â≠¶ËøêË°å„ÄÇÊó•ÊúüÂè™ËÉΩÂÅöÂä†Âáè„ÄÇ</p>
<p><strong>Âä†Ê≥ï</strong></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">db.user.aggregate([{$project:{name: 1, new_age: {$add: [&#39;$age&#39;, 1]}}}]);
</code></pre><p><strong>ÂáèÊ≥ï</strong></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">db.user.aggregate([{$project:{name: 1, new_age: {$subtract: [&#39;$age&#39;, 1]}}}]);
</code></pre><p><strong>‰πòÊ≥ï</strong></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">db.user.aggregate([{$project:{name: 1, new_age: {$multiply: [&#39;$age&#39;, 1]}}}]);
</code></pre><p><strong>Èô§Ê≥ï</strong></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">db.user.aggregate([{$project:{name: 1, new_age: {$divide: [&#39;$age&#39;, 1]}}}]);
</code></pre><p><strong>ÂèñÊ®°</strong></p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">db.user.aggregate([{$project:{name: 1, new_age: {$mod: [&#39;$age&#39;, 2]}}}]);
</code></pre><h2 id="‰πùÁ¥¢Âºï">‰πù„ÄÅÁ¥¢Âºï</h2>
<p>Âú®MongoDB3ÁâàÊú¨ÂêéÔºåÂàõÂª∫ÈõÜÂêàÊó∂ÈªòËÆ§‰∏∫Á≥ªÁªü‰∏ªÈîÆÂ≠óÊÆµ<code>_id</code>ÂàõÂª∫Á¥¢Âºï„ÄÇ‰∏îÂú®ÂÖ≥Èó≠<code>_id</code>Á¥¢ÂºïÂàõÂª∫Êó∂‰ºöÊúâË≠¶ÂëäÊèêÁ§∫„ÄÇÂõ†‰∏∫_idÂ≠óÊÆµ‰∏çÂàõÂª∫Á¥¢ÂºïÔºå‰ºöÂØºËá¥SecondaryÂú®ÂêåÊ≠•Êï∞ÊçÆÊó∂Ë¥üËΩΩÂèòÈ´ò„ÄÇ</p>
<h3 id="ÂàõÂª∫Á¥¢Âºï">ÂàõÂª∫Á¥¢Âºï</h3>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.ensureIndex(&lt;keys&gt;, &lt;options&gt;)</code></p>
<ul>
<li>
<p>keysÔºöÁî®‰∫éÂàõÂª∫Á¥¢ÂºïÁöÑÂàóÂèäÁ¥¢ÂºïÊï∞ÊçÆÁöÑÊéíÂ∫èËßÑÂàô„ÄÇÂ¶ÇÔºöÂπ∂ÂçáÂ∫èÁ¥¢Âºï<code>db.&lt;collectionName&gt;.ensureIndex({&lt;keyName&gt;:1})</code>„ÄÅÈôçÂ∫èÁ¥¢Âºï<code>db.&lt;collectionName&gt;.ensureIndex({&lt;keyName&gt;:-1})</code></p>
</li>
<li>
<p>optionsÔºöÂàõÂª∫Á¥¢ÂºïÊó∂ÂèØÂÆö‰πâÁöÑÁ¥¢ÂºïÂèÇÊï∞„ÄÇÂèØÈÄâÂèÇÊï∞Â¶Ç‰∏ã</p>
<table>
<thead>
<tr>
<th>ÂèÇÊï∞</th>
<th>Á±ªÂûã</th>
<th>ÊèèËø∞</th>
</tr>
</thead>
<tbody>
<tr>
<td>background</td>
<td>Boolean</td>
<td>ÈªòËÆ§false„ÄÇÂª∫Á¥¢ÂºïËøáÁ®ã‰ºöÈòªÂ°ûÂÖ∂ÂÆÉÊï∞ÊçÆÂ∫ìÊìç‰ΩúÔºåbackgroundÂèØÊåáÂÆö‰ª•ÂêéÂè∞ÊñπÂºèÂàõÂª∫Á¥¢Âºï</td>
</tr>
<tr>
<td>unique</td>
<td>Boolean</td>
<td>ÈªòËÆ§false„ÄÇÂª∫Á´ãÁöÑÁ¥¢ÂºïÊòØÂê¶ÂîØ‰∏ÄÔºåÊåáÂÆö‰∏∫trueÂàõÂª∫ÂîØ‰∏ÄÁ¥¢Âºï</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Á¥¢ÂºïÁöÑÂêçÁß∞„ÄÇÂ¶ÇÊûúÊú™ÊåáÂÆöÈªòËÆ§ÁîüÊàê<code>&lt;key&gt;_&lt;1/-1&gt;</code>ÁöÑÂêçÁß∞</td>
</tr>
<tr>
<td>sparse</td>
<td>Boolean</td>
<td>ÈªòËÆ§falseÔºåÂØπÊñáÊ°£‰∏≠‰∏çÂ≠òÂú®ÁöÑÂ≠óÊÆµÊï∞ÊçÆ‰∏çÂêØÁî®Á¥¢Âºï</td>
</tr>
<tr>
<td>expireAfterSeconds</td>
<td>integer</td>
<td>ÊåáÂÆö‰∏Ä‰∏™‰ª•Áßí‰∏∫Âçï‰ΩçÁöÑÊï∞ÂÄºÔºåÂÆåÊàê TTLËÆæÂÆöÔºåËÆæÂÆöÁ¥¢ÂºïÁöÑÁîüÂ≠òÊó∂Èó¥</td>
</tr>
</tbody>
</table>
<p>Â¶ÇÔºö<code>db.&lt;collectionName&gt;.ensureIndex({&lt;key&gt;:1}, {'background':true})</code></p>
</li>
</ul>
<h3 id="Êü•ÁúãÁ¥¢Âºï">Êü•ÁúãÁ¥¢Âºï</h3>
<p><strong>Êü•ÁúãÈõÜÂêàÁöÑÁ¥¢Âºï‰ø°ÊÅØ</strong></p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.getIndexes()</code></p>
<p><strong>Êü•ÁúãÁ¥¢ÂºïÈîÆ</strong></p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.getIndexKeys()</code></p>
<p><strong>Êü•ÁúãÁ¥¢ÂºïËØ¶ÊÉÖ</strong></p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.getIndexSpecs();</code></p>
<p><strong>Êü•ÁúãÁ¥¢ÂºïÂç†Áî®Á©∫Èó¥</strong></p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.totalIndexSize([is_detail])</code></p>
<p>is_detail‰∏∫falseÂàôÂè™ÊòæÁ§∫Á¥¢ÂºïÁöÑÊÄªÂ§ßÂ∞èÔºå‰∏∫trueÊòæÁ§∫ËØ•ÈõÜÂêà‰∏≠ÊØè‰∏™Á¥¢ÂºïÁöÑÂ§ßÂ∞èÂèäÊÄªÂ§ßÂ∞è</p>
<p><strong>Âà†Èô§ÊåáÂÆöÁ¥¢Âºï</strong></p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.dropIndex('&lt;indexName&gt;')</code></p>
<p><strong>Âà†Èô§ÈõÜÂêàÁöÑÊâÄÊúâËá™Âª∫Á¥¢Âºï</strong></p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.dropIndexes()</code></p>
<p>Ê≠§ÂáΩÊï∞Âè™Âà†Èô§Ëá™Âª∫Á¥¢ÂºïÔºå‰∏ç‰ºöÂà†Èô§MongoDBÂàõÂª∫ÁöÑ<code>_id</code>Á¥¢Âºï</p>
<p><strong>ÈáçÂª∫Á¥¢Âºï</strong></p>
<p>Âú®MongoDB‰∏≠‰ΩøÁî®<code>reIndex</code>ÂáΩÊï∞ÈáçÂª∫Á¥¢Âºï„ÄÇÈáçÂª∫Á¥¢ÂºïÂèØ‰ª•ÂáèÂ∞ëÁ¥¢ÂºïÂ≠òÂÇ®Á©∫Èó¥ÔºåÂáèÂ∞ëÁ¥¢ÂºïÁ¢éÁâáÔºå‰ºòÂåñÁ¥¢ÂºïÊü•ËØ¢ÊïàÁéá„ÄÇ‰∏ÄËà¨Âú®Êï∞ÊçÆÂ§ßÈáèÂèòÂåñÂêéÔºå‰ºö‰ΩøÁî®ÈáçÂª∫Á¥¢ÂºïÊù•ÊèêÂçáÁ¥¢ÂºïÊÄßËÉΩ„ÄÇ</p>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.reIndex()</code></p>
<h3 id="Á¥¢ÂºïÁ±ªÂûã">Á¥¢ÂºïÁ±ªÂûã</h3>
<p>MongoDBÊîØÊåÅÂ§öÁßçÁ±ªÂûãÁöÑÁ¥¢ÂºïÔºåÂåÖÊã¨ÂçïÂ≠óÊÆµÁ¥¢Âºï„ÄÅÂ§çÂêàÁ¥¢Âºï„ÄÅÂ§ökeyÁ¥¢Âºï„ÄÅÊñáÊú¨Á¥¢ÂºïÁ≠âÔºåÊØèÁßçÁ±ªÂûãÁöÑÁ¥¢ÂºïÊúâ‰∏çÂêåÁöÑ‰ΩøÁî®Âú∫Âêà</p>
<h4 id="ÂçïÂ≠óÊÆµÁ¥¢Âºï">ÂçïÂ≠óÊÆµÁ¥¢Âºï</h4>
<p><code>db.&lt;collectionName&gt;.ensureIndex({&lt;field&gt;:1});</code></p>
<p>‰∏äËø∞ËØ≠Âè•ÈíàÂØπ<code>field</code>ÂàõÂª∫‰∫ÜÂçïÂ≠óÊÆµÁ¥¢ÂºïÔºåÂÖ∂ËÉΩÂä†ÈÄüÂØπÊ≠§Â≠óÊÆµÁöÑÂêÑÁßçÊü•ËØ¢ËØ∑Ê±ÇÔºåÊòØÊúÄÂ∏∏ËßÅÁöÑÁ¥¢ÂºïÂΩ¢Âºè„ÄÇMongoDBÈªòËÆ§ÂàõÂª∫ÁöÑidÁ¥¢Âºï‰πüÊòØËøôÁßçÁ±ªÂûã„ÄÇ</p>
<h4 id="‰∫§ÂèâÁ¥¢Âºï">‰∫§ÂèâÁ¥¢Âºï</h4>
<p>‰∏∫‰∏Ä‰∏™ÈõÜÂêàÁöÑÂ§ö‰∏™Â≠óÊÆµÂàÜÂà´Âª∫Á´ãÁ¥¢ÂºïÔºåÂú®Êü•ËØ¢ÁöÑÊó∂ÂÄôÈÄöËøáÂ§ö‰∏™Â≠óÊÆµ‰Ωú‰∏∫Êü•ËØ¢Êù°‰ª∂ÔºåËøôÁßçÊÉÖÂÜµÁß∞‰∏∫‰∫§ÂèâÁ¥¢Âºï„ÄÇ</p>
<p><code>db.&lt;collectionName&gt;.ensureIndex({&lt;field_1&gt;:1});</code></p>
<p><code>db.&lt;collectionName&gt;.ensureIndex({&lt;field_2&gt;:1});</code></p>
<p>‰∫§ÂèâÁ¥¢ÂºïÁöÑÊü•ËØ¢ÊïàÁéáËæÉ‰ΩéÔºå‰æãÂ¶Ç<code>db.&lt;collectionName&gt;.find({&lt;field_1&gt;:&lt;value_1&gt;, &lt;field_2&gt;: &lt;value_2&gt;})</code>„ÄÇÂú®‰ΩøÁî®Êó∂ÔºåÂΩìÊü•ËØ¢‰ΩøÁî®Âà∞Â§ö‰∏™Â≠óÊÆµÁöÑÊó∂ÂÄôÔºåÂ∞ΩÈáè‰ΩøÁî®Â§çÂêàÁ¥¢ÂºïÔºåËÄå‰∏çÊòØ‰∫§ÂèâÁ¥¢Âºï</p>
<h4 id="Â§çÂêàÁªÑÂêàËÅöÂêàÁ¥¢Âºï">Â§çÂêà|ÁªÑÂêà|ËÅöÂêàÁ¥¢Âºï</h4>
<p>ÈíàÂØπÂ§ö‰∏™Â≠óÊÆµËÅîÂêàÂàõÂª∫Á¥¢ÂºïÔºåÂÖàÊåâÁ¨¨‰∏Ä‰∏™Â≠óÊÆµÊéíÂ∫èÔºåÁ¨¨‰∏Ä‰∏™Â≠óÊÆµÁõ∏ÂêåÁöÑÊñáÊ°£ÊåâÁ¨¨‰∫å‰∏™Â≠óÊÆµÊéíÂ∫è</p>
<p><code>db.&lt;collectionName&gt;.ensureIndex({&lt;field_1&gt;:1, &lt;field_2&gt;:1})</code></p>
<blockquote>
<p>‰ΩøÁî®Â§çÂêàÁ¥¢ÂºïÊòØÈúÄË¶ÅÊ≥®ÊÑèÊúÄÂ∑¶ÂâçÁºÄÂéüÂàô</p>
</blockquote>
<h4 id="Â§ökeyÁ¥¢Âºï">Â§ökeyÁ¥¢Âºï</h4>
<p>ÂΩìÁ¥¢ÂºïÁöÑÂ≠óÊÆµ‰∏∫Êï∞ÁªÑÊó∂ÔºåÂàõÂª∫Âá∫ÁöÑÁ¥¢ÂºïÁß∞‰∏∫Â§ökeyÁ¥¢ÂºïÔºåÂ§ökeyÁ¥¢Âºï‰ºö‰∏∫Êï∞ÁªÑÁöÑÊØè‰∏™ÂÖÉÁ¥†Âª∫Á´ã‰∏ÄÊù°Á¥¢Âºï</p>
<p>ËØ≠Ê≥ïÂíåÂª∫Á´ã‰∏ÄËà¨Á¥¢Âºï‰∏ÄËá¥<code>db.&lt;collectionName&gt;.ensureIndex( {&lt;arrayFiled&gt;: 1} )</code></p>
<h4 id="ÂîØ‰∏ÄÁ¥¢Âºï">ÂîØ‰∏ÄÁ¥¢Âºï</h4>
<p>‰øùËØÅÁ¥¢ÂºïÂØπÂ∫îÁöÑÂ≠óÊÆµ‰∏ç‰ºöÂá∫Áé∞Áõ∏ÂêåÁöÑÂÄºÔºåÊØîÂ¶Ç_idÁ¥¢ÂºïÂ∞±ÊòØÂîØ‰∏ÄÁ¥¢Âºï„ÄÇÂ¶ÇÊûúÂîØ‰∏ÄÁ¥¢ÂºïÊâÄÂú®Â≠óÊÆµÊúâÈáçÂ§çÊï∞ÊçÆÂÜôÂÖ•Êó∂ÔºåÊäõÂá∫ÂºÇÂ∏∏</p>
<p><code>db.&lt;collectionName&gt;.ensureIndex({&lt;field_1&gt;: 1}, {unique: true})</code></p>
<h4 id="ÈÉ®ÂàÜÁ¥¢Âºï">ÈÉ®ÂàÜÁ¥¢Âºï</h4>
<p>Âè™ÈíàÂØπÁ¨¶ÂêàÊüê‰∏™ÁâπÂÆöÊù°‰ª∂ÁöÑÊñáÊ°£Âª∫Á´ãÁ¥¢Âºï„ÄÇÈÉ®ÂàÜÁ¥¢ÂºïÂ∞±ÊòØÂ∏¶ÊúâËøáÊª§Êù°‰ª∂ÁöÑÁ¥¢ÂºïÔºåÂç≥Á¥¢ÂºïÂè™Â≠òÂú®‰∏éÊüê‰∫õÊñáÊ°£‰πã‰∏ä</p>
<p>Â¶ÇÔºö<code>db.&lt;collectionName&gt;.ensureIndex({&lt;field_1&gt;: 1},{partialFilterExpression: {field_1: {$gt: &lt;filterValue&gt;}}})</code></p>
<p>Âè™ÊúâÂΩìÂ≠óÊÆµ<code>field_1</code>Â§ß‰∫éÊåáÂÆöÁöÑ<code>filterValue</code>ÊâçÂª∫Á´ãÁ¥¢ÂºïÔºå‰∏î<code>field_1</code>Êü•ËØ¢ÂÄºÊØî<code>filterValue</code>Â§ßÊó∂ÊâçÁîüÊïà</p>
<p><span style="color:red">ÈÉ®ÂàÜÁ¥¢ÂºïÂè™‰∏∫ÈõÜÂêà‰∏≠ÈÇ£‰∫õÊª°Ë∂≥ÊåáÂÆöÁöÑÁ≠õÈÄâÊù°‰ª∂ÁöÑÊñáÊ°£ÂàõÂª∫Á¥¢Âºï„ÄÇÂ¶ÇÊûú‰Ω†ÊåáÂÆöÁöÑpartialFilterExpressionÂíåÂîØ‰∏ÄÁ∫¶Êùü„ÄÅÈÇ£‰πàÂîØ‰∏ÄÊÄßÁ∫¶ÊùüÂè™ÈÄÇÁî®‰∫éÊª°Ë∂≥Á≠õÈÄâÊù°‰ª∂ÁöÑÊñáÊ°£„ÄÇÂÖ∑ÊúâÂîØ‰∏ÄÁ∫¶ÊùüÁöÑÈÉ®ÂàÜÁ¥¢Âºï‰∏ç‰ºöÈòªÊ≠¢‰∏çÁ¨¶ÂêàÂîØ‰∏ÄÁ∫¶Êùü‰∏î‰∏çÁ¨¶ÂêàËøáÊª§Êù°‰ª∂ÁöÑÊñáÊ°£ÁöÑÊèíÂÖ•„ÄÇ</span></p>
<h3 id="Êü•ËØ¢ËÆ°Âàí">Êü•ËØ¢ËÆ°Âàí</h3>
<p>ËØ≠Ê≥ïÔºö<code>db.&lt;collectionName&gt;.find(&lt;findContent&gt;).explain()</code></p>
<p><code>winningPlain.stage</code>‰∏∫<code>COLLSCAN</code>Âàô‰∏∫ÂÖ®Ë°®Êâ´ÊèèÔºå<code>IXSCAN</code>Êó∂‰ΩøÁî®‰∫ÜÁ¥¢Âºï</p>
<h2 id="ÂçÅÈõÜÁæ§">ÂçÅ„ÄÅÈõÜÁæ§</h2>
<h3 id="Â§çÂà∂ÈõÜreplication-set">Â§çÂà∂ÈõÜÔºàReplication SetÔºâ</h3>
<p>MongoDBÁöÑÂ§çÂà∂Ëá≥Â∞ëÈúÄË¶Å‰∏§‰∏™ËäÇÁÇπ„ÄÇÂÖ∂‰∏≠‰∏Ä‰∏™ÊòØ‰∏ªËäÇÁÇπÔºåË¥üË¥£Â§ÑÁêÜÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÔºåÂÖ∂‰ΩôÁöÑÈÉΩÊòØ‰ªéËäÇÁÇπÔºåË¥üË¥£Â§çÂà∂‰∏ªËäÇÁÇπ‰∏äÁöÑÊï∞ÊçÆ„ÄÇÂª∫ËÆÆÊèê‰æõ‰ª≤Ë£ÅËäÇÁÇπÔºåÊ≠§ËäÇÁÇπ‰∏çÂ≠òÂÇ®Êï∞ÊçÆÔºå‰ΩúÁî®ÊòØÂΩì‰∏ªËäÇÁÇπÂá∫Áé∞ÊïÖÈöúÊó∂ÔºåÈÄâ‰∏æÂá∫Êüê‰∏™Â§áÁî®ËäÇÁÇπÊàê‰∏∫‰∏ªËäÇÁÇπÔºå‰øùËØÅMongoDBÁöÑÊ≠£Â∏∏ÊúçÂä°„ÄÇÂÆ¢Êà∑Á´ØÂè™ÈúÄË¶ÅËÆøÈóÆ‰∏ªËäÇÁÇπÊàñ‰ªéËäÇÁÇπÔºå‰∏çÈúÄË¶ÅËÆøÈóÆ‰ª≤Ë£ÅËäÇÁÇπ„ÄÇ</p>
<p>‰∏ªËäÇÁÇπËÆ∞ÂΩïÂú®ÂÖ∂‰∏äÁöÑÊâÄÊúâÊìç‰ΩúoplogÔºàÊìç‰ΩúÊó•ÂøóÔºâÔºå‰ªéËäÇÁÇπÂÆöÊúüËΩÆËØ¢‰∏ªËäÇÁÇπËé∑ÂèñËøô‰∫õÊìç‰ΩúÔºåÁÑ∂ÂêéÂØπËá™Â∑±ÁöÑÊï∞ÊçÆÂâØÊú¨ÊâßË°åËøô‰∫õÊìç‰ΩúÔºå‰ªéËÄå‰øùËØÅ‰ªéËäÇÁÇπÁöÑÊï∞ÊçÆ‰∏é‰∏ªËäÇÁÇπ‰∏ÄËá¥„ÄÇ</p>
<p>MongoDBÂêÑ‰∏™ËäÇÁÇπÂ∏∏ËßÅÁöÑÊê≠ÈÖçÊñπÂºè‰∏∫Ôºö‰∏Ä‰∏ª‰∏Ä‰ªé‰∏Ä‰ª≤Ë£Å„ÄÅ‰∏Ä‰∏ªÂ§ö‰ªé‰∏Ä‰ª≤Ë£Å„ÄÇ</p>
<h4 id="ÁéØÂ¢ÉÂáÜÂ§á">ÁéØÂ¢ÉÂáÜÂ§á</h4>
<p>Âú®‰∏ÄÂè∞‰∏ªÊú∫‰∏äÊ®°Êãü‰ΩøÁî®Âçï‰∏ªÊú∫Â§öÁ´ØÂè£ÁöÑÊñπÂºèÊê≠Âª∫Â§çÂà∂ÈõÜÔºå1‰∏ª2Â§á1‰ª≤Ë£Å</p>
<p>‚ë†„ÄÅÂàõÂª∫Êï∞ÊçÆÁõÆÂΩï</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>mkdir -p /opt/module/mongodb-replication-set/data/db-primary  ‰∏ªËäÇÁÇπ
</span></span><span style="display:flex;"><span>mkdir -p /opt/module/mongodb-replication-set/data/db-s0       ‰ªéËäÇÁÇπ
</span></span><span style="display:flex;"><span>mkdir -p /opt/module/mongodb-replication-set/data/db-s1       ‰ªéËäÇÁÇπ
</span></span><span style="display:flex;"><span>mkdir -p /opt/module/mongodb-replication-set/data/db-arbiter  ‰ª≤Ë£ÅËäÇÁÇπ
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚ë°„ÄÅÂàõÂª∫ÈÖçÁΩÆÁõÆÂΩï</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>mkdir /opt/module/mongodb-replication-set/etc    ÂàõÂª∫ÈÖçÁΩÆÁõÆÂΩï
</span></span><span style="display:flex;"><span>mkdir /opt/module/mongodb-replication-set/log    ÂàõÂª∫Êó•ÂøóÁõÆÂΩï
</span></span><span style="display:flex;"><span>mkdir /opt/module/mongodb-replication-set/pids   ÂàõÂª∫ËøõÁ®ãÊñá‰ª∂ÁõÆÂΩï
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚ë¢„ÄÅÈÖçÁΩÆÊñá‰ª∂</p>
<pre tabindex="0"><code class="language-config" data-lang="config"># PrimaryÈÖçÁΩÆ
vim /opt/module/mongodb-replication-set/etc/mongo-primary.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
dbpath=/opt/module/mongodb-replication-set/data/db-primary          Êï∞ÊçÆÂ∫ìÁõÆÂΩï
logpath=/opt/module/mongodb-replication-set/log/primary.log         Êó•ÂøóÊñá‰ª∂
pidfilepath=/opt/module/mongodb-replication-set/pids/primary.pid    ËøõÁ®ãÊèèËø∞Êñá‰ª∂
bind_ip_all=true
directoryperdb=true                     ‰∏∫Êï∞ÊçÆÂ∫ìËá™Âä®Êèê‰æõÈáçÂÆöÂêë
logappend=true                          Êó•ÂøóËøΩÂä†ÂÜôÂÖ•
replSet=rs                              Â§çÂà∂ÈõÜÂêçÁß∞Ôºå‰∏Ä‰∏™Â§çÂà∂ÈõÜ‰∏≠ÁöÑÂ§ö‰∏™ËäÇÁÇπÂëΩÂêç‰∏ÄËá¥
port=37010                              Á´ØÂè£
oplogSize=10000                         Êìç‰ΩúÊó•ÂøóÂÆπÈáè
fork=true                               ÂêéÂè∞ÂêØÂä®

# Secondary-0ÈÖçÁΩÆ
vim /opt/module/mongodb-replication-set/etc/mongo-s0.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
dbpath=/opt/module/mongodb-replication-set/data/db-s0
logpath=/opt/module/mongodb-replication-set/log/secondary-0.log
pidfilepath=/opt/module/mongodb-replication-set/pids/secondary-0.pid
bind_ip_all=true
directoryperdb=true
logappend=true
replSet=rs
port=37011
oplogSize=10000
fork=true

# Secondary-1ÈÖçÁΩÆ
vim /opt/module/mongodb-replication-set/etc/mongo-s1.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
dbpath=/opt/module/mongodb-replication-set/data/db-s1
logpath=/opt/module/mongodb-replication-set/log/secondary-1.log
pidfilepath=/opt/module/mongodb-replication-set/pids/secondary-1.pid
bind_ip_all=true
directoryperdb=true
logappend=true
replSet=rs
port=37012
oplogSize=10000
fork=true

# ArbiterÈÖçÁΩÆ
vim /opt/module/mongodb-replication-set/etc/mongo-arbiter.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
dbpath=/opt/module/mongodb-replication-set/data/db-arbiter
logpath=/opt/module/mongodb-replication-set/log/db-arbiter.log
pidfilepath=/opt/module/mongodb-replication-set/pids/db-arbiter.pid
bind_ip_all=true
directoryperdb=true
logappend=true
replSet=rs
port=37013
oplogSize=10000
fork=true
</code></pre><h4 id="ÂêØÂä®ÂêÑËäÇÁÇπ">ÂêØÂä®ÂêÑËäÇÁÇπ</h4>
<p>‚ë†„ÄÅÂêØÂä®</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>bin/mongod --config /opt/module/mongodb-replication-set/etc/mongo-primary.conf
</span></span><span style="display:flex;"><span>bin/mongod --config /opt/module/mongodb-replication-set/etc/mongo-s0.conf
</span></span><span style="display:flex;"><span>bin/mongod --config /opt/module/mongodb-replication-set/etc/mongo-s1.conf
</span></span><span style="display:flex;"><span>bin/mongod --config /opt/module/mongodb-replication-set/etc/mongo-arbiter.conf
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚ë°„ÄÅËÆøÈóÆ‰∏ªËäÇÁÇπ</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span> bin/mongo --port <span style="color:#099">37010</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>‚ë¢„ÄÅÂàùÂßãÂåñÂ§çÂà∂ÈõÜ</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">rs.initiate({
    # Â§çÂà∂ÈõÜÂëΩÂêçÔºå‰∏éÈÖçÁΩÆÊñá‰ª∂ÂØπÂ∫î
    _id:&#34;rs&#34;,
    members:[
        # _id:ÂîØ‰∏ÄÊ†áËÆ∞Ôºåhost:‰∏ªÊú∫Âú∞ÂùÄÔºåpriority:ÊùÉÈáçÔºàÊï∞Â≠óË∂äÂ§ß‰ºòÂÖàÁ∫ßË∂äÈ´òÔºâÔºåarbiterOnly:ÊòØÂê¶ÊòØ‰ª≤Ë£ÅËäÇÁÇπ
        {_id:0,host:&#34;127.0.0.1:37010&#34;,priority:3},
        {_id:1,host:&#34;127.0.0.1:37011&#34;,priority:1},
        {_id:2,host:&#34;127.0.0.1:37012&#34;,priority:1},
        {_id:3,host:&#34;127.0.0.1:37013&#34;,arbiterOnly:true}
    ]
});
</code></pre><p>‚ë£„ÄÅÊü•ÁúãÁä∂ÊÄÅ</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">rs.status();
</code></pre><p>‚ë£„ÄÅÊü•ÁúãÂΩìÂâçËøûÊé•ËäÇÁÇπÊòØÂê¶ÊòØPrimaryËäÇÁÇπ</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">rs.isMaster();
</code></pre><h4 id="ÊÄªÁªì">ÊÄªÁªì</h4>
<p>ÂΩì‰∏ªËäÇÁÇπÂÆïÊú∫Êó∂Ôºå‰ª≤Ë£ÅËäÇÁÇπ‰ºöÊ†πÊçÆÈÖçÁΩÆ‰ø°ÊÅØ‰∏≠ÁöÑÊùÉÈáçÂÄº‰ºòÂÖàÈÄâ‰∏æÊùÉÈáçÈ´òÁöÑËäÇÁÇπ‰Ωú‰∏∫‰∏ªËäÇÁÇπÁªßÁª≠Êèê‰æõÊúçÂä°„ÄÇÂΩìÂÆïÊú∫ÁöÑ‰∏ªËäÇÁÇπÊÅ¢Â§çÂêéÔºåÂ§çÂà∂ÈõÜ‰ºöÊÅ¢Â§çÂéü‰∏ªËäÇÁÇπÁä∂ÊÄÅÔºå‰∏¥Êó∂‰∏ªËäÇÁÇπÈáçÊñ∞Êàê‰∏∫‰ªéËäÇÁÇπ„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÁõ¥Êé•ËøûÊé•‰ªéËäÇÁÇπÊòØÊó†Ê≥ïÊü•ËØ¢Êï∞ÊçÆÁöÑ„ÄÇÂõ†‰∏∫‰ªéËäÇÁÇπÊòØ‰∏çÂèØËØªÁöÑ„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂú®‰ªéËäÇÁÇπ‰∏äËØªÂèñÊï∞ÊçÆÔºåÂàôÈúÄË¶ÅÂú®‰ªéËäÇÁÇπÊéßÂà∂Âè∞ËæìÂÖ•ÂëΩ‰ª§<code>rs.slaveOk([true|false])</code>Êù•ËÆæÁΩÆ„ÄÇ<code>rs.slaveOk()</code>Êàñ<code>rs.slaveOk(true)</code>‰ª£Ë°®ÂèØ‰ª•Âú®‰ªéËäÇÁÇπ‰∏äÂÅöËØªÊìç‰ΩúÔºõ<code>rs.slaveOk(false)</code>‰ª£Ë°®‰∏çÂèØÂú®‰ªéËäÇÁÇπ‰∏äÂÅöËØªÊìç‰Ωú„ÄÇ</p>
<h3 id="ÂàÜÁâáÈõÜÁæ§shard-cluster">ÂàÜÁâáÈõÜÁæ§Ôºàshard clusterÔºâ</h3>
<p>Âú®MongodbÈáåÈù¢Â≠òÂú®Âè¶‰∏ÄÁßçÈõÜÁæ§ÔºåÂ∞±ÊòØÂàÜÁâáÊäÄÊúØÔºåÂèØ‰ª•Êª°Ë∂≥MongoDBÊï∞ÊçÆÈáèÂ§ßÈáèÂ¢ûÈïøÁöÑÈúÄÊ±Ç„ÄÇÂΩìMongoDBÂ≠òÂÇ®Êµ∑ÈáèÁöÑÊï∞ÊçÆÊó∂Ôºå‰∏ÄÂè∞Êú∫Âô®ÂèØËÉΩ‰∏çË∂≥‰ª•Â≠òÂÇ®Êï∞ÊçÆÔºå‰πüÂèØËÉΩ‰∏çË∂≥‰ª•Êèê‰æõÂèØÊé•ÂèóÁöÑËØªÂÜôÂêûÂêêÈáè„ÄÇËøôÊó∂ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•ÈÄöËøáÂú®Â§öÂè∞Êú∫Âô®‰∏äÂàÜÂâ≤Êï∞ÊçÆÔºå‰ΩøÂæóÊï∞ÊçÆÂ∫ìÁ≥ªÁªüËÉΩÂ≠òÂÇ®ÂíåÂ§ÑÁêÜÊõ¥Â§öÁöÑÊï∞ÊçÆ„ÄÇ</p>
<p>shardingÊñπÊ°àÂ∞ÜÊï¥‰∏™Êï∞ÊçÆÈõÜÊãÜÂàÜÊàêÂ§ö‰∏™Êõ¥Â∞èÁöÑchunkÔºåÂπ∂ÂàÜÂ∏ÉÂú®ÈõÜÁæ§‰∏≠Â§ö‰∏™mongodËäÇÁÇπ‰∏äÔºåÊúÄÁªàËææÂà∞Â≠òÂÇ®ÂíåË¥üËΩΩËÉΩÂäõÊâ©ÂÆπ„ÄÅÂéãÂäõÂàÜÊµÅÁöÑ‰ΩúÁî®„ÄÇÂú®shardingÊû∂ÊûÑ‰∏≠ÔºåÊØè‰∏™Ë¥üË¥£Â≠òÂÇ®‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆÁöÑmongodËäÇÁÇπÁß∞‰∏∫shardÔºàÂàÜÁâáÔºâÔºåshard‰∏äÂàÜÂ∏ÉÁöÑÊï∞ÊçÆÂùóÁß∞‰∏∫chunkÔºåcollectionsÂèØ‰ª•Ê†πÊçÆ<code>shard key</code>ÔºàÁß∞‰∏∫ÂàÜÁâáÈîÆÔºâÂ∞ÜÊï∞ÊçÆÈõÜÊãÜÂàÜ‰∏∫Â§ö‰∏™chunksÔºåÂπ∂Áõ∏ÂØπÂùáË°°ÁöÑÂàÜÂ∏ÉÂú®Â§ö‰∏™shards‰∏ä„ÄÇ</p>
<h4 id="ÂêÑÊúØËØ≠Ëß£Èáä">ÂêÑÊúØËØ≠Ëß£Èáä</h4>
<p><strong>Shard</strong></p>
<p>Áî®‰∫éÂ≠òÂÇ®ÂÆûÈôÖÁöÑÊï∞ÊçÆÂùóÔºåÂÆûÈôÖÁîü‰∫ßÁéØÂ¢É‰∏≠‰∏Ä‰∏™shard serverËßíËâ≤ÂèØÁî±Âá†Âè∞Êú∫Âô®ÁªÑ‰∏™‰∏Ä‰∏™replica setÊâøÊãÖÔºåÈò≤Ê≠¢‰∏ªÊú∫ÂçïÁÇπÊïÖÈöú</p>
<p><strong>Config Server</strong></p>
<p>mongodÂÆû‰æãÔºåÂ≠òÂÇ®‰∫ÜÊï¥‰∏™ClusterMetadataÔºåÂÖ∂‰∏≠ÂåÖÊã¨chunk‰ø°ÊÅØ„ÄÇ</p>
<p><strong>Routers</strong></p>
<p>ÂâçÁ´ØË∑ØÁî±ÔºåÂÆ¢Êà∑Á´ØÁî±Ê≠§Êé•ÂÖ•Ôºå‰∏îËÆ©Êï¥‰∏™ÈõÜÁæ§Áúã‰∏äÂéªÂÉèÂçï‰∏ÄÊï∞ÊçÆÂ∫ìÔºåÂâçÁ´ØÂ∫îÁî®ÂèØ‰ª•ÈÄèÊòé‰ΩøÁî®„ÄÇ</p>
<p><strong>Shard Key</strong></p>
<p>Êï∞ÊçÆÁöÑÂàÜÂå∫Ê†πÊçÆ<code>shard key</code>ÔºåÂØπ‰∫éÊØè‰∏™ÈúÄË¶ÅshardingÁöÑcollectionÔºåÈÉΩÈúÄË¶ÅÊåáÂÆö<code>shard key</code>ÔºàÂàÜÁâáÈîÆÔºâÔºõÂàÜÁâáÈîÆÂøÖÈ°ªÊòØÁ¥¢ÂºïÂ≠óÊÆµÊàñËÄÖ‰∏∫ÁªÑÂêàÁ¥¢ÂºïÁöÑÂ∑¶ÂâçÁºÄÔºõmongodbÊ†πÊçÆÂàÜÁâáÈîÆÂ∞ÜÊï∞ÊçÆÂàÜÊàêÂ§ö‰∏™chunksÔºåÂπ∂Â∞ÜÂÆÉ‰ª¨ÂùáÂåÄÂàÜÂ∏ÉÂú®Â§ö‰∏™shardsËäÇÁÇπ‰∏ä„ÄÇÁõÆÂâçÔºåmongodbÊîØÊåÅ‰∏§ÁßçÂàÜÂå∫ÁÆóÊ≥ïÔºöÂå∫Èó¥ÂàÜÂå∫ÔºàRangeÔºâÂíåÂìàÂ∏åÔºàHashÔºâÂàÜÂå∫„ÄÇ</p>
<p><strong>RangeÂàÜÂå∫</strong></p>
<p>È¶ñÂÖà<code>shard key</code>ÂøÖÈ°ªÊòØÊï∞Â≠óÁ±ªÂûãÊàñÂ≠óÁ¨¶‰∏≤Á±ªÂûãÔºàÂ≠óÁ¨¶‰∏≤Á±ªÂûãÊ†πÊçÆÁ¥¢ÂºïÊéíÂ∫è‰Ωú‰∏∫ÂàÜË£Ç‰æùÊçÆÔºâÔºåÊï¥‰∏™Âå∫Èó¥ÁöÑ‰∏ä‰∏ãËæπÁïåÂàÜÂà´‰∏∫Ê≠£Êó†Á©∑Â§ß„ÄÅË¥üÊó†Á©∑Â§ßÔºåÊØè‰∏™chunkË¶ÜÁõñ‰∏ÄÊÆµÂ≠êÂå∫Èó¥ÔºåÂç≥Êï¥‰ΩìËÄåË®ÄÔºå‰ªª‰Ωïshard keyÂùá‰ºöË¢´Êüê‰∏™ÁâπÂÆöÁöÑchunkÊâÄË¶ÜÁõñ„ÄÇÂå∫Èó¥Âùá‰∏∫Â∑¶Èó≠Âè≥ÂºÄ„ÄÇÊØè‰∏™Âå∫Èó¥Âùá‰∏ç‰ºöÊúâÈáçÂè†Ë¶ÜÁõñÔºå‰∏î‰∫íÁõ∏‰∏¥Ëøë„ÄÇÂΩìÁÑ∂chunkÂπ∂‰∏çÊòØÈ¢ÑÂÖàÂàõÂª∫ÁöÑÔºåËÄåÊòØÈöèÁùÄchunkÊï∞ÊçÆÁöÑÂ¢ûÂ§ßËÄå‰∏çÊñ≠split„ÄÇ</p>
<p><strong>HashÂàÜÂå∫</strong></p>
<p>ËÆ°ÁÆóshard keyÁöÑhashÂÄºÔºà64‰ΩçÊï∞Â≠óÔºâÔºåÂπ∂‰ª•Ê≠§‰Ωú‰∏∫RangeÊù•ÂàÜÂå∫„ÄÇHashÂÄºÂÖ∑ÊúâÂæàÂº∫ÁöÑÊï£ÂàóËÉΩÂäõÔºåÈÄöÂ∏∏‰∏çÂêåÁöÑshard keyÂÖ∑Êúâ‰∏çÂêåÁöÑhashÂÄºÔºàÂÜ≤Á™ÅÊòØÊúâÈôêÁöÑÔºâÔºåËøôÁßçÂàÜÂå∫ÊñπÂºèÂèØ‰ª•Â∞ÜdocumentÊõ¥Âä†ÈöèÊú∫ÁöÑÂàÜÊï£Âú®‰∏çÂêåÁöÑchunks‰∏ä„ÄÇ</p>
<h4 id="Êê≠Âª∫ÂàÜÁâáÈõÜÁæ§">Êê≠Âª∫ÂàÜÁâáÈõÜÁæ§</h4>
<p>Âú®‰∏ÄÂè∞‰∏ªÊú∫‰∏äÊ®°Êãü‰ΩøÁî®Âçï‰∏ªÊú∫Â§öÁ´ØÂè£ÁöÑÊñπÂºèÊê≠Âª∫ÈõÜÁæ§Ôºå‰∏§‰∏™Â§çÂà∂ÈõÜÔºà1‰∏ª1Â§á1‰ª≤Ë£ÅÔºâÔºå‰∏â‰∏™ÈÖçÁΩÆÊúçÂä°Âô®Ôºà1‰∏ª2Â§áÔºâÔºå‰∏Ä‰∏™Ë∑ØÁî±ËäÇÁÇπ</p>
<h5 id="ÁéØÂ¢ÉÂáÜÂ§á-1">ÁéØÂ¢ÉÂáÜÂ§á</h5>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb"># ÂàÜÁâá0ÁöÑ3‰∏™ËäÇÁÇπÁöÑÊï∞ÊçÆÁõÆÂΩïÔºåRSÂ§çÂà∂ÈõÜÔºå1‰∏ª1Â§á1‰ª≤Ë£Å
mkdir -p /opt/module/mongodb-cluster/data/rs0/primary
mkdir -p /opt/module/mongodb-cluster/data/rs0/slave
mkdir -p /opt/module/mongodb-cluster/data/rs0/arbiter

# ÂàÜÁâá1ÁöÑ3‰∏™ËäÇÁÇπÁöÑÊï∞ÊçÆÁõÆÂΩïÔºåRSÂ§çÂà∂ÈõÜÔºå1‰∏ª1Â§á1‰ª≤Ë£Å
mkdir -p /opt/module/mongodb-cluster/data/rs1/primary
mkdir -p /opt/module/mongodb-cluster/data/rs1/slave
mkdir -p /opt/module/mongodb-cluster/data/rs1/arbiter

# ÈÖçÁΩÆÊúçÂä°Âô®ÁöÑ3‰∏™ËäÇÁÇπÁöÑÊï∞ÊçÆÁõÆÂΩïÔºåRSÂ§çÂà∂ÈõÜÔºå1‰∏ª2Â§á
mkdir -p /opt/module/mongodb-cluster/data/cf/primary
mkdir -p /opt/module/mongodb-cluster/data/cf/s0
mkdir -p /opt/module/mongodb-cluster/data/cf/s1

# ÂàõÂª∫ÈÖçÁΩÆÁõÆÂΩï
mkdir -p /opt/module/mongodb-cluster/etc
mkdir -p /opt/module/mongodb-cluster/log
mkdir -p /opt/module/mongodb-cluster/pids
</code></pre><h5 id="Êê≠Âª∫shard">Êê≠Âª∫Shard</h5>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb"># RS0ÁöÑPrimaryÈÖçÁΩÆ
vim /opt/module/mongodb-cluster/etc/rs0-primary.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
shardsvr=true                                        ‰ª£Ë°®ÂΩìÂâçËäÇÁÇπÊòØ‰∏Ä‰∏™shardËäÇÁÇπ„ÄÇ
dbpath=/opt/module/mongodb-cluster/data/rs0/primary
logpath=/opt/module/mongodb-cluster/log/rs0-primary.log
pidfilepath=/opt/module/mongodb-cluster/pids/rs0-primary.pid
bind_ip_all=true
logappend=true
replSet=rs0
port=27010
oplogSize=10000
fork=true

# RS0ÁöÑSecondaryÈÖçÁΩÆ
vim /opt/module/mongodb-cluster/etc/rs0-slave.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
dbpath=/opt/module/mongodb-cluster/data/rs0/slave
logpath=/opt/module/mongodb-cluster/log/rs0-slave.log
pidfilepath=/opt/module/mongodb-cluster/pids/rs0-slave.pid
bind_ip_all=true
shardsvr=true
logappend=true
replSet=rs0
port=27011
oplogSize=10000
fork=true

# RS0ÁöÑarbiterÈÖçÁΩÆ
vim /opt/module/mongodb-cluster/etc/rs0-arbiter.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
dbpath=/opt/module/mongodb-cluster/data/rs0/arbiter
logpath=/opt/module/mongodb-cluster/log/rs0-arbiter.log
pidfilepath=/opt/module/mongodb-cluster/pids/rs0-arbiter.pid
bind_ip_all=true
shardsvr=true
logappend=true
replSet=rs0
port=27012
oplogSize=10000
fork=true

# RS1ÁöÑPrimaryÈÖçÁΩÆ
vim /opt/module/mongodb-cluster/etc/rs1-primary.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
shardsvr=true
dbpath=/opt/module/mongodb-cluster/data/rs1/primary
logpath=/opt/module/mongodb-cluster/log/rs1-primary.log
pidfilepath=/opt/module/mongodb-cluster/pids/rs1-primary.pid
bind_ip_all=true
logappend=true
replSet=rs1
port=27020
oplogSize=10000
fork=true

# RS1ÁöÑSecondaryÈÖçÁΩÆ
vim /opt/module/mongodb-cluster/etc/rs1-slave.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
dbpath=/opt/module/mongodb-cluster/data/rs1/slave
logpath=/opt/module/mongodb-cluster/log/rs1-slave.log
pidfilepath=/opt/module/mongodb-cluster/pids/rs1-slave.pid
bind_ip_all=true
shardsvr=true
logappend=true
replSet=rs1
port=27021
oplogSize=10000
fork=true

# RS1ÁöÑarbiterÈÖçÁΩÆ
vim /opt/module/mongodb-cluster/etc/rs1-arbiter.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
dbpath=/opt/module/mongodb-cluster/data/rs1/arbiter
logpath=/opt/module/mongodb-cluster/log/rs1-arbiter.log
pidfilepath=/opt/module/mongodb-cluster/pids/rs1-arbiter.pid
bind_ip_all=true
shardsvr=true
logappend=true
replSet=rs1
port=27022
oplogSize=10000
fork=true
</code></pre><h5 id="ÂêØÂä®shard">ÂêØÂä®Shard</h5>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>bin/mongod --config etc/rs0-primary.conf
</span></span><span style="display:flex;"><span>bin/mongod --config etc/rs0-slave.conf
</span></span><span style="display:flex;"><span>bin/mongod --config etc/rs0-arbiter.conf
</span></span><span style="display:flex;"><span>bin/mongod --config etc/rs1-primary.conf
</span></span><span style="display:flex;"><span>bin/mongod --config etc/rs1-slave.conf
</span></span><span style="display:flex;"><span>bin/mongod --config etc/rs1-arbiter.conf
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="ÈÖçÁΩÆshard">ÈÖçÁΩÆShard</h5>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">bin/mongo --port 27010
rs.initiate({
    _id:&#34;rs0&#34;,
    members:[
        {_id:0,host:&#34;127.0.0.1:27010&#34;,priority:2},
        {_id:1,host:&#34;127.0.0.1:27011&#34;,priority:1},
        {_id:3,host:&#34;127.0.0.1:27012&#34;,arbiterOnly:true}
    ]
});

bin/mongo --port 27020
rs.initiate({
    _id:&#34;rs1&#34;,
    members:[
        {_id:0,host:&#34;127.0.0.1:27020&#34;,priority:2},
        {_id:1,host:&#34;127.0.0.1:27021&#34;,priority:1},
        {_id:3,host:&#34;127.0.0.1:27022&#34;,arbiterOnly:true}
    ]
});
</code></pre><h5 id="Êê≠Âª∫config-server">Êê≠Âª∫Config Server</h5>
<p>config serverÁöÑÂ§çÂà∂ÈõÜ‰∏≠‰∏çÂÖÅËÆ∏ÊúâÂçï‰ª≤Ë£ÅËäÇÁÇπ„ÄÇÂ§çÂà∂ÈõÜÂàùÂßãÂåñÂëΩ‰ª§‰∏≠Ôºå‰∏çÂÖÅËÆ∏ËÆæÁΩÆarbiterOnly:trueÂèÇÊï∞</p>
<pre tabindex="0"><code class="language-conf" data-lang="conf"># Config ServerÁöÑPrimaryÈÖçÁΩÆ
vim /opt/module/mongodb-cluster/etc/cf-primary.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
dbpath=/opt/module/mongodb-cluster/data/cf/primary
logpath=/opt/module/mongodb-cluster/log/cf-primary.log
pidfilepath=/opt/module/mongodb-cluster/pids/cf-primary.pid
bind_ip_all=true
logappend=true
replSet=cf
port=27030
oplogSize=10000
fork=true
configsvr=true                     ‰ª£Ë°®ÂΩìÂâçËäÇÁÇπÊòØ‰∏Ä‰∏™ÈÖçÁΩÆÊúçÂä°ËäÇÁÇπ

# Config ServerÁöÑs0ÈÖçÁΩÆ
vim /opt/module/mongodb-cluster/etc/cf-s0.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
dbpath=/opt/module/mongodb-cluster/data/cf/s0
logpath=/opt/module/mongodb-cluster/log/cf-s0.log
pidfilepath=/opt/module/mongodb-cluster/pids/cf-s0.pid
bind_ip_all=true
logappend=true
replSet=cf
port=27031
oplogSize=10000
fork=true
configsvr=true

# Config ServerÁöÑs1ÈÖçÁΩÆ
vim /opt/module/mongodb-cluster/etc/cf-s1.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
dbpath=/opt/module/mongodb-cluster/data/cf/s1
logpath=/opt/module/mongodb-cluster/log/cf-s1.log
pidfilepath=/opt/module/mongodb-cluster/pids/cf-s1.pid
bind_ip_all=true
logappend=true
replSet=cf
port=27032
oplogSize=10000
fork=true
configsvr=true
</code></pre><h5 id="ÂêØÂä®config-server">ÂêØÂä®Config Server</h5>
<pre tabindex="0"><code class="language-config" data-lang="config">bin/mongod --config etc/cf-primary.conf
bin/mongod --config etc/cf-s0.conf
bin/mongod --config etc/cf-s1.conf
</code></pre><h5 id="ÈÖçÁΩÆconfig-server">ÈÖçÁΩÆConfig Server</h5>
<pre tabindex="0"><code class="language-config" data-lang="config">bin/mongo --port 27030
rs.initiate({
    _id:&#34;cf&#34;,
    members:[
        {_id:0,host:&#34;127.0.0.1:27030&#34;,priority:2},
        {_id:1,host:&#34;127.0.0.1:27031&#34;,priority:1},
        {_id:3,host:&#34;127.0.0.1:27032&#34;,priority:1}
    ]
});
</code></pre><h5 id="Êê≠Âª∫router">Êê≠Âª∫Router</h5>
<p>ÁîüÊàêÁéØÂ¢É‰∏≠ÈÄöÂ∏∏Êèê‰æõÂ§ö‰∏™Ôºå‰ΩøÁî®keepaliveÂíåhaproxyÂÆûÁé∞È´òÂèØÁî®„ÄÇrouter‰∏çÈúÄË¶ÅÊï∞ÊçÆÂ∫ìÁõÆÂΩïÔºå‰∏çÈúÄË¶ÅÈÖçÁΩÆdbpath„ÄÇ</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">vim /opt/module/mongodb-cluster/etc/rt.conf
# ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö
configdb=cf/127.0.0.1:27030,127.0.0.1:27031,127.0.0.1:27032
logpath=/opt/module/mongodb-cluster/log/rt.log
pidfilepath=/opt/module/mongodb-cluster/pids/rt.pid
port=27040
fork=true
bind_ip_all=true
</code></pre><h5 id="ÂêØÂä®router">ÂêØÂä®Router</h5>
<p>Ê≥®ÊÑè‰ΩøÁî®ÁöÑÊòØ<code>mongos</code>ÂëΩ‰ª§</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>bin/mongos --config etc/rt.conf
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="ÈÖçÁΩÆrouter">ÈÖçÁΩÆRouter</h5>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb"># ËøûÊé•
bin/mongo --port 27040

# ËøõÂÖ•adminÂ∫ì
use admin

# Âä†ÂÖ•ÂàÜÁâá‰ø°ÊÅØ
db.runCommand({&#39;addShard&#39;:&#39;rs0/127.0.0.1:27010,127.0.0.1:27011,127.0.0.1:27012&#39;});
db.runCommand({&#39;addShard&#39;:&#39;rs1/127.0.0.1:27020,127.0.0.1:27021,127.0.0.1:27022&#39;});
</code></pre><h5 id="ÂºÄÂêØshard">ÂºÄÂêØShard</h5>
<p>È¶ñÂÖàÈúÄË¶ÅÂ∞ÜDatabaseÂºÄÂêØshardingÔºåÂê¶ÂàôÊï∞ÊçÆ‰ªçÁÑ∂Êó†Ê≥ïÂú®ÈõÜÁæ§‰∏≠ÂàÜÂ∏É„ÄÇÂç≥Êï∞ÊçÆÂ∫ì„ÄÅcollectionÈªòËÆ§‰∏∫non-sharding„ÄÇÂØπ‰∫énon-shardingÁöÑdatabaseÊàñËÄÖcollectionÂùá‰ºö‰øùÂ≠òÂú®primary shard‰∏äÔºåÁõ¥Âà∞ÂºÄÂêØshardingÊâç‰ºöÂú®ÈõÜÁæ§‰∏≠ÂàÜÂ∏É„ÄÇ</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb"># ÂàõÂª∫ÊµãËØïÂ∫ì
use test
# ÂºÄÂêØShardÔºåÂºÄÂêØÂàÜÁâáÂëΩ‰ª§ÂøÖÈ°ªÂú®adminÂ∫ì‰∏ãËøêË°å„ÄÇ
use admin
db.runCommand({ enablesharding: &#39;test&#39;})

# collectionÂºÄÂêØshardingÔºåÂú®Ê≠§‰πãÂâçÈúÄË¶ÅÂÖàÊåáÂÆöshard keyÂíåÂª∫Á´ã&#34;shard keyÁ¥¢Âºï&#34;
use test
db.users.ensureIndex({&#39;_id&#39;:&#39;hashed&#39;});
db.runCommand({ shardcollection: &#39;test.users&#39;, key: {&#39;_id&#39;: &#39;hashed&#39;}})

# usersÈõÜÂêàÂ∞Ü‰ΩøÁî®&#34;_id&#34;‰Ωú‰∏∫Á¨¨‰∏ÄÁª¥shard keyÔºåÈááÁî®hashedÂàÜÂå∫Ê®°ÂºèÔºåÂèØ‰ª•ÈÄöËøásh.status()Êü•ÁúãÊØè‰∏™chunkÁöÑÂàÜË£ÇÂå∫Èó¥
sh.status()
</code></pre><p>Âú®GridFSÂºÄÂêØShard</p>
<pre tabindex="0"><code class="language-mongodb" data-lang="mongodb">db.runCommand( { shardCollection : &#34;test.fs.chunks&#34; , key : {  files_id : 1 } } )
# Âú®GridFS‰∏≠ÔºåÂØπchunksÈõÜÂêàËøõË°åÂàÜÁâáÊó∂ÔºåÂè™Êúâ‰∏§‰∏™ÁâáÈîÆÂèØ‰ª•ÈÄâÊã©Ôºå{ files_id : 1 , n : 1 } ‰∏é {  files_id : 1 }
</code></pre><h2 id="ÂçÅ‰∏Äspring-data-mongodb">ÂçÅ‰∏Ä„ÄÅSpring Data Mongodb</h2>
<p><strong>Á¨¨‰∏ÄÊ≠•ÔºöÂºïÂÖ•‰æùËµñ</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;artifactId&gt;</span>spring-boot-starter-data-mongodb<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨‰∫åÊ≠•ÔºöÈÖçÁΩÆYAML</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000080">spring</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">data</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">mongodb</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#000080">database</span>:<span style="color:#bbb"> </span>test<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#000080">host</span>:<span style="color:#bbb"> </span><span style="color:#099">192.168.22.161</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#000080">port</span>:<span style="color:#bbb"> </span><span style="color:#099">27017</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#998;font-style:italic"># Â¶ÇÊûúÈúÄË¶ÅËÆ§ËØÅÈúÄË¶Å‰∏ãÈù¢‰∏âË°å</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#000080">authentication-database</span>:<span style="color:#bbb"> </span>admin<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#000080">password</span>:<span style="color:#bbb"> </span>root<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#000080">username</span>:<span style="color:#bbb"> </span>root<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>Á¨¨‰∏âÊ≠•ÔºöÂª∫Á´ãÂÆû‰ΩìÁ±ª</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Document</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#3c5d5d;font-weight:bold">@Data</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// Â¶ÇÊûúÊòØÈõÜÁæ§Ê®°ÂºèÈúÄË¶ÅÊåáÂÆöShard </span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#3c5d5d;font-weight:bold">@Sharded</span>(shardKey<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>{<span style="color:#d14">&#34;_id&#34;</span>},<span style="color:#bbb"> </span>shardingStrategy<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ShardingStrategy.<span style="color:#008080">HASH</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">Student</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// ÊåáÂÆöIDÔºåÂ¶ÇÊûúÊòØStringÊàñËÄÖObjectIdÂèØËá™Âä®ÁîüÊàêID</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Ê≥®ÊÑèString‰ΩøÁî®Ëá™Âä®ÁîüÊàêÊó∂Êõ¥Êñ∞Êìç‰ΩúÊó†Ê≥ïËøõË°å</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@MongoId</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span>ObjectId<span style="color:#bbb"> </span>id;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Â¶ÇÊûúÂ≠óÊÆµÂêçÂíåÊï∞ÊçÆÂ∫ìÂêçÁß∞‰∏ç‰∏ÄËá¥ÈúÄË¶ÅÊåáÂÆö</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Field</span>(name<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#d14">&#34;name&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>name;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span>Integer<span style="color:#bbb"> </span>age;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span>Boolean<span style="color:#bbb"> </span>isMan;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span>List<span style="color:#000;font-weight:bold">&lt;</span>String<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>course;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ÂàõÂª∫ÊñáÊ°£">ÂàõÂª∫ÊñáÊ°£</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// Ê∑ªÂä†ÊñáÊ°£</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">addDocument</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Student<span style="color:#bbb"> </span>student<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Student();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setName</span>(<span style="color:#d14">&#34;kun&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setAge</span>(18);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setIsMan</span>(<span style="color:#000;font-weight:bold">true</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Student<span style="color:#bbb"> </span>res<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">insert</span>(student);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// ID‰∏çÂ≠òÂú®Êó∂SaveÂèØÁî®‰∫éÊñ∞Â¢ûÊñáÊ°£</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Student res = mongoTemplate.save(student);</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(res);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// ÊâπÈáèÊ∑ªÂä†ÊñáÊ°£</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">addDocuments</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>List<span style="color:#000;font-weight:bold">&lt;</span>Student<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>ArrayList<span style="color:#000;font-weight:bold">&lt;&gt;</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Student<span style="color:#bbb"> </span>student<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Student();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setName</span>(<span style="color:#d14">&#34;kun&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setAge</span>(18);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setIsMan</span>(<span style="color:#000;font-weight:bold">true</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setCourse</span>(Arrays.<span style="color:#008080">asList</span>(<span style="color:#d14">&#34;spring&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;java&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;mysql&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>students.<span style="color:#008080">add</span>(student);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Student();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setName</span>(<span style="color:#d14">&#34;jack&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setAge</span>(18);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setIsMan</span>(<span style="color:#000;font-weight:bold">true</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setCourse</span>(Arrays.<span style="color:#008080">asList</span>(<span style="color:#d14">&#34;php&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;mysql&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>students.<span style="color:#008080">add</span>(student);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Student();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setName</span>(<span style="color:#d14">&#34;lily&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setAge</span>(16);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setIsMan</span>(<span style="color:#000;font-weight:bold">false</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setCourse</span>(Arrays.<span style="color:#008080">asList</span>(<span style="color:#d14">&#34;vue&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;php&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>students.<span style="color:#008080">add</span>(student);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Student();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setName</span>(<span style="color:#d14">&#34;jane&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setAge</span>(18);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setIsMan</span>(<span style="color:#000;font-weight:bold">false</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setCourse</span>(Arrays.<span style="color:#008080">asList</span>(<span style="color:#d14">&#34;html&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;js&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>students.<span style="color:#008080">add</span>(student);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>mongoTemplate.<span style="color:#008080">insertAll</span>(students);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="Êõ¥Êñ∞ÊñáÊ°£-1">Êõ¥Êñ∞ÊñáÊ°£</h3>
<ul>
<li>
<p>‰ΩøÁî®save‰øÆÊîπÔºàË¶ÜÁõñÊõ¥Êñ∞Ôºâ</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">saveUpdateDocument</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Student<span style="color:#bbb"> </span>student<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Student();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setId</span>(<span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>ObjectId(<span style="color:#d14">&#34;601253d33f108b62de913d54&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setName</span>(<span style="color:#d14">&#34;kun&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setAge</span>(20);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// IDÂ≠òÂú®Êó∂SaveÂèØÁî®‰∫éÊõ¥Êñ∞ÊñáÊ°£</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Student<span style="color:#bbb"> </span>res<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">save</span>(student);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(res);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>‰ΩøÁî®ËøêÁÆóÁ¨¶ÂÆûÁé∞ÔºàË°®ËææÂºèÊõ¥Êñ∞Ôºâ</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">expressUpdateDocument</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Êü•ËØ¢ÂØπË±°</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Query<span style="color:#bbb"> </span>query<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Query();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Criteria<span style="color:#bbb"> </span>criteria<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Criteria.<span style="color:#008080">where</span>(<span style="color:#d14">&#34;name&#34;</span>).<span style="color:#008080">is</span>(<span style="color:#d14">&#34;kun&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>query.<span style="color:#008080">addCriteria</span>(criteria);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Êõ¥Êñ∞Â≠óÊÆµ</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Update<span style="color:#bbb"> </span>update<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Update();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>update.<span style="color:#008080">inc</span>(<span style="color:#d14">&#34;age&#34;</span>,<span style="color:#bbb"> </span>1);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// updateFirst‰∏∫Êõ¥Êñ∞Á¨¨‰∏Ä‰∏™ÂåπÈÖçÊñáÊ°£</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>UpdateResult<span style="color:#bbb"> </span>updateResult<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">updateMulti</span>(query,<span style="color:#bbb"> </span>update,<span style="color:#bbb"> </span>Student.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(updateResult.<span style="color:#008080">getModifiedCount</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="Âà†Èô§ÊñáÊ°£-1">Âà†Èô§ÊñáÊ°£</h3>
<ul>
<li>
<p>Ê†πÊçÆ‰∏ªÈîÆÂà†Èô§</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">deleteDocument</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Student<span style="color:#bbb"> </span>student<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Student();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>student.<span style="color:#008080">setId</span>(<span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>ObjectId(<span style="color:#d14">&#34;601253d33f108b62de913d54&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>DeleteResult<span style="color:#bbb"> </span>deleteResult<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">remove</span>(student);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(deleteResult.<span style="color:#008080">getDeletedCount</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>Ê†πÊçÆÊù°‰ª∂ËøõË°åÂà†Èô§</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">deleteDocumentByCondition</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Criteria<span style="color:#bbb"> </span>criteria<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Criteria.<span style="color:#008080">where</span>(<span style="color:#d14">&#34;name&#34;</span>).<span style="color:#008080">is</span>(<span style="color:#d14">&#34;kun&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>DeleteResult<span style="color:#bbb"> </span>deleteResult<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">remove</span>(Query.<span style="color:#008080">query</span>(criteria),<span style="color:#bbb"> </span>Student.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(deleteResult.<span style="color:#008080">getDeletedCount</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h3 id="Êü•ËØ¢ÊñáÊ°£-1">Êü•ËØ¢ÊñáÊ°£</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// Êü•ËØ¢ÂÖ®ÈÉ®ÊñáÊ°£</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">findAll</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>List<span style="color:#000;font-weight:bold">&lt;</span>Student<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">findAll</span>(Student.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// Êü•ËØ¢Âçï‰∏™ÂØπË±°ÔºåÂ¶ÇÊûúÊúâÂ§ö‰∏™ÁªìÊûúÂè™ËøîÂõûÁ¨¨‰∏Ä‰∏™</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">findOne</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Criteria<span style="color:#bbb"> </span>criteria<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Criteria.<span style="color:#008080">where</span>(<span style="color:#d14">&#34;name&#34;</span>).<span style="color:#008080">is</span>(<span style="color:#d14">&#34;kun&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Student<span style="color:#bbb"> </span>student<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">findOne</span>(Query.<span style="color:#008080">query</span>(criteria),Student.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// Â∏¶ÊúâÊù°‰ª∂ÁöÑÊü•ËØ¢Â§ö‰∏™</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">findByCondition</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Query<span style="color:#bbb"> </span>query<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Query(Criteria.<span style="color:#008080">where</span>(<span style="color:#d14">&#34;age&#34;</span>).<span style="color:#008080">gte</span>(3));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>List<span style="color:#000;font-weight:bold">&lt;</span>Student<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">find</span>(query,<span style="color:#bbb"> </span>Student.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// Ê†πÊçÆ‰∏ªÈîÆËøõË°åÊü•ËØ¢</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">findById</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Student<span style="color:#bbb"> </span>student<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">findById</span>(<span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>ObjectId(<span style="color:#d14">&#34;601266467bb99058c4fc58d6&#34;</span>),<span style="color:#bbb"> </span>Student.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// Ê†πÊçÆÂ≠óÊÆµÊòØÂê¶‰∏∫Á©∫ËøõË°åÊü•ËØ¢</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">findByIsNull</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Query<span style="color:#bbb"> </span>query<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Query(Criteria.<span style="color:#008080">where</span>(<span style="color:#d14">&#34;course&#34;</span>).<span style="color:#008080">exists</span>(<span style="color:#000;font-weight:bold">true</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>List<span style="color:#000;font-weight:bold">&lt;</span>Student<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">find</span>(query,<span style="color:#bbb"> </span>Student.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// Ê†πÊçÆÊ≠£ÂàôÊü•ËØ¢</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">findByReg</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Criteria<span style="color:#bbb"> </span>criteria<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Criteria.<span style="color:#008080">where</span>(<span style="color:#d14">&#34;name&#34;</span>).<span style="color:#008080">regex</span>(<span style="color:#d14">&#34;.*n$&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>List<span style="color:#000;font-weight:bold">&lt;</span>Student<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">find</span>(Query.<span style="color:#008080">query</span>(criteria),<span style="color:#bbb"> </span>Student.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// Â§öÊù°‰ª∂Êü•ËØ¢</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">findByMultiAndCondition</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Criteria<span style="color:#bbb"> </span>criteria<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Criteria();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Criteria<span style="color:#bbb"> </span>ageCriteria<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Criteria.<span style="color:#008080">where</span>(<span style="color:#d14">&#34;age&#34;</span>).<span style="color:#008080">lt</span>(20);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Criteria<span style="color:#bbb"> </span>isManCriteria<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Criteria.<span style="color:#008080">where</span>(<span style="color:#d14">&#34;isMan&#34;</span>).<span style="color:#008080">is</span>(<span style="color:#000;font-weight:bold">false</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>criteria.<span style="color:#008080">andOperator</span>(ageCriteria,<span style="color:#bbb"> </span>isManCriteria);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>List<span style="color:#000;font-weight:bold">&lt;</span>Student<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">find</span>(Query.<span style="color:#008080">query</span>(criteria),<span style="color:#bbb"> </span>Student.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">findByMultiOrCondition</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Criteria<span style="color:#bbb"> </span>criteria<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Criteria();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Criteria<span style="color:#bbb"> </span>ageCriteria<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Criteria.<span style="color:#008080">where</span>(<span style="color:#d14">&#34;age&#34;</span>).<span style="color:#008080">lt</span>(20);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Criteria<span style="color:#bbb"> </span>isManCriteria<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Criteria.<span style="color:#008080">where</span>(<span style="color:#d14">&#34;isMan&#34;</span>).<span style="color:#008080">is</span>(<span style="color:#000;font-weight:bold">true</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>criteria.<span style="color:#008080">orOperator</span>(ageCriteria,<span style="color:#bbb"> </span>isManCriteria);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>List<span style="color:#000;font-weight:bold">&lt;</span>Student<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">find</span>(Query.<span style="color:#008080">query</span>(criteria),<span style="color:#bbb"> </span>Student.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>students.<span style="color:#008080">stream</span>().<span style="color:#008080">forEach</span>(System.<span style="color:#008080">out</span>::println);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// Êü•ËØ¢ÂéªÈáçÂ§çÁªìÊûú</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">findDistinct</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Á¨¨‰∏Ä‰∏™ÂèÇÊï∞Ôºö Êü•ËØ¢Êù°‰ª∂query</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Á¨¨‰∫å‰∏™ÂèÇÊï∞Ôºö Ê†πÊçÆÂì™‰∏™Â±ûÊÄßÂéªÈáçÂ§ç</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Á¨¨‰∏â‰∏™ÂèÇÊï∞Ôºö Â±ûÊÄßÊâÄÂú®ÂÆû‰ΩìÁ±ª</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Á¨¨Âõõ‰∏™ÂèÇÊï∞Ôºö Â±ûÊÄßÁöÑÁ±ªÂûãÔºåÊ≠§Á±ªÂûã‰Ωú‰∏∫ÁªìÊûú‰∏≠ListÈõÜÂêàÁöÑÊ≥õÂûã</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>List<span style="color:#000;font-weight:bold">&lt;</span>Integer<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>ages<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">findDistinct</span>(<span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Query(),<span style="color:#bbb"> </span><span style="color:#d14">&#34;age&#34;</span>,<span style="color:#bbb"> </span>Student.<span style="color:#008080">class</span>,<span style="color:#bbb"> </span>Integer.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// ÁªìÊûúÊéíÂ∫è</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">findSort</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Query<span style="color:#bbb"> </span>query<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Query();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>query.<span style="color:#008080">with</span>(Sort.<span style="color:#008080">by</span>(Sort.<span style="color:#008080">Direction</span>.<span style="color:#008080">DESC</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;age&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>List<span style="color:#000;font-weight:bold">&lt;</span>Student<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">find</span>(query,<span style="color:#bbb"> </span>Student.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// ÁªìÊûúÂàÜÈ°µ</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">findPage</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Query<span style="color:#bbb"> </span>query<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Query();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Á¨¨‰∏Ä‰∏™ÂèÇÊï∞PageÔºå‰ªé0ÂºÄÂßã</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Á¨¨‰∫å‰∏™ÂèÇÊï∞Size</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>query.<span style="color:#008080">with</span>(PageRequest.<span style="color:#008080">of</span>(1,<span style="color:#bbb"> </span>2));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>List<span style="color:#000;font-weight:bold">&lt;</span>Student<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>students<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">find</span>(query,<span style="color:#bbb"> </span>Student.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ËÅöÂêàÊìç‰Ωú">ËÅöÂêàÊìç‰Ωú</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// ÁªüËÆ°ÊÄªÊï∞</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">aggCount</span>(){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>TypedAggregation<span style="color:#000;font-weight:bold">&lt;</span>Student<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>aggregation<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>TypedAggregation.<span style="color:#008080">newAggregation</span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Student.<span style="color:#008080">class</span>,<span style="color:#bbb">                                                                     
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Aggregation.<span style="color:#008080">group</span>().<span style="color:#008080">count</span>().<span style="color:#008080">as</span>(<span style="color:#d14">&#34;count&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>AggregationResults<span style="color:#000;font-weight:bold">&lt;</span>Map<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>results<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">aggregate</span>(aggregation,<span style="color:#bbb"> </span>Map.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(results.<span style="color:#008080">getUniqueMappedResult</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(results.<span style="color:#008080">getUniqueMappedResult</span>().<span style="color:#008080">get</span>(<span style="color:#d14">&#34;count&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// ÂàÜÁªÑÁªüËÆ°ÊÄªÊï∞</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">aggCountByGroup</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>TypedAggregation<span style="color:#000;font-weight:bold">&lt;</span>Student<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>aggregation<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>TypedAggregation.<span style="color:#008080">newAggregation</span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Student.<span style="color:#008080">class</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Aggregation.<span style="color:#008080">group</span>(<span style="color:#d14">&#34;name&#34;</span>).<span style="color:#008080">count</span>().<span style="color:#008080">as</span>(<span style="color:#d14">&#34;count&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>AggregationResults<span style="color:#000;font-weight:bold">&lt;</span>Map<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>results<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">aggregate</span>(aggregation,<span style="color:#bbb"> </span>Map.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// ËøîÂõûÁöÑ_id ‰ª£Ë°®ÂàÜÁªÑÂ≠óÊÆµÔºåÂ¶ÇÊûúÂ≠óÊÆµÊúâÂ§ö‰∏™Âàô_id‰∏∫MapÔºàkey‰∏∫Â≠óÊÆµÂêçÔºåvalue‰∏∫ÂÄºÔºâ</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(Map<span style="color:#bbb"> </span>mappedResult<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>results.<span style="color:#008080">getMappedResults</span>())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(mappedResult.<span style="color:#008080">get</span>(<span style="color:#d14">&#34;_id&#34;</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span><span style="color:#d14">&#34; - &#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>mappedResult.<span style="color:#008080">get</span>(<span style="color:#d14">&#34;count&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// ÂÖ∑ÊúâÊù°‰ª∂ÁöÑÂàÜÁªÑ</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">aggCount</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>TypedAggregation<span style="color:#000;font-weight:bold">&lt;</span>Student<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>aggregation<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>TypedAggregation.<span style="color:#008080">newAggregation</span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Student.<span style="color:#008080">class</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Aggregation.<span style="color:#008080">match</span>(Criteria.<span style="color:#008080">where</span>(<span style="color:#d14">&#34;age&#34;</span>).<span style="color:#008080">gt</span>(16)),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Aggregation.<span style="color:#008080">group</span>().<span style="color:#008080">count</span>().<span style="color:#008080">as</span>(<span style="color:#d14">&#34;count&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>AggregationResults<span style="color:#000;font-weight:bold">&lt;</span>Map<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>results<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mongoTemplate.<span style="color:#008080">aggregate</span>(aggregation,<span style="color:#bbb"> </span>Map.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(results.<span style="color:#008080">getUniqueMappedResult</span>().<span style="color:#008080">get</span>(<span style="color:#d14">&#34;count&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="gridfsÊìç‰Ωú">GridFSÊìç‰Ωú</h3>
<p>GirdFSÊòØMongoDBÊèê‰æõÁöÑÁî®‰∫éÊåÅ‰πÖÂåñÂ≠òÂÇ®Êñá‰ª∂ÁöÑÊ®°Âùó„ÄÇÂú®GridFSÂ≠òÂÇ®Êñá‰ª∂ÊòØÂ∞ÜÊñá‰ª∂ÂàÜÂùóÂ≠òÂÇ®ÔºåÊñá‰ª∂‰ºöÊåâÁÖß256KBÁöÑÂ§ßÂ∞èÂàÜÂâ≤ÊàêÂ§ö‰∏™ÂùóËøõË°åÂ≠òÂÇ®ÔºåGridFS‰ΩøÁî®‰∏§‰∏™ÈõÜÂêàÔºàcollectionÔºâÂ≠òÂÇ®Êñá‰ª∂Ôºå‰ªéGridFS‰∏≠ËØªÂèñÊñá‰ª∂Ë¶ÅÂØπÊñá‰ª∂ÁöÑÂêÑÂêÑÂùóËøõË°åÁªÑË£Ö„ÄÅÂêàÂπ∂„ÄÇ</p>
<ul>
<li>‰∏Ä‰∏™ÈõÜÂêàÊòØchunksÔºåÁî®‰∫éÂ≠òÂÇ®Êñá‰ª∂ÁöÑ‰∫åËøõÂà∂Êï∞ÊçÆ</li>
<li>‰∏Ä‰∏™ÈõÜÂêàÊòØfilesÔºåÁî®‰∫éÂ≠òÂÇ®Êñá‰ª∂ÁöÑÂÖÉÊï∞ ÊçÆ‰ø°ÊÅØ(Êñá‰ª∂ÂêçÁß∞„ÄÅÂùóÂ§ßÂ∞è„ÄÅ‰∏ä‰º†Êó∂Èó¥Á≠â‰ø°ÊÅØ)</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">// ‰∏ä‰º†Êñá‰ª∂</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">gridFsUpload</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>FileNotFoundException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//ÈÄâÊã©Ë¶ÅÂ≠òÂÇ®ÁöÑÊñá‰ª∂</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>File<span style="color:#bbb"> </span>file<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>File(<span style="color:#d14">&#34;C:\\Users\\kun\\Desktop\\TIMÊà™Âõæ.png&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>InputStream<span style="color:#bbb"> </span>inputStream<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>FileInputStream(file);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//Â≠òÂÇ®Êñá‰ª∂Âπ∂Ëµ∑ÂêçÁß∞</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>ObjectId<span style="color:#bbb"> </span>objectId<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>gridFsTemplate.<span style="color:#008080">store</span>(inputStream,<span style="color:#bbb"> </span><span style="color:#d14">&#34;TIMÊà™Âõæ.png&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>String<span style="color:#bbb"> </span>id<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>objectId.<span style="color:#008080">toString</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//Ëé∑ÂèñÂà∞Êñá‰ª∂ÁöÑidÔºåÂèØ‰ª•‰ªéÊï∞ÊçÆÂ∫ì‰∏≠Êü•Êâæ</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(id);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">// Êü•ËØ¢‰∏ãËΩΩÊñá‰ª∂</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">queryFile</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// Ê†πÊçÆidÊü•ÊâæÊñá‰ª∂</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">// GridFSFile gridFSFile = gridFsTemplate.findOne(</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//    new Query(Criteria.where(&#34;_id&#34;).is(&#34;60136de452d6203936d1b035&#34;)));</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>GridFSFile<span style="color:#bbb"> </span>gridFSFile<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>gridFsTemplate.<span style="color:#008080">findOne</span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Query(Criteria.<span style="color:#008080">where</span>(<span style="color:#d14">&#34;filename&#34;</span>).<span style="color:#008080">is</span>(<span style="color:#d14">&#34;TIMÊà™Âõæ.png&#34;</span>)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//ÊâìÂºÄ‰∏ãËΩΩÊµÅÂØπË±°</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>GridFSDownloadStream<span style="color:#bbb"> </span>gridFS<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>gridFSBucket.<span style="color:#008080">openDownloadStream</span>(gridFSFile.<span style="color:#008080">getObjectId</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//ÂàõÂª∫gridFsSourceÔºåÁî®‰∫éËé∑ÂèñÊµÅÂØπË±°</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>GridFsResource<span style="color:#bbb"> </span>gridFsResource<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>GridFsResource(gridFSFile,gridFS);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>File<span style="color:#bbb"> </span>file<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>File(<span style="color:#d14">&#34;D:\\&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>gridFsResource.<span style="color:#008080">getFilename</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>IoUtil.<span style="color:#008080">copy</span>(<span style="color:#bbb"> </span>gridFsResource.<span style="color:#008080">getInputStream</span>(),<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>FileOutputStream(file));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//Âà†Èô§Êñá‰ª∂</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#3c5d5d;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">delFile</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//Ê†πÊçÆÊñá‰ª∂idÂà†Èô§fs.filesÂíåfs.chunks‰∏≠ÁöÑËÆ∞ÂΩï</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>gridFsTemplate.<span style="color:#008080">delete</span>(Query.<span style="color:#008080">query</span>(Criteria.<span style="color:#008080">where</span>(<span style="color:#d14">&#34;_id&#34;</span>).<span style="color:#008080">is</span>(<span style="color:#d14">&#34;6013678f7d212159fe3a0a64&#34;</span>)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div>
    </div>

    

    <div class="container-comment-giscus">
        <script src="https://giscus.app/client.js"
        data-repo="loveminimal/comment"
        data-repo-id="R_kgDOJNJQ8g"
        data-category="General"
        data-category-id="DIC_kwDOJNJQ8s4CYl0m"
        data-mapping="title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="noborder_light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
        </script>
</div>
</div>

        </div>
        <div id="footer"><div class="container-footer">
    

    <div class="beian">
        
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41092802000242">
            

        </a>

        
        <a href="//beian.miit.gov.cn" target="_blank">
            
            <span class="some">icp...<span>
            
        </a>
    </div>

    
    <div class="info">
        
        <a href="https://github.com/loveminimal/hugo-theme-virgo">üïäÔ∏è</a> 2016 - <span id="info-date"></span>
    </div>

</div></div>
        <div class="cool-after" style="
            
                background-color: rgba(255, 255, 255, 0.49); 
                backdrop-filter: saturate(100%) blur(6px);
            
            "></div>
    </body>
</html>
