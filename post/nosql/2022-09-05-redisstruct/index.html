<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="redisÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ - https://hobocat.github.io/post/nosql/2022-09-05-redisstruct/">
    <meta name="author" content="Jack - https://hobocat.github.io/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>redisÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ</title>
    
    <base target="_blank">
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    
    
    
    
    <link rel="stylesheet" href="https://hobocat.github.io/style.min.94e7ed14b48117025ebd1148adc11f7268f1ebf50d97297ac663edf1aa6f52dc.css">
    
    <script>const DARK =  false ;</script>
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate cool">
        <div class="container-floating-box">
	<div class="box box1"></div>
	<div class="box box11"></div>
	<div class="box box12"></div>
	<div class="box box2"></div>
	<div class="box box3"></div>
	<div class="box box4"></div>
	<div class="box box5"></div>
	<div class="box box6"></div>
	<div class="box box7"></div>
	<div class="box box8"></div>
	<div class="box box9"></div>
</div>
        <div class="cool-before" style="background: url('/imgs/bg/wallhaven-6qr21l.jpg') left top/100% no-repeat fixed;"></div>
        <div id="header" class=""><div class="container-header">

    
    
    
    <div class="right">
        
        <h1 class="title">redisÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ</h1>
    
        
        
            <div id="toc">üìú</div>
        
    </div>
</div>
</div>
        <div id="content">










<div class="container-main container-page ">

    

    
    
    
    <div class="rel">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        <div class="curtag-desc">
            <a href="https://hobocat.github.io/tags/nosql/"><img src="/imgs/icons/tag.svg" width="16" /> Áõ∏ÂÖ≥ÊñáÁ´†ÔºöNoSQL <sup>3</sup></a>
        </div>

        <div class="curtag-post">
            
            
            
                <div class="curtag-post-item ">
                    <a href="https://hobocat.github.io/post/nosql/2021-01-29-mongodb/">MongoDB‰ΩøÁî®ËØ¶Ëß£</a>
                </div>
                
                
            
            
                <div class="curtag-post-item ">
                    <a href="https://hobocat.github.io/post/nosql/2019-03-21-redis/">Redis‰ΩøÁî®ËØ¶Ëß£</a>
                </div>
                
                
            
            
                <div class="curtag-post-item curtag-post-item--active">
                    <a href="https://hobocat.github.io/post/nosql/2022-09-05-redisstruct/">redisÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ</a>
                </div>
                
                
        </div>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </div>
    
    

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="7409" width="12" height="12">
                <path
                    d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z"
                    p-id="7410" fill="#adb5bd"></path>
            </svg>
            2022-09-05&nbsp;&nbsp;&nbsp;
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="23838" width="11" height="11">
                <path
                    d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z"
                    p-id="23839" fill="#adb5bd"></path>
            </svg>
            2024-05-15&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="33866" width="12" height="12">
                <path
                    d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z"
                    fill="#adb5bd" p-id="33867"></path>
                <path
                    d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z"
                    fill="#adb5bd" p-id="33868"></path>
            </svg>
            6312 Â≠ó</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="32892" width="12" height="12">
                <path
                    d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z"
                    p-id="32893" fill="#adb5bd"></path>
                <path
                    d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z"
                    p-id="32894" fill="#adb5bd"></path>
            </svg>
            13 ÂàÜÈíü</span>
        <div class="container-ctgtag">
	<div class="taxonomy">
		<div class="tag">
			
			
			<a href="/tags/nosql">NoSQL</a>
			
		</div>
	</div>
</div>
        
    </div>

    <div class="toc">
        <div class="container-page-operation">
	<div class="page-operation">
		<div><a href="/"><img src="/imgs/icons/home-2.svg" alt=""></a></div>
		<div><a href="/nav"><img src="/imgs/icons/iov-navigate-1.svg" alt=""></a></div>
		<div><a href="/wiki"><img src="/imgs/icons/wiki.svg" alt=""></a></div>
		<div><a href="/tags"><img src="/imgs/icons/treetags.svg" alt=""></a></div>
		<div id="light-dark"><a><img src="/imgs/icons/moon2.svg" alt=""></a></div>
		<div><a href="#"><img src="/imgs/icons/up2.svg" alt=""></a></div>
	</div>
</div>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#‰∏ÄÂâçÁΩÆÁü•ËØÜÊÄªËßà">‰∏Ä„ÄÅÂâçÁΩÆÁü•ËØÜ&amp;ÊÄªËßà</a>
      <ul>
        <li><a href="#ÂØπË±°ÁªìÊûÑÂÖ®Ë≤å">ÂØπË±°ÁªìÊûÑÂÖ®Ë≤å</a></li>
        <li><a href="#ÂëΩ‰ª§ÁöÑÁ±ªÂûãÊ£ÄÊü•ÂíåÂ§öÊÄÅË°å‰∏∫">ÂëΩ‰ª§ÁöÑÁ±ªÂûãÊ£ÄÊü•ÂíåÂ§öÊÄÅË°å‰∏∫</a></li>
      </ul>
    </li>
    <li><a href="#‰∫åsimpledynamicstring">‰∫å„ÄÅSimpleDynamicString</a>
      <ul>
        <li><a href="#ÁªìÊûÑ‰ªãÁªç">ÁªìÊûÑ‰ªãÁªç</a></li>
        <li><a href="#ÂàÜÈÖçÁªÜËäÇ">ÂàÜÈÖçÁªÜËäÇ</a></li>
        <li><a href="#ÂÆûÁé∞ÁªÜËäÇÊäÄÂ∑ß‰∏é‰ºòÁÇπ">ÂÆûÁé∞ÁªÜËäÇÊäÄÂ∑ß‰∏é‰ºòÁÇπ</a></li>
      </ul>
    </li>
    <li><a href="#‰∏âintset">‰∏â„ÄÅIntSet</a></li>
    <li><a href="#Âõõdict">Âõõ„ÄÅDict</a></li>
    <li><a href="#‰∫îzskiplist">‰∫î„ÄÅZSkipList</a></li>
    <li><a href="#ÂÖ≠ziplist">ÂÖ≠„ÄÅZipList</a></li>
    <li><a href="#‰∏Équicklist">‰∏É„ÄÅQuickList</a></li>
    <li><a href="#ÂÖ´Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂ∫ïÂ±ÇÁºñÁ†ÅÂú∫ÊôØ">ÂÖ´„ÄÅÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂ∫ïÂ±ÇÁºñÁ†ÅÂú∫ÊôØ</a>
      <ul>
        <li><a href="#string">String</a></li>
        <li><a href="#list">List</a></li>
        <li><a href="#hash">Hash</a></li>
        <li><a href="#set">Set</a></li>
        <li><a href="#zset">ZSet</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

    <div class='content  '>
        <h2 id="‰∏ÄÂâçÁΩÆÁü•ËØÜÊÄªËßà">‰∏Ä„ÄÅÂâçÁΩÆÁü•ËØÜ&amp;ÊÄªËßà</h2>
<h3 id="ÂØπË±°ÁªìÊûÑÂÖ®Ë≤å">ÂØπË±°ÁªìÊûÑÂÖ®Ë≤å</h3>
<p>RedisÁöÑÊØèÁßçÂØπË±°ÂÖ∂ÂÆûÈÉΩÁî±<strong>ÂØπË±°ÁªìÊûÑ(redisObject)</strong> ‰∏é ÂØπÂ∫îÁºñÁ†ÅÁöÑÊï∞ÊçÆÁªìÊûÑÁªÑÂêàËÄåÊàêÔºåÊØèÁßçÂØπË±°Á±ªÂûãÂØπÂ∫îËã•Âπ≤ÁßçÁºñÁ†ÅÊñπÂºèÔºå‰∏çÂêåÁöÑÁºñÁ†ÅÊñπÂºèÊâÄÂØπÂ∫î‰∏çÂêåÁöÑÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * Redis ÂØπË±°
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">typedef</span> <span style="color:#000;font-weight:bold">struct</span> <span style="color:#458;font-weight:bold">redisObject</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#900;font-weight:bold">type</span>:<span style="color:#099">4</span>;     <span style="color:#998;font-style:italic">// Á±ªÂûã
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#900;font-weight:bold">encoding</span>:<span style="color:#099">4</span>; <span style="color:#998;font-style:italic">// ÁºñÁ†ÅÊñπÂºè
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#900;font-weight:bold">lru</span>:<span style="color:#099">24</span>;     <span style="color:#998;font-style:italic">// ËÆ∞ÂΩïÊúÄÂêé‰∏ÄÊ¨°ËÆøÈóÆÊó∂Èó¥ÔºàÁõ∏ÂØπ‰∫élru_clockÔºâ; ÊàñËÄÖLFUÔºàÊúÄÂ∞ë‰ΩøÁî®ÁöÑÊï∞ÊçÆÔºö8‰ΩçÈ¢ëÁéáÔºå16‰ΩçËÆøÈóÆÊó∂Èó¥Ôºâ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">int</span> refcount;        <span style="color:#998;font-style:italic">// ÂºïÁî®ËÆ°Êï∞
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">void</span> <span style="color:#000;font-weight:bold">*</span>ptr;           <span style="color:#998;font-style:italic">// ÊåáÂêëÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑÂÆû‰æã
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>
</span></span><span style="display:flex;"><span>} robj;
</span></span></code></pre></td></tr></table>
</div>
</div><p>ÂØπÂ∫îÂ¶Ç‰∏ãÁªìÊûÑ</p>
<p><img src="/img/redis/redisObject.png" alt="redisObject"></p>
<ul>
<li>typeËÆ∞ÂΩï‰∫ÜÂØπË±°ÊâÄ‰øùÂ≠òÁöÑÂÄºÁöÑÁ±ªÂûã</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">* ÂØπË±°Á±ªÂûã
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_STRING 0 </span><span style="color:#998;font-style:italic">// Â≠óÁ¨¶‰∏≤
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_LIST 1   </span><span style="color:#998;font-style:italic">// ÂàóË°®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_SET 2    </span><span style="color:#998;font-style:italic">// ÈõÜÂêà
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_ZSET 3   </span><span style="color:#998;font-style:italic">// ÊúâÂ∫èÈõÜ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_HASH 4   </span><span style="color:#998;font-style:italic">// ÂìàÂ∏åË°®
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>encodingËÆ∞ÂΩï‰∫ÜÂØπË±°ÊâÄ‰øùÂ≠òÁöÑÂÄºÁöÑÁºñÁ†Å</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">* ÂØπË±°ÁºñÁ†Å
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">*/</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_ENCODING_RAW 0       </span><span style="color:#998;font-style:italic">/* Raw representation */</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_ENCODING_INT 1       </span><span style="color:#998;font-style:italic">/* Encoded as integer */</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_ENCODING_HT 2        </span><span style="color:#998;font-style:italic">/* Encoded as hash table */</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_ENCODING_ZIPLIST 5   </span><span style="color:#998;font-style:italic">/* Encoded as ziplist */</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_ENCODING_INTSET 6    </span><span style="color:#998;font-style:italic">/* Encoded as intset */</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_ENCODING_SKIPLIST 7  </span><span style="color:#998;font-style:italic">/* Encoded as skiplist */</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_ENCODING_EMBSTR 8    </span><span style="color:#998;font-style:italic">/* Embedded sds string encoding */</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_ENCODING_QUICKLIST 9 </span><span style="color:#998;font-style:italic">/* Encoded as linked list of ziplists */</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define OBJ_ENCODING_STREAM 10   </span><span style="color:#998;font-style:italic">/* Encoded as a radix tree of listpacks */</span><span style="color:#999;font-weight:bold;font-style:italic">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>ptrÊòØ‰∏Ä‰∏™ÊåáÈíàÔºåÊåáÂêëÂÆûÈôÖ‰øùÂ≠òÂÄºÁöÑÊï∞ÊçÆÁªìÊûÑ</li>
<li>lruÂ±ûÊÄßËÆ∞ÂΩï‰∫ÜÂØπË±°ÊúÄÂêé‰∏ÄÊ¨°Ë¢´ÂëΩ‰ª§Á®ãÂ∫èËÆøÈóÆÁöÑÊó∂Èó¥</li>
</ul>
<div style="display:flex;justify-content: center; align-items:center; width: 100%;text-align:center;line-height:40px ">
    <div style="font-weight:bold">Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂØπÂ∫îÁöÑÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ</div>
</div>
<table>
<thead>
<tr>
<th>Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûã</th>
<th>Â∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ</th>
</tr>
</thead>
<tbody>
<tr>
<td>String</td>
<td>ÁÆÄÂçïÂä®ÊÄÅÂ≠óÁ¨¶‰∏≤ÔºàSDS - simple dynamic stringÔºâ</td>
</tr>
<tr>
<td>Hash</td>
<td>ÂéãÁº©ÂàóË°®ÔºàZipListÔºâÔºåÂìàÂ∏åË°®ÔºàDictÔºâ</td>
</tr>
<tr>
<td>List</td>
<td>ÂèåÂêëÈìæË°®ÔºàQuickListÔºâÔºåÂéãÁº©ÂàóË°®ÔºàZipListÔºâ</td>
</tr>
<tr>
<td>Set</td>
<td>Êï¥Êï∞Êï∞ÁªÑÔºàIntSetÔºâÔºåÂìàÂ∏åË°®ÔºàDictÔºâ</td>
</tr>
<tr>
<td>ZSet</td>
<td>ÂéãÁº©ÂàóË°®ÔºàZipListÔºâÔºå Ë∑≥Ë°®ÔºàZSkipListÔºâ</td>
</tr>
</tbody>
</table>
<div style="display:flex;justify-content: center; align-items:center; width: 100%;text-align:center;line-height:40px ">
    <div style="font-weight:bold">RedisÊâÄÊúâÁºñÁ†ÅÊñπÂºè‰ª•ÂèäÂ∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ‰πãÈó¥ÁöÑÂÖ≥Á≥ª</div>
</div>
<table style="background:white">
	<thead>
		<tr>
			<th>Êï∞ÊçÆÁ±ªÂûã</th>
			<th>ÁºñÁ†ÅÁ±ªÂûã</th>
			<th>Â∫ïÂ±ÇÊï∞ÊçÆÁªìÊûÑ</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td rowspan="3">String</td>
			<td>OBJ_ENCODING_RAW</td>
			<td rowspan="2">SimpleDynamicString</td>
		</tr>
		<tr>
			<td>OBJ_ENCODING_EMBSTR</td>
		</tr>
    <tr>
			<td>OBJ_ENCODING_INT</td>
      <td>Áõ¥Êé•Â≠òÂÇ®Âú®redisObjectÁöÑPtr</td>
		</tr>
		<tr>
			<td rowspan="2">List</td>
			<td>OBJ_ENCODING_QUICKLIST</td>
			<td>QuickList</td>
		</tr>
    <tr>
			<td>OBJ_ENCODING_ZIPLIST</td>
			<td>ZipList</td>
		</tr>
		<tr>
			<td rowspan="2">Hash</td>
			<td>OBJ_ENCODING_ZIPLIST</td>
			<td>ZipList</td>
		</tr>
		<tr>
			<td>OBJ_ENCODING_HT</td>
			<td>Dict</td>
		</tr>
		<tr>
			<td rowspan="2">Set</td>
			<td>OBJ_ENCODING_INTSET</td>
			<td>IntSet</td>
		</tr>
		<tr>
			<td>OBJ_ENCODING_HT</td>
			<td>Dict</td>
		</tr>
		<tr>
			<td rowspan="2">ZSet</td>
			<td>OBJ_ENCODING_ZIPLIST</td>
			<td>ZipList</td>
		</tr>
		<tr>
			<td>OBJ_ENCODING_SKIPLIST</td>
			<td>ZSkipList</td>
		</tr>
	</tbody>
</table>
<h3 id="ÂëΩ‰ª§ÁöÑÁ±ªÂûãÊ£ÄÊü•ÂíåÂ§öÊÄÅË°å‰∏∫">ÂëΩ‰ª§ÁöÑÁ±ªÂûãÊ£ÄÊü•ÂíåÂ§öÊÄÅË°å‰∏∫</h3>
<p>ÂΩìÊâßË°å‰∏Ä‰∏™Â§ÑÁêÜÊï∞ÊçÆÁ±ªÂûãÂëΩ‰ª§ÁöÑÊó∂ÂÄôÔºåredisÊâßË°å‰ª•‰∏ãÊ≠•È™§</p>
<ol>
<li>Ê†πÊçÆÁªôÂÆöÁöÑkeyÔºåÂú®Êï∞ÊçÆÂ∫ìÂ≠óÂÖ∏‰∏≠Êü•ÊâæÂíå‰ªñÁõ∏ÂØπÂ∫îÁöÑredisObjectÔºåÂ¶ÇÊûúÊ≤°ÊâæÂà∞ÔºåÂ∞±ËøîÂõûNULL</li>
<li>Ê£ÄÊü•redisObjectÁöÑtypeÂ±ûÊÄßÂíåÊâßË°åÂëΩ‰ª§ÊâÄÈúÄÁöÑÁ±ªÂûãÊòØÂê¶Áõ∏Á¨¶ÔºåÂ¶ÇÊûú‰∏çÁõ∏Á¨¶ÔºåËøîÂõûÁ±ªÂûãÈîôËØØ</li>
<li>Ê†πÊçÆredisObjectÁöÑencodingÂ±ûÊÄßÊâÄÊåáÂÆöÁöÑÁºñÁ†ÅÔºåÈÄâÊã©ÂêàÈÄÇÁöÑÊìç‰ΩúÂáΩÊï∞Êù•Â§ÑÁêÜÂ∫ïÂ±ÇÁöÑÊï∞ÊçÆÁªìÊûÑ</li>
<li>ËøîÂõûÊï∞ÊçÆÁªìÊûÑÁöÑÊìç‰ΩúÁªìÊûú‰Ωú‰∏∫ÂëΩ‰ª§ÁöÑËøîÂõûÂÄº</li>
</ol>
<blockquote>
<p>OBJECT ENCODING [key] ÂëΩ‰ª§ÂèØ‰ª•Êü•ÁúãÂ∫ïÂ±ÇÂØπË±°ÁºñÁ†Å</p>
</blockquote>
<h2 id="‰∫åsimpledynamicstring">‰∫å„ÄÅSimpleDynamicString</h2>
<h3 id="ÁªìÊûÑ‰ªãÁªç">ÁªìÊûÑ‰ªãÁªç</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">struct</span> <span style="color:#900;font-weight:bold">__attribute__</span> ((__packed__)) sdshdr8 {
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">uint8_t</span> len;    
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">uint8_t</span> alloc; 
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">char</span> flags;
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">char</span> buf[];
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">struct</span> <span style="color:#900;font-weight:bold">__attribute__</span> ((__packed__)) sdshdr16 {
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">uint16_t</span> len; 
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">uint16_t</span> alloc; 
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">char</span> flags; 
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">char</span> buf[];
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">struct</span> <span style="color:#900;font-weight:bold">__attribute__</span> ((__packed__)) sdshdr32 {
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">uint32_t</span> len; 
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">uint32_t</span> alloc; 
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">char</span> flags;
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">char</span> buf[];
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">struct</span> <span style="color:#900;font-weight:bold">__attribute__</span> ((__packed__)) sdshdr64 {
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">uint64_t</span> len; 
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">uint64_t</span> alloc; 
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">char</span> flags; 
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">char</span> buf[];
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><code>len</code> ‰øùÂ≠òÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶</p>
</li>
<li>
<p><code>buf[]</code> Êï∞ÁªÑÁî®Êù•‰øùÂ≠òÂ≠óÁ¨¶‰∏≤ÁöÑÊØè‰∏™ÂÖÉÁ¥†</p>
</li>
<li>
<p><code>alloc</code>ÂàÜÂà´‰ª•8‰Ωç, 16‰Ωç, 32‰Ωç, 64‰ΩçË°®Á§∫Êï¥‰∏™SDSÔºå‰∏çÂåÖÂê´headerÔºàsdsÊòØÊåáÂêëbufÁöÑchar*ÔºåÊâÄ‰ª•ÁªìÊûÑ‰Ωì‰∏≠bufÈÉΩÊòØÊîæÂú®ÊúÄÂêé„ÄÇheaderÂ∞±ÊòØlen„ÄÅalloc„ÄÅflagsÔºâÂíåÁªìÊùüÂ≠óÁ¨¶\0</p>
</li>
<li>
<p><code>flags</code> ‰ª•‰Ωé‰∏â‰ΩçÊ†áÁ§∫ÁùÄÁî®ÁùÄÈÇ£ÁßçÁ±ªÂûãÁöÑSDS</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define SDS_TYPE_8  1
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define SDS_TYPE_16 2
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define SDS_TYPE_32 3
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define SDS_TYPE_64 4
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define SDS_TYPE_MASK 7
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">#define SDS_TYPE_BITS 3
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<img src="/img/redis/sds.png" alt="SDS ÁªìÊûÑ" style="zoom:67%;" />
<h3 id="ÂàÜÈÖçÁªÜËäÇ">ÂàÜÈÖçÁªÜËäÇ</h3>
<p><strong>Á©∫Èó¥È¢ÑÂàÜÈÖç</strong></p>
<p>Á©∫Èó¥È¢ÑÂàÜÈÖçÊòØÁî®‰∫é‰ºòÂåñ SDS Â≠óÁ¨¶‰∏≤Â¢ûÈïøÊìç‰ΩúÁöÑÔºåÁÆÄÂçïÊù•ËØ¥Â∞±ÊòØÂΩìÂ≠óËäÇÊï∞ÁªÑÁ©∫Èó¥‰∏çË∂≥Ëß¶ÂèëÈáçÂàÜÈÖçÁöÑÊó∂ÂÄôÔºåÊÄªÊòØ‰ºöÈ¢ÑÁïô‰∏ÄÈÉ®ÂàÜÁ©∫Èó≤Á©∫Èó¥„ÄÇËøôÊ†∑ÁöÑËØùÔºåÂ∞±ËÉΩÂáèÂ∞ëËøûÁª≠ÊâßË°åÂ≠óÁ¨¶‰∏≤Â¢ûÈïøÊìç‰ΩúÊó∂ÁöÑÂÜÖÂ≠òÈáçÂàÜÈÖçÊ¨°Êï∞„ÄÇ</p>
<p>Êúâ‰∏§ÁßçÈ¢ÑÂàÜÈÖçÁöÑÁ≠ñÁï•Ôºö</p>
<ul>
<li>len Â∞è‰∫é 1MB Êó∂ÔºöÊØèÊ¨°ÈáçÂàÜÈÖçÊó∂‰ºöÂ§öÂàÜÈÖçÂêåÊ†∑Â§ßÂ∞èÁöÑÁ©∫Èó≤Á©∫Èó¥Ôºõ</li>
<li>len Â§ß‰∫éÁ≠â‰∫é 1MB Êó∂ÔºöÊØèÊ¨°ÈáçÂàÜÈÖçÊó∂‰ºöÂ§öÂàÜÈÖç 1MB Â§ßÂ∞èÁöÑÁ©∫Èó≤Á©∫Èó¥„ÄÇ</li>
</ul>
<hr>
<p><strong>ÊÉ∞ÊÄßÁ©∫Èó¥ÈáäÊîæ</strong></p>
<p>ÊÉ∞ÊÄßÁ©∫Èó¥ÈáäÊîæÊòØÁî®‰∫é‰ºòÂåñ SDS Â≠óÁ¨¶‰∏≤Áº©Áü≠Êìç‰ΩúÁöÑ„ÄÇÁÆÄÂçïÊù•ËØ¥Â∞±ÊòØÂΩìÂ≠óÁ¨¶‰∏≤Áº©Áü≠Êó∂ÔºåÂπ∂‰∏çÁ´ãÂç≥‰ΩøÁî®ÂÜÖÂ≠òÈáçÂàÜÈÖçÊù•ÂõûÊî∂Â§öÂá∫Êù•ÁöÑÂ≠óËäÇÔºåËÄåÊòØÁî® free Â±ûÊÄßËÆ∞ÂΩïÔºåÁ≠âÂæÖÂ∞ÜÊù•‰ΩøÁî®„ÄÇSDS ‰πüÊèê‰æõÁõ¥Êé•ÈáäÊîæÊú™‰ΩøÁî®Á©∫Èó¥ÁöÑ APIÔºåÂú®ÈúÄË¶ÅÁöÑÊó∂ÂÄôÔºå‰πüËÉΩÁúüÊ≠£ÁöÑÈáäÊîæÊéâÂ§ö‰ΩôÁöÑÁ©∫Èó¥„ÄÇ</p>
<h3 id="ÂÆûÁé∞ÁªÜËäÇÊäÄÂ∑ß‰∏é‰ºòÁÇπ">ÂÆûÁé∞ÁªÜËäÇÊäÄÂ∑ß‰∏é‰ºòÁÇπ</h3>
<p><strong>ÂÆûÁé∞ÁöÑÊäÄÂ∑ß</strong></p>
<p>SDSÁªìÊûÑ‰ΩìÂèñÊ∂à‰∫ÜÂ≠óËäÇÂØπÈΩêÔºåÁÑ∂ÂêéÂèàÂ∞ÜÊåáÈíàÁõ¥Êé•ÊåáÂêë‰∫ÜÁªìÊûÑ‰ΩìÁöÑÂ∞æÈÉ®ÁöÑ<code>buf</code>ÂØπË±°„ÄÇÊåáÈíàÊåáÂêëÁöÑ‰ΩçÁΩÆÂÆåÂÖ®ÂÖºÂÆπ‰∫ÜcÁöÑÂ≠óÁ¨¶‰∏≤Êìç‰ΩúÔºåÂ¶ÇÊûúÈúÄË¶ÅÂæóÂà∞ÂÖ∂ÂÆÉ‰ø°ÊÅØÂàô‰ΩøÁî®‰∫Ü<code>flags = s[-1]</code>ÁöÑ‰∏ãÊ†áËÆøÈóÆÊìç‰ΩúÂæóÂà∞Á±ªÂûã‰πãÂêéÂÜçÂÅöËÆ°ÁÆó„ÄÇ</p>
<p><strong>‰ºòÁÇπ</strong></p>
<ul>
<li>
<p>Â∏∏Êï∞Â§çÊùÇÂ∫¶Ëé∑ÂèñÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶</p>
<p>Áî±‰∫é len Â±ûÊÄßÁöÑÂ≠òÂú®ÔºåÊàë‰ª¨Ëé∑Âèñ SDS Â≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶Âè™ÈúÄË¶ÅËØªÂèñ len Â±ûÊÄßÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(1)„ÄÇËÄåÂØπ‰∫é C ËØ≠Ë®ÄÔºåËé∑ÂèñÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ÈÄöÂ∏∏ÊòØÁªèËøáÈÅçÂéÜËÆ°Êï∞Êù•ÂÆûÁé∞ÁöÑÔºåÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫ O(n)</p>
</li>
<li>
<p>ÊùúÁªùÁºìÂÜ≤Âå∫Ê∫¢Âá∫</p>
<p>CËØ≠Ë®Ä‰∏≠‰ΩøÁî® <code>strcat</code>  ÂáΩÊï∞Êù•ËøõË°å‰∏§‰∏™Â≠óÁ¨¶‰∏≤ÁöÑÊãºÊé•Ôºå‰∏ÄÊó¶Ê≤°ÊúâÂàÜÈÖçË∂≥Â§üÈïøÂ∫¶ÁöÑÂÜÖÂ≠òÁ©∫Èó¥ÔºåÂ∞±‰ºöÈÄ†ÊàêÁºìÂÜ≤Âå∫Ê∫¢Âá∫„ÄÇËÄåÂØπ‰∫é SDS Êï∞ÊçÆÁ±ªÂûãÔºåÂú®ËøõË°åÂ≠óÁ¨¶‰øÆÊîπÁöÑÊó∂ÂÄôÔºå‰ºöÈ¶ñÂÖàÊ†πÊçÆËÆ∞ÂΩïÁöÑlenÂ±ûÊÄßÊ£ÄÊü•ÂÜÖÂ≠òÁ©∫Èó¥ÊòØÂê¶Êª°Ë∂≥ÈúÄÊ±ÇÔºåÂ¶ÇÊûú‰∏çÊª°Ë∂≥Ôºå‰ºöËøõË°åÁõ∏Â∫îÁöÑÁ©∫Èó¥Êâ©Â±ïÔºåÁÑ∂ÂêéÂú®ËøõË°å‰øÆÊîπÊìç‰ΩúÔºåÊâÄ‰ª•‰∏ç‰ºöÂá∫Áé∞ÁºìÂÜ≤Âå∫Ê∫¢Âá∫</p>
</li>
<li>
<p>ÂáèÂ∞ë‰øÆÊîπÂ≠óÁ¨¶‰∏≤ÁöÑÂÜÖÂ≠òÈáçÊñ∞ÂàÜÈÖçÊ¨°Êï∞</p>
<p>CËØ≠Ë®ÄÁî±‰∫é‰∏çËÆ∞ÂΩïÂ≠óÁ¨¶‰∏≤ÁöÑÈïøÂ∫¶ÔºåÊâÄ‰ª•Â¶ÇÊûúË¶Å‰øÆÊîπÂ≠óÁ¨¶‰∏≤ÔºåÂøÖÈ°ªË¶ÅÈáçÊñ∞ÂàÜÈÖçÂÜÖÂ≠ò„ÄÇËÄåÂØπ‰∫éSDSÔºåÁî±‰∫é<code>len</code>Â±ûÊÄßÂíå<code>alloc</code>Â±ûÊÄßÁöÑÂ≠òÂú®ÔºåÂØπ‰∫é‰øÆÊîπÂ≠óÁ¨¶‰∏≤SDSÂÆûÁé∞‰∫Ü<code>Á©∫Èó¥È¢ÑÂàÜÈÖç</code>Âíå<code>ÊÉ∞ÊÄßÁ©∫Èó¥ÈáäÊîæ</code>‰∏§ÁßçÁ≠ñÁï•</p>
</li>
<li>
<p>‰∫åËøõÂà∂ÂÆâÂÖ®</p>
<p>Âõ†‰∏∫CÂ≠óÁ¨¶‰∏≤‰ª•Á©∫Â≠óÁ¨¶‰Ωú‰∏∫Â≠óÁ¨¶‰∏≤ÁªìÊùüÁöÑÊ†áËØÜÔºåËÄåÂØπ‰∫é‰∏Ä‰∫õ‰∫åËøõÂà∂Êñá‰ª∂ÔºàÂ¶ÇÂõæÁâáÁ≠âÔºâÔºåÂÜÖÂÆπÂèØËÉΩÂåÖÊã¨Á©∫Â≠óÁ¨¶‰∏≤ÔºåÂõ†Ê≠§CÂ≠óÁ¨¶‰∏≤Êó†Ê≥ïÊ≠£Á°ÆÂ≠òÂèñ„ÄÇËÄåÊâÄÊúâSDSÁöÑAPIÈÉΩÊòØ‰ª•Â§ÑÁêÜ‰∫åËøõÂà∂ÁöÑÊñπÂºèÊù•Â§ÑÁêÜ <code>buf</code> ÈáåÈù¢ÁöÑÂÖÉÁ¥†ÔºåÂπ∂‰∏î SDS ‰∏çÊòØ‰ª•Á©∫Â≠óÁ¨¶‰∏≤Êù•Âà§Êñ≠ÊòØÂê¶ÁªìÊùüÔºåËÄåÊòØ‰ª•lenÂ±ûÊÄßË°®Á§∫ÁöÑÈïøÂ∫¶Êù•Âà§Êñ≠Â≠óÁ¨¶‰∏≤ÊòØÂê¶ÁªìÊùü</p>
</li>
<li>
<p>ÂÖºÂÆπCÂ≠óÁ¨¶‰∏≤ÂáΩÊï∞</p>
</li>
</ul>
<h2 id="‰∏âintset">‰∏â„ÄÅIntSet</h2>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">typedef</span> <span style="color:#000;font-weight:bold">struct</span> intset {
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">uint32_t</span> encoding;
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">uint32_t</span> length;
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">int8_t</span> contents[];
</span></span><span style="display:flex;"><span>} intset;
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p><code>encoding</code>Ë°®Á§∫ÁºñÁ†ÅÊñπÂºèÔºåÂèñÂÄºÊúâ‰∏â‰∏™ÔºöINTSET_ENC_INT16, INTSET_ENC_INT32, INTSET_ENC_INT64</p>
</li>
<li>
<p><code>length</code>‰ª£Ë°®ÂÖ∂‰∏≠Â≠òÂÇ®ÁöÑÊï¥Êï∞ÁöÑ‰∏™Êï∞</p>
</li>
<li>
<p><code>contents</code>ÂÆûÈôÖÂ≠òÂÇ®Êï∞ÂÄºÊï∞ÁªÑÔºåÊï∞ÁªÑÂÖÉÁ¥†‰ªéÂ∞èÂà∞Â§ßÊúâÂ∫èÊéíÂ∫èÔºå‰∏îÊï∞ÁªÑ‰∏≠‰∏çÂåÖÂê´‰ªª‰ΩïÈáçÂ§çÈ°π„ÄÇ</p>
</li>
</ul>
<blockquote>
<p>ËôΩÁÑ∂IntSetÁªìÊûÑÂ∞ÜcontentsÂ±ûÊÄßÂ£∞Êòé‰∏∫int8_tÁ±ªÂûãÁöÑÊï∞ÁªÑÔºå‰ΩÜÂÆûÈôÖ‰∏äcontentsÊï∞ÁªÑÂπ∂‰∏ç‰øùÂ≠ò‰ªª‰Ωïint8_tÁ±ªÂûãÁöÑÂÄºÔºåcontentsÊï∞ÁªÑÁöÑÁúüÊ≠£Á±ªÂûãÂèñÂÜ≥‰∫éencodingÂ±ûÊÄßÁöÑÂÄº</p>
</blockquote>
<p><strong>Êï¥Êï∞ÈõÜÂêàÁöÑÂçáÁ∫ß</strong></p>
<p>ÂΩìÂú®‰∏Ä‰∏™int16Á±ªÂûãÁöÑÊï¥Êï∞ÈõÜÂêà‰∏≠ÊèíÂÖ•‰∏Ä‰∏™int32Á±ªÂûãÁöÑÂÄºÔºåÊï¥‰∏™ÈõÜÂêàÁöÑÊâÄÊúâÂÖÉÁ¥†ÈÉΩ‰ºöËΩ¨Êç¢Êàê32Á±ªÂûã„ÄÇ Êï¥‰∏™ËøáÁ®ãÊúâ‰∏âÊ≠•Ôºö</p>
<ul>
<li>Ê†πÊçÆÊñ∞ÂÖÉÁ¥†ÁöÑÁ±ªÂûãÔºàÊØîÂ¶Çint32ÔºâÔºåÊâ©Â±ïÊï¥Êï∞ÈõÜÂêàÂ∫ïÂ±ÇÊï∞ÁªÑÁöÑÁ©∫Èó¥Â§ßÂ∞èÔºåÂπ∂‰∏∫Êñ∞ÂÖÉÁ¥†ÂàÜÈÖçÁ©∫Èó¥</li>
<li>Â∞ÜÂ∫ïÂ±ÇÊï∞ÁªÑÁé∞ÊúâÁöÑÊâÄÊúâÂÖÉÁ¥†ÈÉΩËΩ¨Êç¢Êàê‰∏éÊñ∞ÂÖÉÁ¥†Áõ∏ÂêåÁöÑÁ±ªÂûãÔºå Âπ∂Â∞ÜÁ±ªÂûãËΩ¨Êç¢ÂêéÁöÑÂÖÉÁ¥†ÊîæÁΩÆÂà∞Ê≠£Á°ÆÁöÑ‰Ωç‰∏äÔºå ËÄå‰∏îÂú®ÊîæÁΩÆÂÖÉÁ¥†ÁöÑËøáÁ®ã‰∏≠Ôºå ÈúÄË¶ÅÁªßÁª≠Áª¥ÊåÅÂ∫ïÂ±ÇÊï∞ÁªÑÁöÑÊúâÂ∫èÊÄßË¥®‰∏çÂèò</li>
<li>ÊúÄÂêéÊîπÂèòencodingÁöÑÂÄºÔºålength+1</li>
</ul>
<p>ÈõÜÂêà‰∏çÊîØÊåÅÈôçÁ∫ß</p>
<h2 id="Âõõdict">Âõõ„ÄÅDict</h2>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * ÂìàÂ∏åË°®
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">typedef</span> <span style="color:#000;font-weight:bold">struct</span> dictht {
</span></span><span style="display:flex;"><span>    dictEntry <span style="color:#000;font-weight:bold">**</span>table;       <span style="color:#998;font-style:italic">// ÂìàÂ∏åË°®Êï∞ÁªÑ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">long</span> size;      <span style="color:#998;font-style:italic">// ÂìàÂ∏åË°®Â§ßÂ∞è
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">long</span> sizemask;  <span style="color:#998;font-style:italic">// ÂìàÂ∏åË°®Â§ßÂ∞èÊé©Á†ÅÔºåÁî®‰∫éËÆ°ÁÆóÁ¥¢ÂºïÂÄº
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">long</span> used;      <span style="color:#998;font-style:italic">// ÂìàÂ∏åË°®Êï∞ÁªÑÁöÑÈïøÂ∫¶
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>} dictht;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * ÂìàÂ∏åË°®ËäÇÁÇπ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">typedef</span> <span style="color:#000;font-weight:bold">struct</span> dictEntry {
</span></span><span style="display:flex;"><span>    <span style="color:#458;font-weight:bold">void</span> <span style="color:#000;font-weight:bold">*</span>key;               <span style="color:#998;font-style:italic">// ÈîÆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">union</span> {                  <span style="color:#998;font-style:italic">// ÂÄº
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#458;font-weight:bold">void</span> <span style="color:#000;font-weight:bold">*</span>val;
</span></span><span style="display:flex;"><span>        <span style="color:#458;font-weight:bold">uint64_t</span> u64;
</span></span><span style="display:flex;"><span>        <span style="color:#458;font-weight:bold">int64_t</span> s64;
</span></span><span style="display:flex;"><span>        <span style="color:#458;font-weight:bold">double</span> d;
</span></span><span style="display:flex;"><span>    } v;
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">struct</span> dictEntry <span style="color:#000;font-weight:bold">*</span>next;  <span style="color:#998;font-style:italic">// ÈìæÁöÑÂêéÁªßËäÇÁÇπ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>} dictEntry;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">/*
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * Â≠óÂÖ∏
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> * ÊØè‰∏™Â≠óÂÖ∏‰ΩøÁî®‰∏§‰∏™ÂìàÂ∏åË°®ÔºåÁî®‰∫éÂÆûÁé∞Ê∏êËøõÂºè rehash
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">typedef</span> <span style="color:#000;font-weight:bold">struct</span> dict {
</span></span><span style="display:flex;"><span>    dictType <span style="color:#000;font-weight:bold">*</span>type;          <span style="color:#998;font-style:italic">// ÁâπÂÆö‰∫éÁ±ªÂûãÁöÑÂ§ÑÁêÜÂáΩÊï∞
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#458;font-weight:bold">void</span> <span style="color:#000;font-weight:bold">*</span>privdata;          <span style="color:#998;font-style:italic">// Á±ªÂûãÂ§ÑÁêÜÂáΩÊï∞ÁöÑÁßÅÊúâÊï∞ÊçÆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    dictht ht[<span style="color:#099">2</span>];            <span style="color:#998;font-style:italic">// ÂìàÂ∏åË°®Ôºà2 ‰∏™Ôºâ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#458;font-weight:bold">long</span> rehashidx;          <span style="color:#998;font-style:italic">// ËÆ∞ÂΩïrehashËøõÂ∫¶ÁöÑÊ†áÂøóÔºåÂÄº‰∏∫-1Ë°®Á§∫rehashÊú™ËøõË°å
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#458;font-weight:bold">int16_t</span> pauserehash;     <span style="color:#998;font-style:italic">// Â¶ÇÊûúÂ§ß‰∫é0Âàô‰ª£Ë°®rehashÊöÇÂÅú
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>} dict;
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/img/redis/Dict.png" alt="Dict"></p>
<p><strong>Êâ©ÂÆπÂíåÊî∂Áº©</strong></p>
<p>ÂΩìÂìàÂ∏åË°®‰øùÂ≠òÁöÑÈîÆÂÄºÂØπÂ§™Â§öÊàñËÄÖÂ§™Â∞ëÊó∂ÔºåÂ∞±Ë¶ÅÈÄöËøárerehash(ÈáçÊñ∞Êï£ÂàóÔºâÊù•ÂØπÂìàÂ∏åË°®ËøõË°åÁõ∏Â∫îÁöÑÊâ©Â±ïÊàñËÄÖÊî∂Áº©„ÄÇ</p>
<ul>
<li>Â¶ÇÊûúÊâßË°åÊâ©Â±ïÊìç‰ΩúÔºå‰ºöÂü∫‰∫éÂéüÂìàÂ∏åË°®ÂàõÂª∫‰∏Ä‰∏™Â§ßÂ∞èÁ≠â‰∫é ht[0].used*2n ÁöÑÂìàÂ∏åË°®Ôºà‰πüÂ∞±ÊòØÊØèÊ¨°Êâ©Â±ïÈÉΩÊòØÊ†πÊçÆÂéüÂìàÂ∏åË°®Â∑≤‰ΩøÁî®ÁöÑÁ©∫Èó¥Êâ©Â§ß‰∏ÄÂÄçÂàõÂª∫Âè¶‰∏Ä‰∏™ÂìàÂ∏åË°®Ôºâ„ÄÇÁõ∏ÂèçÂ¶ÇÊûúÊâßË°åÁöÑÊòØÊî∂Áº©Êìç‰ΩúÔºåÊØèÊ¨°Êî∂Áº©ÊòØÊ†πÊçÆÂ∑≤‰ΩøÁî®Á©∫Èó¥Áº©Â∞è‰∏ÄÂÄçÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÂìàÂ∏åË°®</li>
<li>ÈáçÊñ∞Âà©Áî®‰∏äÈù¢ÁöÑÂìàÂ∏åÁÆóÊ≥ïÔºåËÆ°ÁÆóÁ¥¢ÂºïÂÄºÔºåÁÑ∂ÂêéÂ∞ÜÈîÆÂÄºÂØπÊîæÂà∞Êñ∞ÁöÑÂìàÂ∏åË°®‰ΩçÁΩÆ‰∏ä</li>
<li>ÊâÄÊúâÈîÆÂÄºÂØπÈÉΩËøÅÂæôÂÆåÊØïÂêéÔºåÈáäÊîæÂéüÂìàÂ∏åË°®ÁöÑÂÜÖÂ≠òÁ©∫Èó¥</li>
</ul>
<p><strong>Ê∏êËøëÂºè rehash</strong></p>
<p>Ê∏êËøõÂºèrehashÊòØÊåáÊâ©ÂÆπÂíåÊî∂Áº©Êìç‰Ωú‰∏çÊòØ‰∏ÄÊ¨°ÊÄß„ÄÅÈõÜ‰∏≠ÂºèÂÆåÊàêÁöÑÔºåËÄåÊòØÂàÜÂ§öÊ¨°„ÄÅÊ∏êËøõÂºèÂÆåÊàêÁöÑ„ÄÇÂ¶ÇÊûú‰øùÂ≠òÂú®Redis‰∏≠ÁöÑÈîÆÂÄºÂØπÂè™ÊúâÂá†‰∏™Âá†ÂçÅ‰∏™ÔºåÈÇ£‰πà rehash Êìç‰ΩúÂèØ‰ª•Áû¨Èó¥ÂÆåÊàêÔºå‰ΩÜÊòØÂ¶ÇÊûúÈîÆÂÄºÂØπÊúâÂá†Áôæ‰∏áÔºåÂá†ÂçÉ‰∏áÁîöËá≥Âá†‰∫øÔºåÈÇ£‰πàË¶Å‰∏ÄÊ¨°ÊÄßÁöÑËøõË°årehashÔºåÂäøÂøÖ‰ºöÈÄ†ÊàêRedis‰∏ÄÊÆµÊó∂Èó¥ÂÜÖ‰∏çËÉΩËøõË°åÂà´ÁöÑÊìç‰Ωú„ÄÇÊâÄ‰ª•RedisÈááÁî®Ê∏êËøõÂºèrehashÔºå<span style="color:blue">Âú®ËøõË°åÊ∏êËøõÂºèrehashÊúüÈó¥ÔºåÂ≠óÂÖ∏ÁöÑÂà†Èô§Êü•ÊâæÊõ¥Êñ∞Á≠âÊìç‰ΩúÂèØËÉΩ‰ºöÂú®‰∏§‰∏™ÂìàÂ∏åË°®‰∏äËøõË°åÔºåÁ¨¨‰∏Ä‰∏™ÂìàÂ∏åË°®Ê≤°ÊúâÊâæÂà∞ÔºåÂ∞±‰ºöÂéªÁ¨¨‰∫å‰∏™ÂìàÂ∏åË°®‰∏äËøõË°åÊü•Êâæ„ÄÇ‰ΩÜÊòØËøõË°åÂ¢ûÂä†Êìç‰ΩúÔºå‰∏ÄÂÆöÊòØÂú®Êñ∞ÁöÑÂìàÂ∏åË°®‰∏äËøõË°åÁöÑ„ÄÇ</span></p>
<h2 id="‰∫îzskiplist">‰∫î„ÄÅZSkipList</h2>
<p>Ë∑≥Ë∑ÉË°®ÁªìÊûÑÂú®Redis‰∏≠ÁöÑËøêÁî®Âú∫ÊôØÂè™Êúâ‰∏Ä‰∏™ÔºåÈÇ£Â∞±ÊòØ‰Ωú‰∏∫ÊúâÂ∫èÂàóË°®ZSetÁöÑ‰ΩøÁî®„ÄÇË∑≥Ë∑ÉË°®ÁöÑÊÄßËÉΩÂèØ‰ª•‰øùËØÅÂú®Êü•ÊâæÔºåÂà†Èô§ÔºåÊ∑ªÂä†Á≠âÊìç‰ΩúÁöÑÊó∂ÂÄôÂú®ÂØπÊï∞ÊúüÊúõÊó∂Èó¥ÂÜÖÂÆåÊàêÔºåËøô‰∏™ÊÄßËÉΩÊòØÂèØ‰ª•ÂíåÂπ≥Ë°°Ê†ëÊù•Áõ∏ÊØîËæÉÁöÑÔºåËÄå‰∏îÂú®ÂÆûÁé∞ÊñπÈù¢ÊØîÂπ≥Ë°°Ê†ëË¶Å‰ºòÈõÖÔºåËøôÂ∞±ÊòØË∑≥Ë∑ÉË°®ÁöÑÈïøÂ§Ñ„ÄÇË∑≥Ë∑ÉË°®ÁöÑÁº∫ÁÇπÂ∞±ÊòØÈúÄË¶ÅÁöÑÂ≠òÂÇ®Á©∫Èó¥ÊØîËæÉÂ§ßÔºåÂ±û‰∫éÂà©Áî®Á©∫Èó¥Êù•Êç¢ÂèñÊó∂Èó¥ÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇ</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">typedef</span> <span style="color:#000;font-weight:bold">struct</span> zskiplistNode {
</span></span><span style="display:flex;"><span>    sds ele;                              <span style="color:#998;font-style:italic">// Êï∞ÊçÆ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#458;font-weight:bold">double</span> score;                         <span style="color:#998;font-style:italic">// ÂàÜÊï∞
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">struct</span> zskiplistNode <span style="color:#000;font-weight:bold">*</span>backward;       <span style="color:#998;font-style:italic">// ÂêéÈÄÄÊåáÈíà
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#000;font-weight:bold">struct</span> zskiplistLevel {
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">struct</span> zskiplistNode <span style="color:#000;font-weight:bold">*</span>forward;    <span style="color:#998;font-style:italic">// ÂâçËøõÊåáÈíà
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>        <span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">int</span> span;                <span style="color:#998;font-style:italic">// Ë∑®Â∫¶
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    } level[];
</span></span><span style="display:flex;"><span>} zskiplistNode;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000;font-weight:bold">typedef</span> <span style="color:#000;font-weight:bold">struct</span> zskiplist {
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">struct</span> zskiplistNode <span style="color:#000;font-weight:bold">*</span>header, <span style="color:#000;font-weight:bold">*</span>tail;   <span style="color:#998;font-style:italic">// Ë°®Â§¥ËäÇÁÇπÂíåË°®Â∞æËäÇÁÇπ
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#458;font-weight:bold">unsigned</span> <span style="color:#458;font-weight:bold">long</span> length;                  <span style="color:#998;font-style:italic">// Ë°®‰∏≠ËäÇÁÇπÁöÑÊï∞Èáè
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>    <span style="color:#458;font-weight:bold">int</span> level;                             <span style="color:#998;font-style:italic">// Ë°®‰∏≠Â±ÇÊï∞ÊúÄÂ§ßÁöÑËäÇÁÇπÁöÑÂ±ÇÊï∞
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"></span>} zskiplist
</span></span></code></pre></td></tr></table>
</div>
</div><p><img src="/img/redis/ZSkipList.png" alt="ZSkipList"></p>
<p>zskiplistÁªìÊûÑ</p>
<ul>
<li><code>header</code>/<code>tail</code>ÊåáÂêëË∑≥Ë∑ÉË°®ÁöÑË°®Â§¥/Â∞æËäÇÁÇπ</li>
<li><code>level</code>ËÆ∞ÂΩïÁõÆÂâçË∑≥Ë∑ÉË°®ÂÜÖÔºåÂ±ÇÊï∞ÊúÄÂ§ßÁöÑÈÇ£‰∏™ËäÇÁÇπÂ±ÇÊï∞ÔºàË°®Â§¥ËäÇÁÇπÁöÑÂ±ÇÊï∞‰∏çËÆ°ÁÆóÂú®ÂÜÖÔºåÂ§¥ËäÇÁÇπ‰∏ÄÁõ¥32‰∏™levelÔºâ</li>
<li><code>length</code>ËÆ∞ÂΩïË∑≥Ë∑ÉË°®ÁöÑÈïøÂ∫¶Ôºå‰πüÂ∞±ÊòØË∑≥Ë∑ÉË°®ÁõÆÂâçÂåÖÂê´ËäÇÁÇπÁöÑÊï∞ÈáèÔºàË°®Â§¥ËäÇÁÇπ‰∏çËÆ°ÁÆóÂú®ÂÜÖÔºåÂç≥ÁúüÂÆûÊï∞ÊçÆÈáèÔºâ</li>
</ul>
<p>zskiplistNodeÁªìÊûÑ</p>
<ul>
<li>
<p><code>ele</code>Â≠òÂÇ®ÁöÑÂÖÉÁ¥†</p>
</li>
<li>
<p><code>score</code>ÂÖÉÁ¥†ÂàÜÊï∞Ôºå‰ªéÂ∞èÂà∞Â§ßÊéíÂàó</p>
</li>
<li>
<p><code>backward</code>ÊåáÂêëÁªìÁÇπÁöÑÂâç‰∏Ä‰∏™Á¥ßÈÇªÁªìÁÇπ</p>
</li>
<li>
<p><code>level</code>Â≠óÊÆµÔºåÁî®‰ª•ËÆ∞ÂΩïÊâÄÊúâÁªìÁÇπÔºàÈô§ËøáÂ§¥ËäÇÁÇπÂ§ñÔºâÊØè‰∏™ÁªìÁÇπ‰∏≠ÊúÄÂ§öÊåÅÊúâ32‰∏™zskiplistLevelÁªìÊûÑ. ÂÆûÈôÖÊï∞ÈáèÂú®ÁªìÁÇπÂàõÂª∫Êó∂ÔºåÊåâÂπÇÊ¨°ÂÆöÂæãÈöèÊú∫ÁîüÊàêÔºåÊØèÂä†‰∏ÄÂ±ÇÊ¶ÇÁéá‰∏∫1/4</p>
<ul>
<li><code>forward</code>Â≠óÊÆµÊåáÂêëÊØîËá™Â∑±ÂæóÂàÜÈ´òÁöÑ‰∏ã‰∏™ËäÇÁÇπ</li>
<li><code>span</code>Â≠óÊÆµ‰ª£Ë°®forwardÂ≠óÊÆµÊåáÂêëÁöÑÁªìÁÇπ, Ë∑ùÁ¶ªÂΩìÂâçÁªìÁÇπÁöÑË∑ùÁ¶ª. Á¥ßÈÇªÁöÑ‰∏§‰∏™ÁªìÁÇπ‰πãÈó¥ÁöÑË∑ùÁ¶ªÂÆö‰πâ‰∏∫1</li>
</ul>
</li>
</ul>
<h2 id="ÂÖ≠ziplist">ÂÖ≠„ÄÅZipList</h2>
<p>ZipListÊòØ‰∏Ä‰∏™ÁªèËøáÁâπÊÆäÁºñÁ†ÅËææÂà∞ÂèåÂêëÈìæË°®ÊïàÊûúÁöÑÁªìÊûÑÔºåÂÆÉÁöÑËÆæËÆ°ÁõÆÊ†áÂ∞±ÊòØ‰∏∫‰∫ÜÊèêÈ´òÂ≠òÂÇ®ÂíåËÆøÈóÆÊïàÁéá„ÄÇÂÆÉËÉΩ‰ª•O(1)ÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶Âú®Ë°®ÁöÑ‰∏§Á´ØÊèê‰æõpushÂíåpopÊìç‰Ωú„ÄÇÂèàÂõ†‰∏∫ziplistÊòØ‰∏Ä‰∏™ÂÜÖÂ≠òËøûÁª≠ÁöÑÈõÜÂêàÔºåÊâÄ‰ª•ziplistÈÅçÂéÜÂè™Ë¶ÅÈÄöËøáÂΩìÂâçËäÇÁÇπÁöÑÊåáÈíàÂä†‰∏äÂΩìÂâçËäÇÁÇπÁöÑÈïøÂ∫¶ÊàñÂáèÂéª‰∏ä‰∏ÄËäÇÁÇπÁöÑÈïøÂ∫¶ ÔºåÂç≥ÂèØÂæóÂà∞‰∏ã‰∏Ä‰∏™ËäÇÁÇπÁöÑÊï∞ÊçÆÊàñ‰∏ä‰∏Ä‰∏™ËäÇÁÇπÁöÑÊï∞ÊçÆÔºåËøôÊ†∑Â∞±ÁúÅÂéªÁöÑÊåáÈíà‰ªéËÄåËäÇÁúÅ‰∫ÜÂ≠òÂÇ®Á©∫Èó¥ÔºåÂèàÂõ†‰∏∫ÂÜÖÂ≠òËøûÁª≠ÊâÄ‰ª•Âú®Êï∞ÊçÆËØªÂèñ‰∏äÁöÑÊïàÁéá‰πüËøúÈ´ò‰∫éÊôÆÈÄöÁöÑÈìæË°®</p>
<p><img src="/img/redis/zipList.png" alt="zipList"></p>
<p>ZipListÁªìÊûÑ</p>
<ul>
<li><code>zlbytes</code>Â≠òÂÇ®ÁöÑÊòØÊï¥‰∏™ziplistÊâÄÂç†Áî®ÁöÑÂÜÖÂ≠òÁöÑÂ≠óËäÇÊï∞ÔºàÂåÖÂê´‰ªñËá™Â∑±Ôºâ</li>
<li><code>zltail</code>ÊåáÁöÑÊòØziplist‰∏≠ÊúÄÂêé‰∏Ä‰∏™entryÁöÑÂÅèÁßªÈáè. Áî®‰∫éÂø´ÈÄüÂÆö‰ΩçÊúÄÂêé‰∏Ä‰∏™entry, ‰ª•Âø´ÈÄüÂÆåÊàêpopÁ≠âÊìç‰Ωú</li>
<li><code>zllen</code> ËÆ∞ÂΩïentryÁöÑÊï∞ÈáèÔºàRedis‰Ωú‰∫ÜÁâπÊÆäÁöÑÂ§ÑÁêÜÔºöÂΩìÂÆû‰ΩìÊï∞Ë∂ÖËøá2^16ÔºåËØ•ÂÄºË¢´Âõ∫ÂÆö‰∏∫2^16-1ÊâÄ‰ª•ËøôÁßçÊó∂ÂÄôË¶ÅÁü•ÈÅìÊâÄÊúâÂÆû‰ΩìÁöÑÊï∞ÈáèÂ∞±ÂøÖÈ°ªË¶ÅÈÅçÂéÜÊï¥‰∏™ÁªìÊûÑ‰∫ÜÔºåÊïàÁéá‰ºöÈôç‰ΩéÔºâ</li>
<li><code>entry</code>ÁúüÊ≠£Â≠òÊï∞ÊçÆÁöÑÁªìÊûÑ„ÄÇ</li>
<li><code>zlend</code>Âõ∫ÂÆö‰∏∫ 255 (0xFF)Ôºå‰Ωú‰∏∫ziplistÁöÑÁªìÊùüÊ†áËØÜ</li>
</ul>
<p>EntryÁªìÊûÑ</p>
<ul>
<li>
<p><code>prevlen</code>Ââç‰∏Ä‰∏™entryÁöÑÂ§ßÂ∞è</p>
<ul>
<li>Â¶ÇÊûúÂâç‰∏Ä‰∏™ÂÖÉÁ¥†ÈïøÂ∫¶Â∞è‰∫é254Ôºà255Áî®‰∫ézlendÔºâÁöÑÊó∂ÂÄôÔºåprevlenÈïøÂ∫¶‰∏∫1‰∏™Â≠óËäÇÔºåÂÄºÂç≥‰∏∫Ââç‰∏Ä‰∏™entryÁöÑÈïøÂ∫¶</li>
<li>Â¶ÇÊûúÂâç‰∏Ä‰∏™ÂÖÉÁ¥†ÈïøÂ∫¶Â§ß‰∫éÁ≠â‰∫é254ÁöÑÊó∂ÂÄôÔºåprevlenÁî®5‰∏™Â≠óËäÇË°®Á§∫ÔºåÁ¨¨‰∏ÄÂ≠óËäÇËÆæÁΩÆ‰∏∫254ÔºåÂêéÈù¢4‰∏™Â≠óËäÇÂ≠òÂÇ®‰∏Ä‰∏™Êó†Á¨¶Âè∑Êï¥ÂûãÔºåË°®Á§∫Ââç‰∏Ä‰∏™entryÁöÑÈïøÂ∫¶Ôºå‰æãÂ¶ÇÈïøÂ∫¶300ÂàôË°®Á§∫‰∏∫ 0xFE 00 00 00 12C</li>
</ul>
</li>
<li>
<p><code>encoding</code>‰∏çÂêåÁöÑÊÉÖÂÜµ‰∏ãÂÄº‰∏çÂêåÔºåÁî®‰∫éË°®Á§∫ÂΩìÂâçentryÁöÑÁ±ªÂûãÂíåÈïøÂ∫¶ÔºåÂ¶ÇÊûúÂ≠òÂÇ®Êó∂Êï∞Â≠óÂàôÂèØËÉΩ‰∏çÈúÄË¶Å‰ΩøÁî®entry-dataÂ≠òÂÇ®‰ø°ÊÅØÔºåËÄåÊòØÁõ¥Êé•ÂèóÁî®encodingÂ≠òÂÇ®Êï∞ÊçÆ</p>
</li>
<li>
<p><code>entry-data</code>Â≠òÂÇ®entryË°®Á§∫ÁöÑÊï∞ÊçÆ</p>
</li>
</ul>
<p>ZipListÁº∫ÁÇπ</p>
<p>Ziplist‰∏çÈÄÇÂêà‰øùÂ≠òÂæàÂ§öÁöÑÂÖÉÁ¥†ÔºåÂõ†‰∏∫ÊèíÂÖ•„ÄÅÂà†Èô§„ÄÅÊõ¥Êñ∞Êìç‰ΩúÈúÄË¶ÅÈáçÊñ∞ÂàÜÈÖçÂú∞ÂùÄÂπ∂‰∏îÂ§çÂà∂ÂéüÊù•ÁöÑÂÖÉÁ¥†ÔºåÊâÄ‰ª•Âú®‰øùÂ≠òÊï∞ÊçÆÈáèËæÉÂ∞ëÁöÑÊï∞ÊçÆÊó∂ÔºåZiplistÊâçÊúâ‰ºòÂäø„ÄÇËÄå‰∏îÂèØËÉΩËÆæËÆ°ÁöÑÁªìÊûÑ‰ºöÂºïÂèë<strong>ËøûÈîÅÊõ¥Êñ∞</strong>ÈóÆÈ¢òÔºå<span style="color:blue"><em>ZipListÂú®v7.0Ë¢´<code>ListPack</code>Êõø‰ª£</em></span></p>
<p><strong>ËøûÈîÅÊõ¥Êñ∞</strong></p>
<p>ÂÅáËÆæÊúâËøôÊ†∑ÁöÑ‰∏Ä‰∏™ziplistÔºåÊØè‰∏™ËäÇÁÇπÈÉΩÊòØÁ≠â‰∫é253Â≠óËäÇÁöÑ„ÄÇÊñ∞Â¢û‰∫Ü‰∏Ä‰∏™Â§ß‰∫éÁ≠â‰∫é254Â≠óËäÇÁöÑÊñ∞ËäÇÁÇπÔºåÁî±‰∫é‰πãÂâçÁöÑËäÇÁÇπprevlenÈïøÂ∫¶ÊòØ1‰∏™Â≠óËäÇ„ÄÇ‰∏∫‰∫ÜË¶ÅËÆ∞ÂΩïÊñ∞Â¢ûËäÇÁÇπÁöÑÈïøÂ∫¶ÊâÄ‰ª•ÈúÄË¶ÅÂØπËäÇÁÇπ1ËøõË°åÊâ©Â±ïÔºåÁî±‰∫éËäÇÁÇπ1Êú¨Ë∫´Â∞±ÊòØ253Â≠óËäÇÔºåÂÜçÂä†‰∏äÊâ©Â±ï‰∏∫5Â≠óËäÇÁöÑpervlenÂàôÈïøÂ∫¶Ë∂ÖËøá‰∫Ü 254Â≠óËäÇÔºåËøôÊó∂ÂÄô‰∏ã‰∏Ä‰∏™ËäÇÁÇπÂèàË¶ÅËøõË°åÊâ©Â±ï‰∫Ü„ÄÇÂô©Ê¢¶Â∞±ÂºÄÂßã‰∫Ü„ÄÇ
<img src="/img/redis/%E8%BF%9E%E9%94%81%E6%9B%B4%E6%96%B0.png" alt="ËøûÈîÅÊõ¥Êñ∞"></p>
<h2 id="‰∏Équicklist">‰∏É„ÄÅQuickList</h2>
<p>QuickListÂÆûÈôÖ‰∏äÂ∞±ÊòØzipListÂíålinkedListÁöÑÊ∑∑Âêà‰ΩìÔºåÂÆÉÂ∞ÜlinkedListÊåâÊÆµÂàáÂàÜÔºåÊØè‰∏ÄÊÆµ‰ΩøÁî®zipListÊù•Á¥ßÂáëÂ≠òÂÇ®ÔºåÂ§ö‰∏™zipList‰πãÈó¥‰ΩøÁî®ÂèåÂêëÊåáÈíà‰∏≤Êé•Ëµ∑Êù•„ÄÇÈÅøÂÖç‰∫ÜËøáÂ§öÁöÑÂÜÖÂ≠òÁ¢éÁâá„ÄÇ</p>
<p><img src="/img/redis/QuickList.png" alt="QuickList"></p>
<p>QuickListÁªìÊûÑ</p>
<ul>
<li>
<p><code>fill</code>ÁöÑÂÄºÂΩ±ÂìçÁùÄÊØè‰∏™ÈìæË°®ÁªìÁÇπ‰∏≠, ziplistÁöÑÈïøÂ∫¶</p>
<ul>
<li>
<p>-1 ‰∏çË∂ÖËøá 4kb</p>
</li>
<li>
<p>-2 ‰∏çË∂ÖËøá 8kb</p>
</li>
<li>
<p>-3 ‰∏çË∂ÖËøá 16kb</p>
</li>
<li>
<p>-4 ‰∏çË∂ÖËøá 32kb</p>
</li>
<li>
<p>-5 ‰∏çË∂ÖËøá 64kb</p>
</li>
<li>
<p>ÂΩìÊï∞ÂÄº‰∏∫Ê≠£Êï∞Êó∂, ‰ª£Ë°®‰ª•entryÊï∞ÁõÆÈôêÂà∂Âçï‰∏™ziplistÁöÑÈïøÂ∫¶</p>
</li>
</ul>
</li>
<li>
<p><code>count</code>ÊâÄÊúâziplist‰∏≠entryÊï∞Èáè</p>
</li>
<li>
<p><code>len</code>ÊâÄÊúâquicklistNodesËäÇÁÇπÊï∞Èáè</p>
</li>
<li>
<p><code>compress</code>ÁöÑÂÄºÂΩ±ÂìçÁùÄzipListÊåáÈíàÊåáÂêëÁöÑÊòØÂéüÁîüÁöÑziplistÔºåËøòÊòØÁªèËøáÂéãÁº©ÂåÖË£ÖÂêéÁöÑ</p>
</li>
<li>
<p><code>head</code>Âíå<code>tail</code>‰ª£Ë°®ÁùÄÂ§¥Â∞æÊåáÈíà</p>
</li>
</ul>
<p>QuickListNodeÁªìÊûÑ</p>
<ul>
<li><code>prev</code>Âíå<code>next</code>‰ª£Ë°®Ââç/Âêé‰∏ÄËäÇÁÇπÊåáÈíà</li>
<li><code>ziplist</code>ÊòØÊåáÂêëzipListÁöÑÊåáÈíà</li>
<li><code>sz</code>ÁªüËÆ°ÊåáÂêëÁöÑziplistÂÆûÈôÖÂç†Áî®ÂÜÖÂ≠òÂ§ßÂ∞è„ÄÇÔºàÂ¶ÇÊûúziplistË¢´ÂéãÁº©‰∫ÜÔºåÈÇ£‰πàËøô‰∏™szÁöÑÂÄº‰ªçÁÑ∂ÊòØÂéãÁº©ÂâçÁöÑziplistÂ§ßÂ∞èÔºâ</li>
<li><code>count</code>ÁªüËÆ°ziplistÈáåÈù¢ÂåÖÂê´ÁöÑÊï∞ÊçÆÈ°π‰∏™Êï∞</li>
<li><code>encoding </code>Ë°®Á§∫ÊòØÂê¶ÂéãÁº©</li>
<li><code>container </code>ÊåáÂ≠òÂÇ®Á±ªÂûãÔºåÁõÆÂâç‰ΩøÁî®Âõ∫ÂÆöÂÄº2Ë°®Á§∫‰ΩøÁî®ziplistÂ≠òÂÇ®</li>
<li><code>recompress</code>Áé∞Âú®Êï∞ÊçÆÊòØÂê¶Ë¢´Ëß£Âéã‰∫Ü</li>
<li><code>attempted_compress</code>ËäÇÁÇπ‰∏çËÉΩË¢´ÂéãÁº©Âõ†‰∏∫Â§™Â∞è‰∫Ü</li>
<li><code>extra </code>Âç†‰ΩçÊ≤°Áî®‰∏ä</li>
</ul>
<h2 id="ÂÖ´Âü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂ∫ïÂ±ÇÁºñÁ†ÅÂú∫ÊôØ">ÂÖ´„ÄÅÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÂ∫ïÂ±ÇÁºñÁ†ÅÂú∫ÊôØ</h2>
<h3 id="string">String</h3>
<p><strong>OBJ_ENCODING_INT</strong></p>
<p>ÂΩìÂ≠óÁ¨¶‰∏≤ÈîÆÂÄºÁöÑÂÜÖÂÆπÂèØ‰ª•Áî®‰∏Ä‰∏™ <strong>64‰ΩçÊúâÁ¨¶Âè∑Êï¥ÂΩ¢</strong> Êù•Ë°®Á§∫Êó∂ÔºåRedis‰ºöÂ∞ÜÈîÆÂÄºËΩ¨Âåñ‰∏∫longÂûãÊù•ËøõË°åÂ≠òÂÇ®ÔºåÊ≠§Êó∂Âç≥ÂØπÂ∫î <code>OBJ_ENCODING_INT</code> ÁºñÁ†ÅÁ±ªÂûãÔºåËÄå‰∏î Redis ÂêØÂä®Êó∂‰ºöÈ¢ÑÂÖàÂª∫Á´ã<strong>10000</strong>‰∏™ÂàÜÂà´Â≠òÂÇ®<strong>0~9999</strong>ÁöÑ redisObjectÂèòÈáè‰Ωú‰∏∫ÂÖ±‰∫´ÂØπË±°ÔºåËøôÂ∞±ÊÑèÂë≥ÁùÄÂ¶ÇÊûúsetÂ≠óÁ¨¶‰∏≤ÁöÑÈîÆÂÄºÂú®0~10000‰πãÈó¥ÁöÑËØùÔºåÂàôÂèØ‰ª•<strong>Áõ¥Êé•ÊåáÂêëÂÖ±‰∫´ÂØπË±°</strong>ËÄå‰∏çÈúÄË¶ÅÂÜçÂª∫Á´ãÊñ∞ÂØπË±°ÔºåÊ≠§Êó∂ÈîÆÂÄº‰∏çÂç†Á©∫Èó¥</p>
<img src="/img/redis/str_int.png" alt="str_int" style="zoom:50%;" />
<p><strong>OBJ_ENCODING_EMBSTR</strong></p>
<p>ÂØπ‰∫éÈïøÂ∫¶Â∞è‰∫é44ÁöÑÂ≠óÁ¨¶‰∏≤ÔºåRedisÈîÆÂÄºÈááÁî®<code>OBJ_ENCODING_EMBSTR</code>ÊñπÂºèÔºåË°®Á§∫ÂµåÂÖ•ÂºèÁöÑString„ÄÇ‰ªéÂÜÖÂ≠òÁªìÊûÑ‰∏äÊù•ËÆ≤Âç≥Â≠óÁ¨¶‰∏≤SDSÁªìÊûÑ‰Ωì‰∏éÂÖ∂ÂØπÂ∫îÁöÑredisObjectÂØπË±°ÂàÜÈÖçÂú®<strong>Âêå‰∏ÄÂùóËøûÁª≠ÁöÑÂÜÖÂ≠òÁ©∫Èó¥</strong>ÔºåËøôÂ∞±‰ªø‰ΩõÂ≠óÁ¨¶‰∏≤SDSÂµåÂÖ•Âú®redisObjectÂØπË±°‰πã‰∏≠‰∏ÄÊ†∑</p>
<img src="/img/redis/str_emb.png" alt="str_emb" style="zoom:50%;" />
<p><strong>OBJ_ENCODING_RAW</strong></p>
<p>ÂΩìÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶Â§ß‰∫é<strong>44</strong>ÁöÑÊó∂ÔºåRedisÂàô‰ºöÂ∞ÜÈîÆÂÄºÁöÑÂÜÖÈÉ®ÁºñÁ†ÅÊñπÂºèÊîπ‰∏∫<code>OBJ_ENCODING_RAW</code> Ê†ºÂºèÔºåËøô‰∏é‰∏äÈù¢ÁöÑ<code>OBJ_ENCODING_EMBSTR</code>ÁºñÁ†ÅÊñπÂºèÁöÑ‰∏çÂêå‰πãÂ§ÑÂú®‰∫éÊ≠§Êó∂Âä®ÊÄÅÂ≠óÁ¨¶‰∏≤SDSÁöÑÂÜÖÂ≠ò‰∏éÂÖ∂‰æùËµñÁöÑredisObjectÁöÑ<strong>ÂÜÖÂ≠ò‰∏çÂÜçËøûÁª≠</strong>‰∫ÜÔºå‰∏îÂΩìÂú®ÂéüÊúâÂ≠óÁ¨¶‰∏≤‰∏äËøõË°åËøΩÂä†Êó∂ÂàõÂª∫ÁöÑÊñ∞Â≠óÁ¨¶‰∏≤ÁöÑÁºñÁ†ÅÊó∂RAW</p>
<img src="/img/redis/str_raw.png" alt="str_raw" style="zoom:50%;" />
<h3 id="list">List</h3>
<p>Êª°Ë∂≥Â¶Ç‰∏ãÊù°‰ª∂List‰ºöÁî®ZipList‰Ωú‰∏∫ÂÆûÁé∞ÔºåÂê¶Âàô‰ΩøÁî®QuickList</p>
<p>Ôºà1ÔºâÂàóË°®ÂØπË±°‰øùÂ≠òÁöÑÊâÄÊúâÂ≠óÁ¨¶‰∏≤ÂÖÉÁ¥†ÁöÑÈïøÂ∫¶ÈÉΩÂ∞è‰∫é64Â≠óËäÇ</p>
<pre tabindex="0"><code class="language-config" data-lang="config">list-max-ziplist-value 64  #‰øùÂ≠òÁöÑÊâÄÊúâÂ≠óÁ¨¶‰∏≤ÂÖÉÁ¥†ÁöÑÈïøÂ∫¶ÈÉΩÂ∞è‰∫é64Â≠óËäÇ„ÄÇ
</code></pre><p>Ôºà2ÔºâÂàóË°®ÂØπË±°‰øùÂ≠òÁöÑÂÖÉÁ¥†Êï∞ÈáèÂ∞è‰∫é512‰∏™</p>
<pre tabindex="0"><code class="language-config" data-lang="config">list-max-ziplist-entries 512 #‰øùÂ≠òÁöÑÂÖÉÁ¥†Êï∞ÈáèÂ∞è‰∫é512‰∏™„ÄÇ
</code></pre><h3 id="hash">Hash</h3>
<p>HashÁöÑÂ∫ïÂ±ÇÂ≠òÂÇ®ÂèØ‰ª•‰ΩøÁî®ZiplistÂíåDict„ÄÇÂΩìHashÂØπË±°ÂèØ‰ª•ÂêåÊó∂Êª°Ë∂≥‰∏Ä‰∏ã‰∏§‰∏™Êù°‰ª∂Êó∂ÔºåÂìàÂ∏åÂØπË±°‰ΩøÁî®ZiplistÁºñÁ†ÅÔºà‰∏Ä‰∏™ÂÖÉÁ¥†Â≠òkeyÔºå‰∏ã‰∏Ä‰∏™ÂÖÉÁ¥†Â≠òvalueÔºâ</p>
<p>Ôºà1ÔºâÂìàÂ∏åÂØπË±°‰øùÂ≠òÁöÑÊâÄÊúâÈîÆÂÄºÂØπÁöÑÈîÆÂíåÂÄºÁöÑÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ÈÉΩÂ∞è‰∫é64Â≠óËäÇ</p>
<pre tabindex="0"><code class="language-config" data-lang="config">hash-max-ziplist-value 64
</code></pre><p>Ôºà2ÔºâÂìàÂ∏åÂØπË±°‰øùÂ≠òÁöÑÈîÆÂÄºÂØπÊï∞ÈáèÂ∞è‰∫é512‰∏™</p>
<pre tabindex="0"><code class="language-config" data-lang="config">hash-max-ziplist-entries 512
</code></pre><h3 id="set">Set</h3>
<p>ÂÖÉÁ¥†ÈÉΩÊòØÊï¥Êï∞Á±ªÂûãÔºåÂ∞±Áî®IntSetÂ≠òÂÇ®ÔºåÂê¶Âàô‰ΩøÁî®DictÂ≠òÂÇ®</p>
<h3 id="zset">ZSet</h3>
<p>ÂèëÈÄÅÂ¶Ç‰∏ã‰∫ãÊÉÖÔºåZSetÂ∫ïÂ±ÇÂÆûÁé∞‰ºö‰ªéZipListÂèò‰∏∫ZSkipList</p>
<p>Ôºà1ÔºâÂΩìsorted set‰∏≠ÁöÑÂÖÉÁ¥†‰∏™Êï∞ÔºåÂç≥(Êï∞ÊçÆ, score)ÂØπÁöÑÊï∞ÁõÆË∂ÖËøá128ÁöÑÊó∂</p>
<pre tabindex="0"><code class="language-config" data-lang="config">zset-max-ziplist-entries 128
</code></pre><p>Ôºà2ÔºâÂΩìsorted set‰∏≠ÊèíÂÖ•ÁöÑ‰ªªÊÑè‰∏Ä‰∏™Êï∞ÊçÆÁöÑÈïøÂ∫¶Ë∂ÖËøá‰∫Ü64ÁöÑÊó∂</p>
<pre tabindex="0"><code class="language-config" data-lang="config">zset-max-ziplist-value 64
</code></pre>
    </div>

    

    <div class="container-comment-giscus">
        <script src="https://giscus.app/client.js"
        data-repo="loveminimal/comment"
        data-repo-id="R_kgDOJNJQ8g"
        data-category="General"
        data-category-id="DIC_kwDOJNJQ8s4CYl0m"
        data-mapping="title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="noborder_light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
        </script>
</div>
</div>

        </div>
        <div id="footer"><div class="container-footer">
    

    <div class="beian">
        
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41092802000242">
            

        </a>

        
        <a href="//beian.miit.gov.cn" target="_blank">
            
            <span class="some">icp...<span>
            
        </a>
    </div>

    
    <div class="info">
        
        <a href="https://github.com/loveminimal/hugo-theme-virgo">üïäÔ∏è</a> 2016 - <span id="info-date"></span>
    </div>

</div></div>
        <div class="cool-after" style="
            
                background-color: rgba(255, 255, 255, 0.49); 
                backdrop-filter: saturate(100%) blur(6px);
            
            "></div>
    </body>
</html>
