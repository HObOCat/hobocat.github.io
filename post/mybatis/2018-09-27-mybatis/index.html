<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="mybatisä½¿ç”¨æŒ‡å— - https://hobocat.github.io/post/mybatis/2018-09-27-mybatis/">
    <meta name="author" content="Jack - https://hobocat.github.io/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>mybatisä½¿ç”¨æŒ‡å—</title>
    
    <base target="_blank">
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    
    
    
    
    <link rel="stylesheet" href="https://hobocat.github.io/style.min.94e7ed14b48117025ebd1148adc11f7268f1ebf50d97297ac663edf1aa6f52dc.css">
    
    <script>const DARK =  false ;</script>
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate cool">
        <div class="container-floating-box">
	<div class="box box1"></div>
	<div class="box box11"></div>
	<div class="box box12"></div>
	<div class="box box2"></div>
	<div class="box box3"></div>
	<div class="box box4"></div>
	<div class="box box5"></div>
	<div class="box box6"></div>
	<div class="box box7"></div>
	<div class="box box8"></div>
	<div class="box box9"></div>
</div>
        <div class="cool-before" style="background: url('/imgs/bg/wallhaven-6qr21l.jpg') left top/100% no-repeat fixed;"></div>
        <div id="header" class=""><div class="container-header">

    
    
    
    <div class="right">
        
        <h1 class="title">mybatisä½¿ç”¨æŒ‡å—</h1>
    
        
        
            <div id="toc">ğŸ“œ</div>
        
    </div>
</div>
</div>
        <div id="content">










<div class="container-main container-page ">

    

    
    
    
    <div class="rel">
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </div>
    
    

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="7409" width="12" height="12">
                <path
                    d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z"
                    p-id="7410" fill="#adb5bd"></path>
            </svg>
            2018-09-27&nbsp;&nbsp;&nbsp;
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="23838" width="11" height="11">
                <path
                    d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z"
                    p-id="23839" fill="#adb5bd"></path>
            </svg>
            2024-05-15&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="33866" width="12" height="12">
                <path
                    d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z"
                    fill="#adb5bd" p-id="33867"></path>
                <path
                    d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z"
                    fill="#adb5bd" p-id="33868"></path>
            </svg>
            6242 å­—</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="32892" width="12" height="12">
                <path
                    d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z"
                    p-id="32893" fill="#adb5bd"></path>
                <path
                    d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z"
                    p-id="32894" fill="#adb5bd"></path>
            </svg>
            13 åˆ†é’Ÿ</span>
        <div class="container-ctgtag">
	<div class="taxonomy">
		<div class="tag">
			
			
			<a href="/tags/mybatis">mybatis</a>
			
		</div>
	</div>
</div>
        
    </div>

    <div class="toc">
        <div class="container-page-operation">
	<div class="page-operation">
		<div><a href="/"><img src="/imgs/icons/home-2.svg" alt=""></a></div>
		<div><a href="/nav"><img src="/imgs/icons/iov-navigate-1.svg" alt=""></a></div>
		<div><a href="/wiki"><img src="/imgs/icons/wiki.svg" alt=""></a></div>
		<div><a href="/tags"><img src="/imgs/icons/treetags.svg" alt=""></a></div>
		<div id="light-dark"><a><img src="/imgs/icons/moon2.svg" alt=""></a></div>
		<div><a href="#"><img src="/imgs/icons/up2.svg" alt=""></a></div>
	</div>
</div>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#ä¸€ç®€ä»‹">ä¸€ã€ç®€ä»‹</a></li>
    <li><a href="#äºŒå¯åŠ¨">äºŒã€å¯åŠ¨</a></li>
    <li><a href="#ä¸‰xml-é…ç½®æ–‡ä»¶">ä¸‰ã€XML é…ç½®æ–‡ä»¶</a>
      <ul>
        <li><a href="#å¸¸ç”¨çš„å¯èƒ½ä¿®æ”¹é»˜è®¤å€¼çš„settings">å¸¸ç”¨çš„å¯èƒ½ä¿®æ”¹é»˜è®¤å€¼çš„settings</a></li>
        <li><a href="#typealiasesè®¾ç½®">typeAliasesè®¾ç½®</a></li>
        <li><a href="#å¯èƒ½éœ€è¦æ›´æ¢çš„é»˜è®¤typehandlers">å¯èƒ½éœ€è¦æ›´æ¢çš„é»˜è®¤typeHandlers</a></li>
        <li><a href="#æ’ä»¶plugins">æ’ä»¶ï¼ˆpluginsï¼‰</a></li>
      </ul>
    </li>
    <li><a href="#å››xmlæ˜ å°„æ–‡ä»¶">å››ã€XMLæ˜ å°„æ–‡ä»¶</a>
      <ul>
        <li><a href="#select">select</a></li>
        <li><a href="#insert-update-å’Œ-delete">insert, update å’Œ delete</a></li>
        <li><a href="#sql">sql</a></li>
        <li><a href="#å‚æ•°">å‚æ•°</a></li>
        <li><a href="#ç¼“å­˜">ç¼“å­˜</a></li>
        <li><a href="#ç¬¬ä¸‰æ–¹ç¼“å­˜æ¡†æ¶ehcacheçš„ä½¿ç”¨">ç¬¬ä¸‰æ–¹ç¼“å­˜æ¡†æ¶ehcacheçš„ä½¿ç”¨</a></li>
      </ul>
    </li>
    <li><a href="#äº”ç»“æœé›†">äº”ã€ç»“æœé›†</a></li>
    <li><a href="#å…­åŠ¨æ€-sql">å…­ã€åŠ¨æ€ SQL</a>
      <ul>
        <li><a href="#ifç”¨äºæ¡ä»¶åˆ¤æ–­">ifï¼Œç”¨äºæ¡ä»¶åˆ¤æ–­</a></li>
        <li><a href="#choose-choose-when-choose-otherwise">choose, choose-when, choose-otherwise</a></li>
        <li><a href="#trim-where-set">trim, where, set</a></li>
        <li><a href="#foreach">foreach</a></li>
        <li><a href="#bind">bind</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

    <div class='content  '>
        <h2 id="ä¸€ç®€ä»‹">ä¸€ã€ç®€ä»‹</h2>
<p>â€‹	MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿä¿¡æ¯ï¼Œå°†æ¥å£å’Œ Java çš„ POJOs(Plain Old Java Objects,æ™®é€šçš„ Javaå¯¹è±¡)æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ã€‚</p>
<h2 id="äºŒå¯åŠ¨">äºŒã€å¯åŠ¨</h2>
<p>ç¬¬ä¸€æ­¥ã€å¼•å…¥mavenä¾èµ–</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;groupId&gt;</span>org.mybatis<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;artifactId&gt;</span>mybatis<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;version&gt;</span>x.x.x<span style="color:#000080">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äºŒæ­¥ã€æ„å»º SqlSessionFactory</p>
<p>MyBatis çš„åº”ç”¨éƒ½æ˜¯ä»¥ä¸€ä¸ª <code>SqlSessionFactory</code> çš„å®ä¾‹ä¸ºæ ¸å¿ƒçš„ï¼Œ<code>SqlSessionFactory</code> çš„å®ä¾‹å¯ä»¥é€šè¿‡ <code>SqlSessionFactoryBuilder</code> è·å¾—ã€‚</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String<span style="color:#bbb"> </span>resource<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#d14">&#34;mybatis-config.xml&#34;</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>InputStream<span style="color:#bbb"> </span>inputStream<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Resources.<span style="color:#008080">getResourceAsStream</span>(resource);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>SqlSessionFactory<span style="color:#bbb"> </span>sqlSessionFactory<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>SqlSessionFactoryBuilder().<span style="color:#008080">build</span>(inputStream);<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ç®€å•çš„<code>mybatis-config.xml</code></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">&lt;!DOCTYPE configuration
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">  PUBLIC &#34;-//mybatis.org//DTD Config 3.0//EN&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#999;font-weight:bold;font-style:italic">  &#34;http://mybatis.org/dtd/mybatis-3-config.dtd&#34;&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;environments</span> <span style="color:#008080">default=</span><span style="color:#d14">&#34;development&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;environment</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;development&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000080">&lt;transactionManager</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;JDBC&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000080">&lt;dataSource</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;POOLED&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;driver&#34;</span> <span style="color:#008080">value=</span><span style="color:#d14">&#34;com.mysql.jdbc.Driver&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;url&#34;</span> <span style="color:#008080">value=</span><span style="color:#d14">&#34;jdbc:mysql://127.0.0.1:3306/mybatis&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;username&#34;</span> <span style="color:#008080">value=</span><span style="color:#d14">&#34;root&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;password&#34;</span> <span style="color:#008080">value=</span><span style="color:#d14">&#34;123456&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000080">&lt;/dataSource&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/environment&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/environments&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;mappers&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;mapper</span> <span style="color:#008080">resource=</span><span style="color:#d14">&#34;mapper/PersonMapper.xml&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/mappers&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/configuration&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸‰æ­¥ã€SqlSessionFactory ä¸­è·å– SqlSession</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>SqlSession<span style="color:#bbb"> </span>session<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>sqlSessionFactory.<span style="color:#008080">openSession</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//com.kun.start.mapper.PersonMapperæ˜¯PersonMapper.xmlçš„namespaceï¼ŒselectAllå…·ä½“sqlçš„ID</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>List<span style="color:#000;font-weight:bold">&lt;</span>Object<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>persons<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>session.<span style="color:#008080">selectList</span>(<span style="color:#d14">&#34;com.kun.start.mapper.PersonMapper.selectAll&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(Object<span style="color:#bbb"> </span>person<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>persons)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(person);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨æ¥å£çš„æ–¹å¼è°ƒç”¨</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>SqlSession<span style="color:#bbb"> </span>session<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>sqlSessionFactory.<span style="color:#008080">openSession</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">//ä¼šæ ¹æ®PersonMapperå…¨é™å®šå‘½æ‰¾åˆ°å¯¹åº”çš„PersonMapper.xmlï¼ŒåŠ¨æ€ä»£ç†æ­¤æ¥å£</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>PersonMapper<span style="color:#bbb"> </span>mapper<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>session.<span style="color:#008080">getMapper</span>(PersonMapper.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>List<span style="color:#000;font-weight:bold">&lt;</span>Person<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>persons<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>mapper.<span style="color:#008080">selectAll</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(Person<span style="color:#bbb"> </span>person<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>persons)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(person);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ä½œç”¨åŸŸï¼ˆScopeï¼‰å’Œç”Ÿå‘½å‘¨æœŸ</p>
<ul>
<li>
<p><code>SqlSessionFactoryBuilder</code>ï¼šä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒï¼Œå³ä¼šè¢«ä¸¢å¼ƒã€‚</p>
</li>
<li>
<p><code>SqlSessionFactory</code>ï¼šSqlSessionFactory ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±å¯¹å®ƒè¿›è¡Œæ¸…é™¤æˆ–é‡å»ºï¼Œåº”ç”¨ä¸­åº”è¯¥åªå­˜åœ¨ä¸€ä¸ªã€‚</p>
</li>
<li>
<p><code>SqlSession</code>ï¼šæ¯ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰å®ƒè‡ªå·±çš„ SqlSession å®ä¾‹ã€‚SqlSession çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸï¼Œä¸å¯ä»¥æ”¾åœ¨ThreadLocalå½“ä¸­</p>
</li>
<li>
<p><code>Mapper Instances</code>ï¼šç”¨è¿‡ä¹‹åå³å¯åºŸå¼ƒ,å¹¶ä¸éœ€è¦æ˜¾å¼åœ°å…³é—­æ˜ å°„å™¨å®ä¾‹ã€‚</p>
</li>
</ul>
<h2 id="ä¸‰xml-é…ç½®æ–‡ä»¶">ä¸‰ã€XML é…ç½®æ–‡ä»¶</h2>
<h3 id="å¸¸ç”¨çš„å¯èƒ½ä¿®æ”¹é»˜è®¤å€¼çš„settings">å¸¸ç”¨çš„å¯èƒ½ä¿®æ”¹é»˜è®¤å€¼çš„settings</h3>
<table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>æè¿°</th>
<th>é»˜è®¤å€¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>lazyLoadingEnabled</td>
<td>æ‡’åŠ è½½çš„å…¨å±€å¼€å…³ã€‚å½“å¼€å¯æ—¶ï¼Œæ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½ã€‚ ç‰¹å®šå…³è”å…³ç³»ä¸­å¯é€šè¿‡è®¾ç½®<code>fetchType</code>å±æ€§æ¥è¦†ç›–è¯¥é¡¹çš„å¼€å…³çŠ¶æ€ã€‚</td>
<td>false</td>
</tr>
<tr>
<td>aggressiveLazyLoading</td>
<td>å½“å¼€å¯æ—¶ï¼Œä»»ä½•æ–¹æ³•çš„è°ƒç”¨éƒ½ä¼šåŠ è½½è¯¥å¯¹è±¡çš„æ‰€æœ‰å±æ€§ã€‚å¦åˆ™ï¼Œæ¯ä¸ªå±æ€§ä¼šæŒ‰éœ€åŠ è½½</td>
<td>false (true in â‰¤3.4.1)</td>
</tr>
<tr>
<td>mapUnderscoreToCamelCase</td>
<td>å¦å¼€å¯è‡ªåŠ¨é©¼å³°å‘½åè§„åˆ™ï¼ˆcamel caseï¼‰æ˜ å°„</td>
<td>False</td>
</tr>
<tr>
<td>lazyLoadTriggerMethods</td>
<td>æŒ‡å®šå¯¹è±¡çš„å“ªä¸ªæ–¹æ³•è§¦å‘å»¶è¿ŸåŠ è½½</td>
<td>equals,clone,hashCode,toString</td>
</tr>
<tr>
<td>defaultEnumTypeHandler</td>
<td>æŒ‡å®š Enum ä½¿ç”¨çš„é»˜è®¤ <code>TypeHandler</code> ã€‚ (ä»3.4.5å¼€å§‹)</td>
<td>org.apache.ibatis.type.EnumTypeHandler</td>
</tr>
</tbody>
</table>
<p><a href="http://www.mybatis.org/mybatis-3/zh/configuration.html#settings">è¯¦ç»†çš„settingè®¾ç½®</a></p>
<h3 id="typealiasesè®¾ç½®">typeAliasesè®¾ç½®</h3>
<p>ç±»å‹åˆ«åæ˜¯ä¸º java ç±»å‹è®¾ç½®ä¸€ä¸ªçŸ­çš„åå­—ï¼Œä¹Ÿå¯ä»¥åœ¨ç±»ä¸Šä½¿ç”¨<code>@Alias(&quot;xxx&quot;)</code>ã€‚å®ƒåªå’Œ XML é…ç½®æœ‰å…³ã€‚ä¾‹å¦‚:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;typeAliases&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;typeAlias</span> <span style="color:#008080">alias=</span><span style="color:#d14">&#34;Author&#34;</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;domain.blog.Author&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;typeAlias</span> <span style="color:#008080">alias=</span><span style="color:#d14">&#34;Blog&#34;</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;domain.blog.Blog&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;typeAlias</span> <span style="color:#008080">alias=</span><span style="color:#d14">&#34;Comment&#34;</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;domain.blog.Comment&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/typeAliases&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å¯èƒ½éœ€è¦æ›´æ¢çš„é»˜è®¤typehandlers">å¯èƒ½éœ€è¦æ›´æ¢çš„é»˜è®¤typeHandlers</h3>
<table>
<thead>
<tr>
<th>ç±»å‹å¤„ç†å™¨</th>
<th>Java ç±»å‹</th>
<th>JDBC ç±»å‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>EnumTypeHandler</td>
<td>Enumeration Type</td>
<td>VARCHAR-ä»»ä½•å…¼å®¹çš„å­—ç¬¦ä¸²ç±»å‹ï¼Œå­˜å‚¨æšä¸¾çš„åç§°ï¼ˆè€Œä¸æ˜¯ç´¢å¼•ï¼‰</td>
</tr>
<tr>
<td>EnumOrdinalTypeHandler</td>
<td>Enumeration Type</td>
<td>ä»»ä½•å…¼å®¹çš„ <code>NUMERIC</code> æˆ– <code>DOUBLE</code> ç±»å‹ï¼Œå­˜å‚¨æšä¸¾çš„ç´¢å¼•ï¼ˆè€Œä¸æ˜¯åç§°ï¼‰ã€‚</td>
</tr>
</tbody>
</table>
<p>è‡ªå®šä¹‰æšä¸¾å¤„ç†å™¨ï¼š</p>
<ol>
<li>
<p>æšä¸¾ç±»æ¥å£ï¼Œå®šä¹‰ç»Ÿä¸€è§„èŒƒ</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">interface</span> <span style="color:#458;font-weight:bold">BaseEnum</span><span style="color:#000;font-weight:bold">&lt;</span>E<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">extends</span><span style="color:#bbb"> </span>Enum<span style="color:#000;font-weight:bold">&lt;?&gt;</span>,T<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>T<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">getCode</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>String<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">getMessage</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>è‡ªå®šä¹‰æšä¸¾ç±»</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">enum</span><span style="color:#bbb"> </span>InfoEnum<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">implements</span><span style="color:#bbb"> </span>BaseEnum<span style="color:#000;font-weight:bold">&lt;</span>InfoEnum,String<span style="color:#000;font-weight:bold">&gt;</span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>SUCCESS(<span style="color:#d14">&#34;200&#34;</span>,<span style="color:#d14">&#34;æˆåŠŸ&#34;</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>FAILD(<span style="color:#d14">&#34;500&#34;</span>,<span style="color:#d14">&#34;é”™è¯¯&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>code;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>message;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span>Map<span style="color:#000;font-weight:bold">&lt;</span>String,InfoEnum<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>enumMap<span style="color:#000;font-weight:bold">=</span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>HashMap<span style="color:#000;font-weight:bold">&lt;</span>String,<span style="color:#bbb"> </span>InfoEnum<span style="color:#000;font-weight:bold">&gt;</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">static</span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>(InfoEnum<span style="color:#bbb"> </span>type:InfoEnum.<span style="color:#008080">values</span>()){<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>enumMap.<span style="color:#008080">put</span>(type.<span style="color:#008080">getCode</span>(),<span style="color:#bbb"> </span>type);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span>Map<span style="color:#000;font-weight:bold">&lt;</span>String,InfoEnum<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">getAll</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span>enumMap;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">InfoEnum</span>(String<span style="color:#bbb"> </span>code,<span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>message)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">this</span>.<span style="color:#008080">code</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>code;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">this</span>.<span style="color:#008080">message</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>message;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">getCode</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">this</span>.<span style="color:#008080">code</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">getMessage</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">this</span>.<span style="color:#008080">message</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>è‡ªå®šä¹‰æšä¸¾ç±»å‹å¤„ç†å™¨</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">InfoEnumTypeHandler</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">extends</span><span style="color:#bbb"> </span>BaseTypeHandler<span style="color:#000;font-weight:bold">&lt;</span>InfoEnum<span style="color:#000;font-weight:bold">&gt;</span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">setNonNullParameter</span>(PreparedStatement<span style="color:#bbb"> </span>ps,<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>i,<span style="color:#bbb"> </span>InfoEnum<span style="color:#bbb"> </span>parameter,<span style="color:#bbb"> </span>JdbcType<span style="color:#bbb"> </span>jdbcType)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>SQLException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>ps.<span style="color:#008080">setString</span>(i,<span style="color:#bbb"> </span>parameter.<span style="color:#008080">getCode</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span>InfoEnum<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">getNullableResult</span>(ResultSet<span style="color:#bbb"> </span>rs,<span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>columnName)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>SQLException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>String<span style="color:#bbb"> </span>columnValue<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>rs.<span style="color:#008080">getString</span>(columnName);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span>InfoEnum.<span style="color:#008080">getAll</span>().<span style="color:#008080">get</span>(columnValue);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span>InfoEnum<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">getNullableResult</span>(ResultSet<span style="color:#bbb"> </span>rs,<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>columnIndex)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>SQLException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>String<span style="color:#bbb"> </span>columnValue<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>rs.<span style="color:#008080">getString</span>(columnIndex);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span>InfoEnum.<span style="color:#008080">getAll</span>().<span style="color:#008080">get</span>(columnValue);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span>InfoEnum<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">getNullableResult</span>(CallableStatement<span style="color:#bbb"> </span>cs,<span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>columnIndex)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>SQLException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>String<span style="color:#bbb"> </span>columnValue<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>cs.<span style="color:#008080">getString</span>(columnIndex);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span>InfoEnum.<span style="color:#008080">getAll</span>().<span style="color:#008080">get</span>(columnValue);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>é…ç½®è‡ªå®šä¹‰ç±»å‹å¤„ç†å™¨</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- mybatis-config.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;typeHandlers&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;typeHandler</span> <span style="color:#008080">handler=</span><span style="color:#d14">&#34;com.kun.start.typehandler.InfoEnumTypeHandler&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/typeHandlers&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="æ’ä»¶plugins">æ’ä»¶ï¼ˆpluginsï¼‰</h3>
<p>MyBatis å…è®¸ä½ åœ¨å·²æ˜ å°„è¯­å¥æ‰§è¡Œè¿‡ç¨‹ä¸­çš„æŸä¸€ç‚¹è¿›è¡Œæ‹¦æˆªè°ƒç”¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒMyBatis å…è®¸ä½¿ç”¨æ’ä»¶æ¥æ‹¦æˆªçš„æ–¹æ³•è°ƒç”¨åŒ…æ‹¬ï¼š</p>
<ul>
<li>Executor (update, query, flushStatements, commit, rollback, getTransaction, close, isClosed)</li>
<li>ParameterHandler (getParameterObject, setParameters)</li>
<li>ResultSetHandler (handleResultSets, handleOutputParameters)</li>
<li>StatementHandler (prepare, parameterize, batch, update, query)</li>
</ul>
<p>ä¾‹è‡ªå®šä¹‰æ’ä»¶ï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Intercepts</span>(value<span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>{<span style="color:#3c5d5d;font-weight:bold">@Signature</span>(type<span style="color:#000;font-weight:bold">=</span>Executor.<span style="color:#008080">class</span>,method<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;query&#34;</span>,args<span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>{MappedStatement.<span style="color:#008080">class</span>,Object.<span style="color:#008080">class</span>,RowBounds.<span style="color:#008080">class</span>,ResultHandler.<span style="color:#008080">class</span>})})<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">ExamplePlugin</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">implements</span><span style="color:#bbb"> </span>Interceptor{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span>Object<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">intercept</span>(Invocation<span style="color:#bbb"> </span>invocation)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>Throwable<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(Object<span style="color:#bbb"> </span>arg<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>invocation.<span style="color:#008080">getArgs</span>())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">if</span>(arg<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">!=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">null</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&amp;&amp;</span><span style="color:#bbb"> </span>arg<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">instanceof</span><span style="color:#bbb"> </span>MappedStatement)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>MappedStatement<span style="color:#bbb"> </span>ms<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>(MappedStatement)<span style="color:#bbb"> </span>arg;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;id = &#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span>ms.<span style="color:#008080">getId</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span>invocation.<span style="color:#008080">proceed</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span>Object<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">plugin</span>(Object<span style="color:#bbb"> </span>target)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span>Plugin.<span style="color:#008080">wrap</span>(target,<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">this</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">setProperties</span>(Properties<span style="color:#bbb"> </span>properties)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(properties.<span style="color:#008080">get</span>(<span style="color:#d14">&#34;pro&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å››xmlæ˜ å°„æ–‡ä»¶">å››ã€XMLæ˜ å°„æ–‡ä»¶</h2>
<p>SQL æ˜ å°„æ–‡ä»¶å‡ ä¸ªé¡¶çº§å…ƒç´ </p>
<ul>
<li><code>cache</code> â€“ ç»™å®šå‘½åç©ºé—´çš„ç¼“å­˜é…ç½®ã€‚</li>
<li><code>cache-ref</code> â€“ å…¶ä»–å‘½åç©ºé—´ç¼“å­˜é…ç½®çš„å¼•ç”¨ã€‚</li>
<li><code>resultMap</code> â€“ æ˜¯æœ€å¤æ‚ä¹Ÿæ˜¯æœ€å¼ºå¤§çš„å…ƒç´ ï¼Œç”¨æ¥æè¿°å¦‚ä½•ä»æ•°æ®åº“ç»“æœé›†ä¸­æ¥åŠ è½½å¯¹è±¡ã€‚</li>
<li><code>sql</code> â€“ å¯è¢«å…¶ä»–è¯­å¥å¼•ç”¨çš„å¯é‡ç”¨è¯­å¥å—ã€‚</li>
<li><code>insert</code> â€“ æ˜ å°„æ’å…¥è¯­å¥</li>
<li><code>update</code> â€“ æ˜ å°„æ›´æ–°è¯­å¥</li>
<li><code>delete</code> â€“ æ˜ å°„åˆ é™¤è¯­å¥</li>
<li><code>select</code> â€“ æ˜ å°„æŸ¥è¯¢è¯­å¥</li>
</ul>
<h3 id="select">select</h3>
<ul>
<li>
<p>åŸºæœ¬ï¼Œ<code>#{id}</code>ä¼šåœ¨é¢„ç¼–è¯‘è¯­ä¸­è¢«æ›¿æ¢ä¸º<code>?</code>ï¼Œå½“åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶å€™ï¼Œ<code>#{param}</code>å¯ä»¥æ˜¯ä»»æ„åç§°ï¼Œå½“å‚æ•°ä¸ªæ•°å¤§äº1æ—¶ï¼Œä½¿ç”¨<code>#{arg0}ï¼Œ#{arg1}ï¼Œ#{arg2}...</code>æˆ–è€…<code>#{param1}ï¼Œ#{param2}ï¼Œ#{param3}...</code>ï¼Œæ­¤æ—¶ä¹ æƒ¯ä½¿ç”¨<code>@Param(&quot;[å‚æ•°åç§°]&quot;)</code>æ¥æŒ‡å®šå‚æ•°çš„åç§°ã€‚</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;select</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;selectPerson&#34;</span> <span style="color:#008080">parameterType=</span><span style="color:#d14">&#34;int&#34;</span> <span style="color:#008080">resultType=</span><span style="color:#d14">&#34;hashmap&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  SELECT * FROM PERSON WHERE ID = #{id}
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>å¸¸ç”¨å¯é€‰å±æ€§</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>parameterType</td>
<td>å°†ä¼šä¼ å…¥è¿™æ¡è¯­å¥çš„å‚æ•°ç±»çš„å®Œå…¨é™å®šåæˆ–åˆ«åã€‚è¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„ï¼Œå› ä¸º MyBatis å¯ä»¥é€šè¿‡ TypeHandler æ¨æ–­å‡ºå…·ä½“ä¼ å…¥è¯­å¥çš„å‚æ•°ï¼Œé»˜è®¤å€¼ä¸º unset</td>
</tr>
<tr>
<td>resultType</td>
<td>ä»è¿™æ¡è¯­å¥ä¸­è¿”å›çš„æœŸæœ›ç±»å‹çš„ç±»çš„å®Œå…¨é™å®šåæˆ–åˆ«åã€‚æ³¨æ„å¦‚æœæ˜¯é›†åˆæƒ…å½¢ï¼Œé‚£åº”è¯¥æ˜¯é›†åˆå¯ä»¥åŒ…å«çš„ç±»å‹ï¼Œè€Œä¸èƒ½æ˜¯é›†åˆæœ¬èº«ã€‚ä½¿ç”¨ resultType æˆ– resultMapï¼Œä½†ä¸èƒ½åŒæ—¶ä½¿ç”¨</td>
</tr>
<tr>
<td>resultMap</td>
<td>å¤–éƒ¨ resultMap çš„å‘½åå¼•ç”¨ã€‚ç»“æœé›†çš„æ˜ å°„æ˜¯ MyBatis æœ€å¼ºå¤§çš„ç‰¹æ€§ï¼Œå¯¹å…¶æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ç†è§£çš„è¯ï¼Œè®¸å¤šå¤æ‚æ˜ å°„çš„æƒ…å½¢éƒ½èƒ½è¿åˆƒè€Œè§£ã€‚ä½¿ç”¨ resultMap æˆ– resultTypeï¼Œä½†ä¸èƒ½åŒæ—¶ä½¿ç”¨</td>
</tr>
<tr>
<td>flushCache</td>
<td>å°†å…¶è®¾ç½®ä¸º trueï¼Œä»»ä½•æ—¶å€™åªè¦è¯­å¥è¢«è°ƒç”¨ï¼Œéƒ½ä¼šå¯¼è‡´æœ¬åœ°ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜éƒ½ä¼šè¢«æ¸…ç©ºï¼Œé»˜è®¤å€¼ï¼šfalse</td>
</tr>
<tr>
<td>useCache</td>
<td>å°†å…¶è®¾ç½®ä¸º trueï¼Œå°†ä¼šå¯¼è‡´æœ¬æ¡è¯­å¥çš„ç»“æœè¢«äºŒçº§ç¼“å­˜ï¼Œé»˜è®¤å€¼ï¼šå¯¹ select å…ƒç´ ä¸º true</td>
</tr>
<tr>
<td>statementType</td>
<td>STATEMENTï¼ŒPREPARED æˆ– CALLABLE çš„ä¸€ä¸ªã€‚è¿™ä¼šè®© MyBatis åˆ†åˆ«ä½¿ç”¨ Statementï¼ŒPreparedStatement æˆ– CallableStatementï¼Œé»˜è®¤å€¼ï¼šPREPARED</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3 id="insert-update-å’Œ-delete">insert, update å’Œ delete</h3>
<ul>
<li>
<p>å¸¸ç”¨å¯é€‰å±æ€§ï¼ˆinsertã€updateã€deleteï¼‰</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>parameterType</td>
<td>å°†è¦ä¼ å…¥è¯­å¥çš„å‚æ•°çš„å®Œå…¨é™å®šç±»åæˆ–åˆ«åã€‚è¿™ä¸ªå±æ€§æ˜¯å¯é€‰çš„ï¼Œå› ä¸º MyBatis å¯ä»¥é€šè¿‡ TypeHandler æ¨æ–­å‡ºå…·ä½“ä¼ å…¥è¯­å¥çš„å‚æ•°ï¼Œé»˜è®¤å€¼ä¸º unset</td>
</tr>
<tr>
<td>flushCache</td>
<td>å°†å…¶è®¾ç½®ä¸º trueï¼Œä»»ä½•æ—¶å€™åªè¦è¯­å¥è¢«è°ƒç”¨ï¼Œéƒ½ä¼šå¯¼è‡´æœ¬åœ°ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜éƒ½ä¼šè¢«æ¸…ç©ºï¼Œé»˜è®¤å€¼ï¼štrue</td>
</tr>
<tr>
<td>statementType</td>
<td>STATEMENTï¼ŒPREPARED æˆ– CALLABLE çš„ä¸€ä¸ªã€‚è¿™ä¼šè®© MyBatis åˆ†åˆ«ä½¿ç”¨ Statementï¼ŒPreparedStatement æˆ– CallableStatementï¼Œé»˜è®¤å€¼ï¼šPREPARED</td>
</tr>
<tr>
<td>useGeneratedKeys</td>
<td>ï¼ˆä»…å¯¹ insert å’Œ update æœ‰ç”¨ï¼‰è¿™ä¼šä»¤ MyBatis ä½¿ç”¨ JDBC çš„ getGeneratedKeys æ–¹æ³•æ¥å–å‡ºç”±æ•°æ®åº“å†…éƒ¨ç”Ÿæˆçš„ä¸»é”®ï¼ˆæ¯”å¦‚ï¼šåƒ MySQL å’Œ SQL Server è¿™æ ·çš„å…³ç³»æ•°æ®åº“ç®¡ç†ç³»ç»Ÿçš„è‡ªåŠ¨é€’å¢å­—æ®µï¼‰ï¼Œé»˜è®¤å€¼ï¼šfalse</td>
</tr>
<tr>
<td>keyProperty</td>
<td>ï¼ˆä»…å¯¹ insert å’Œ update æœ‰ç”¨ï¼‰å”¯ä¸€æ ‡è®°ä¸€ä¸ªå±æ€§ï¼ŒMyBatis ä¼šé€šè¿‡ getGeneratedKeys çš„è¿”å›å€¼æˆ–è€…é€šè¿‡ insert è¯­å¥çš„ selectKey å­å…ƒç´ è®¾ç½®å®ƒçš„é”®å€¼ï¼Œé»˜è®¤ï¼š<code>unset</code>ã€‚å¦‚æœå¸Œæœ›å¾—åˆ°å¤šä¸ªç”Ÿæˆçš„åˆ—ï¼Œä¹Ÿå¯ä»¥æ˜¯é€—å·åˆ†éš”çš„å±æ€§åç§°åˆ—è¡¨</td>
</tr>
<tr>
<td>keyColumn</td>
<td>ï¼ˆä»…å¯¹ insert å’Œ update æœ‰ç”¨ï¼‰é€šè¿‡ç”Ÿæˆçš„é”®å€¼è®¾ç½®è¡¨ä¸­çš„åˆ—åï¼Œè¿™ä¸ªè®¾ç½®ä»…åœ¨æŸäº›æ•°æ®åº“ï¼ˆåƒ PostgreSQLï¼‰æ˜¯å¿…é¡»çš„ï¼Œå½“ä¸»é”®åˆ—ä¸æ˜¯è¡¨ä¸­çš„ç¬¬ä¸€åˆ—çš„æ—¶å€™éœ€è¦è®¾ç½®ã€‚å¦‚æœå¸Œæœ›å¾—åˆ°å¤šä¸ªç”Ÿæˆçš„åˆ—ï¼Œä¹Ÿå¯ä»¥æ˜¯é€—å·åˆ†éš”çš„å±æ€§åç§°åˆ—è¡¨</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>æœ‰äº›æ•°æ®åº“ï¼ˆä¾‹å¦‚Oracleï¼‰ä¸»é”®ç”Ÿæˆç­–ç•¥æ˜¯åºåˆ—åŒ–è¡¨ï¼Œæ‰€ä»¥<code>select</code>å¼•å…¥å­æ ‡ç­¾<code>selectKey</code></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;insert</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;insertUser&#34;</span> <span style="color:#000080">&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;selectKey</span> <span style="color:#008080">resultType=</span><span style="color:#d14">&#34;int&#34;</span> <span style="color:#008080">keyProperty=</span><span style="color:#d14">&#34;id&#34;</span> <span style="color:#008080">order=</span><span style="color:#d14">&#34;BEFORE&#34;</span><span style="color:#000080">&gt;</span> 
</span></span><span style="display:flex;"><span>    select SEQ_USER_ID.nextval as id from dual 
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/selectKey&gt;</span> 
</span></span><span style="display:flex;"><span>  insert into user (id,name,password) values (#{id},#{name},#{password}) 
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/insert&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>selectKeyç›¸å…³å±æ€§</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>keyProperty</td>
<td>selectKey è¯­å¥ç»“æœåº”è¯¥è¢«è®¾ç½®çš„ç›®æ ‡å±æ€§ã€‚å¦‚æœå¸Œæœ›å¾—åˆ°å¤šä¸ªç”Ÿæˆçš„åˆ—ï¼Œä¹Ÿå¯ä»¥æ˜¯é€—å·åˆ†éš”çš„å±æ€§åç§°åˆ—è¡¨</td>
</tr>
<tr>
<td>resultType</td>
<td>ç»“æœçš„ç±»å‹ã€‚MyBatis é€šå¸¸å¯ä»¥æ¨ç®—å‡ºæ¥ï¼Œä½†æ˜¯ä¸ºäº†æ›´åŠ ç¡®å®šå†™ä¸Šä¹Ÿä¸ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ã€‚</td>
</tr>
<tr>
<td>order</td>
<td>è¿™å¯ä»¥è¢«è®¾ç½®ä¸º BEFORE æˆ– AFTERã€‚å¦‚æœè®¾ç½®ä¸º BEFOREï¼Œé‚£ä¹ˆå®ƒä¼šé¦–å…ˆé€‰æ‹©ä¸»é”®ï¼Œè®¾ç½® keyProperty ç„¶åæ‰§è¡Œæ’å…¥è¯­å¥ã€‚å¦‚æœè®¾ç½®ä¸º AFTERï¼Œé‚£ä¹ˆå…ˆæ‰§è¡Œæ’å…¥è¯­å¥ï¼Œç„¶åæ˜¯ selectKey å…ƒç´  - è¿™å’Œåƒ Oracle çš„æ•°æ®åº“ç›¸ä¼¼ï¼Œåœ¨æ’å…¥è¯­å¥å†…éƒ¨å¯èƒ½æœ‰åµŒå…¥ç´¢å¼•è°ƒç”¨</td>
</tr>
<tr>
<td>statementType</td>
<td>ä¸å‰é¢ç›¸åŒï¼ŒMyBatis æ”¯æŒ STATEMENTï¼ŒPREPARED å’Œ CALLABLE è¯­å¥çš„æ˜ å°„ç±»å‹</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h3 id="sql">sql</h3>
<p>è¿™ä¸ªå…ƒç´ å¯ä»¥è¢«ç”¨æ¥å®šä¹‰å¯é‡ç”¨çš„ SQL ä»£ç æ®µï¼Œå¯ä»¥åŒ…å«åœ¨å…¶ä»–è¯­å¥ä¸­ã€‚å®ƒå¯ä»¥è¢«é™æ€åœ°(åœ¨åŠ è½½å‚æ•°) å‚æ•°åŒ–. ä¸åŒçš„å±æ€§å€¼é€šè¿‡åŒ…å«çš„å®ä¾‹å˜åŒ–. æ¯”å¦‚ï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;sql</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;sometable&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  ${prefix}Table
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/sql&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;sql</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;someinclude&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  from <span style="color:#000080">&lt;include</span> <span style="color:#008080">refid=</span><span style="color:#d14">&#34;${include_target}&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/sql&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;select</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;select&#34;</span> <span style="color:#008080">resultType=</span><span style="color:#d14">&#34;map&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  select field1, field2, field3
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;include</span> <span style="color:#008080">refid=</span><span style="color:#d14">&#34;someinclude&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;prefix&#34;</span> <span style="color:#008080">value=</span><span style="color:#d14">&#34;Some&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;property</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;include_target&#34;</span> <span style="color:#008080">value=</span><span style="color:#d14">&#34;sometable&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/include&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å‚æ•°">å‚æ•°</h3>
<p>ä½¿ç”¨ <code>#{}</code> æ ¼å¼çš„è¯­æ³•ä¼šå¯¼è‡´ MyBatis åˆ›å»º <code>PreparedStatement</code> å‚æ•°å¹¶å®‰å…¨åœ°è®¾ç½®å‚æ•°ï¼ˆä½¿ç”¨ <code>?</code> ï¼‰ã€‚ä¸è¿‡æœ‰æ—¶éœ€è¦åœ¨ SQL è¯­å¥ä¸­æ’å…¥ä¸€ä¸ªä¸è½¬ä¹‰çš„å­—ç¬¦ä¸²ã€‚æ¯”å¦‚ ORDER BY å°±éœ€è¦ä½¿ç”¨<code>${}</code></p>
<h3 id="ç¼“å­˜">ç¼“å­˜</h3>
<p>Mybatisé»˜è®¤æƒ…å†µä¸‹æ˜¯æ²¡æœ‰å¼€å¯ç¼“å­˜çš„,é™¤äº†å±€éƒ¨çš„ session ç¼“å­˜,å¯ä»¥å¢å¼ºå¤„ç†å¾ªç¯ã€‚å¼€å¯äºŒçº§ç¼“å­˜éœ€è¦åŠ å…¥<code>cache</code>æ ‡ç­¾</p>
<p><code>cache</code>çš„æ•ˆæœå¦‚ä¸‹:</p>
<ul>
<li>æ˜ å°„è¯­å¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰ select è¯­å¥å°†ä¼šè¢«ç¼“å­˜ã€‚</li>
<li>æ˜ å°„è¯­å¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰ insert,update å’Œ delete è¯­å¥ä¼šåˆ·æ–°ç¼“å­˜ã€‚</li>
<li>ç¼“å­˜ä¼šä½¿ç”¨ Least Recently Used(LRU,æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„)ç®—æ³•æ¥æ”¶å›ã€‚</li>
<li>æ ¹æ®æ—¶é—´è¡¨(æ¯”å¦‚ no Flush Interval,æ²¡æœ‰åˆ·æ–°é—´éš”), ç¼“å­˜ä¸ä¼šä»¥ä»»ä½•æ—¶é—´é¡ºåº æ¥åˆ·æ–°ã€‚</li>
<li>ç¼“å­˜ä¼šå­˜å‚¨åˆ—è¡¨é›†åˆæˆ–å¯¹è±¡(æ— è®ºæŸ¥è¯¢æ–¹æ³•è¿”å›ä»€ä¹ˆ)çš„ 1024 ä¸ªå¼•ç”¨ã€‚</li>
<li>ç¼“å­˜ä¼šè¢«è§†ä¸ºæ˜¯ read/write(å¯è¯»/å¯å†™)çš„ç¼“å­˜,æ„å‘³ç€å¯¹è±¡æ£€ç´¢ä¸æ˜¯å…±äº«çš„,è€Œ ä¸”å¯ä»¥å®‰å…¨åœ°è¢«è°ƒç”¨è€…ä¿®æ”¹,è€Œä¸å¹²æ‰°å…¶ä»–è°ƒç”¨è€…æˆ–çº¿ç¨‹æ‰€åšçš„æ½œåœ¨ä¿®æ”¹ã€‚</li>
</ul>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--eviction:å›æ”¶ç­–ç•¥ï¼ŒflushInterval:åˆ·æ–°é—´éš”ï¼Œé»˜è®¤ä¸è®¾ç½®ï¼Œsize:å¼•ç”¨æ•°ç›®,é»˜è®¤1024ï¼ŒreadOnlyï¼šè¿”å›å¯¹è±¡æ˜¯å¦åªè¯»ï¼ˆä¿è¯å®‰å…¨æ€§ï¼‰ï¼Œé»˜è®¤false--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;cache</span> <span style="color:#008080">eviction=</span><span style="color:#d14">&#34;FIFO&#34;</span> <span style="color:#008080">flushInterval=</span><span style="color:#d14">&#34;60000&#34;</span> <span style="color:#008080">size=</span><span style="color:#d14">&#34;512&#34;</span> <span style="color:#008080">readOnly=</span><span style="color:#d14">&#34;true&#34;</span><span style="color:#000080">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ”¶å›ç­–ç•¥æœ‰:</p>
<ul>
<li><code>LRU</code> â€“ æœ€è¿‘æœ€å°‘ä½¿ç”¨çš„:ç§»é™¤æœ€é•¿æ—¶é—´ä¸è¢«ä½¿ç”¨çš„å¯¹è±¡ã€‚</li>
<li><code>FIFO</code> â€“ å…ˆè¿›å…ˆå‡º:æŒ‰å¯¹è±¡è¿›å…¥ç¼“å­˜çš„é¡ºåºæ¥ç§»é™¤å®ƒä»¬ã€‚</li>
<li><code>SOFT</code> â€“ è½¯å¼•ç”¨:ç§»é™¤åŸºäºåƒåœ¾å›æ”¶å™¨çŠ¶æ€å’Œè½¯å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚</li>
<li><code>WEAK</code> â€“ å¼±å¼•ç”¨:æ›´ç§¯æåœ°ç§»é™¤åŸºäºåƒåœ¾æ”¶é›†å™¨çŠ¶æ€å’Œå¼±å¼•ç”¨è§„åˆ™çš„å¯¹è±¡ã€‚</li>
</ul>
<p>ä½¿ç”¨<code>cache-ref</code>æ ‡ç­¾è´¡çŒ®ç¼“å­˜é…ç½®å®ä¾‹</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;cache-ref</span> <span style="color:#008080">namespace=</span><span style="color:#d14">&#34;com.someone.application.data.SomeMapper&#34;</span><span style="color:#000080">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç¬¬ä¸‰æ–¹ç¼“å­˜æ¡†æ¶ehcacheçš„ä½¿ç”¨">ç¬¬ä¸‰æ–¹ç¼“å­˜æ¡†æ¶ehcacheçš„ä½¿ç”¨</h3>
<p>ç¬¬ä¸€æ­¥ï¼šå¼•å…¥mavenä¾èµ–</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;groupId&gt;</span>org.ehcache<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;artifactId&gt;</span>ehcache<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;version&gt;</span>ç‰ˆæœ¬å·<span style="color:#000080">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;groupId&gt;</span>org.mybatis.caches<span style="color:#000080">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;artifactId&gt;</span>mybatis-ehcache<span style="color:#000080">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;version&gt;</span>ç‰ˆæœ¬å·<span style="color:#000080">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬äºŒæ­¥ï¼šé…ç½®ehcacheé…ç½®æ–‡ä»¶</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--nameå¾ˆé‡è¦ï¼Œå¿…é¡»å’ŒMapperçš„å‘½åç©ºé—´å¯¹åº”--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;cache</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;com.kun.xxx.PersonMapper&#34;</span> <span style="color:#008080">maxElementsInMemory=</span><span style="color:#d14">&#34;1024&#34;</span> <span style="color:#008080">external=</span><span style="color:#d14">&#34;false&#34;</span> <span style="color:#008080">timeToIdleSeconds=</span><span style="color:#d14">&#34;300&#34;</span> <span style="color:#008080">timeToLiveSeconds=</span><span style="color:#d14">&#34;600&#34;</span> <span style="color:#008080">overflowToDisk=</span><span style="color:#d14">&#34;true&#34;</span><span style="color:#000080">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬ä¸‰æ­¥ï¼šåœ¨mybatisé…ç½®æ–‡ä»¶ä¸­é…ç½®åˆ«å</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;typeAlias</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;org.mybatis.caches.ehcache.EhcacheCache&#34;</span> <span style="color:#008080">alias=</span><span style="color:#d14">&#34;ehcache&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç¬¬å››æ­¥ï¼šåœ¨éœ€è¦å¼•ç”¨ç¼“å­˜çš„Mapperæ–‡ä»¶ä¸­å¼•ç”¨</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;cache</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;ehcache&#34;</span><span style="color:#000080">/&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="äº”ç»“æœé›†">äº”ã€ç»“æœé›†</h2>
<p>resultMapå­å…ƒç´ </p>
<ul>
<li>constructor - ç”¨äºåœ¨å®ä¾‹åŒ–ç±»æ—¶ï¼Œæ³¨å…¥ç»“æœåˆ°æ„é€ æ–¹æ³•ä¸­
<ul>
<li>idArg- ID å‚æ•°;æ ‡è®°å‡ºä½œä¸º ID çš„ç»“æœå¯ä»¥å¸®åŠ©æé«˜æ•´ä½“æ€§èƒ½</li>
<li>arg - å°†è¢«æ³¨å…¥åˆ°æ„é€ æ–¹æ³•çš„ä¸€ä¸ªæ™®é€šç»“æœ</li>
</ul>
</li>
<li>id â€“ æ ‡è®°å‡ºä½œä¸º ID çš„ç»“æœå¯ä»¥å¸®åŠ©æé«˜æ•´ä½“æ€§èƒ½</li>
<li>result â€“ æ³¨å…¥åˆ°å­—æ®µæˆ– JavaBean å±æ€§çš„æ™®é€šç»“æœ</li>
<li>association â€“ ä¸€ä¸ªå¤æ‚ç±»å‹çš„å…³è”;è®¸å¤šç»“æœå°†åŒ…è£…æˆè¿™ç§ç±»å‹</li>
<li>collection â€“ ä¸€ä¸ªå¤æ‚ç±»å‹çš„é›†åˆ</li>
<li>discriminator â€“ ä½¿ç”¨ç»“æœå€¼æ¥å†³å®šä½¿ç”¨å“ªä¸ª
<ul>
<li>case â€“ åŸºäºæŸäº›å€¼çš„ç»“æœæ˜ å°„</li>
</ul>
</li>
</ul>
<p>ä½¿ç”¨<code>constructor</code>å­æ ‡ç­¾ ï¼Œæ³¨æ„å¤šä¸ªå‚æ•°ï¼Œéœ€è¦åœ¨POJOç±»æ„é€ å‡½æ•°ä¸Šä½¿ç”¨@ParamæŒ‡å®šåç§°</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;resultMap</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;com.kun.start.model.Person&#34;</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;person&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;constructor&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;idArg</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;id&#34;</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;id&#34;</span><span style="color:#000080">/&gt;</span>	<span style="color:#998;font-style:italic">&lt;!--æŒ‡å®šä¸»é”®æé«˜æ•ˆç‡--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;arg</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;name&#34;</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;name&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/constructor&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/resultMap&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨<code>association </code>å­æ ‡ç­¾ï¼Œè¿›è¡Œå¤šå¯¹ä¸€æˆ–è€…ä¸€å¯¹ä¸€<code>å…³è”æŸ¥è¯¢</code>ï¼Œç›´æ¥æ˜ å°„ç»“æ„</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;association</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;author&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;blog_author_id&#34;</span> <span style="color:#008080">javaType=</span><span style="color:#d14">&#34;Author&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;id</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;id&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;author_id&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;username&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;author_username&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/association&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨<code>association </code>å­æ ‡ç­¾ï¼Œè¿›è¡Œå¤šå¯¹ä¸€æˆ–è€…ä¸€å¯¹ä¸€<code>å…³è”çš„åµŒå¥—æŸ¥è¯¢</code>ï¼Œè¿™ç§å†™æ³•å¯èƒ½å¼•èµ·â€œN+1â€é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨æ‡’åŠ è½½æˆ–<code>å…³è”çš„åµŒå¥—ç»“æœæŸ¥è¯¢</code></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--æŸ¥è¯¢åšå®¢çš„ä½œè€…--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;resultMap</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;blogResult&#34;</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;Blog&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;association</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;author&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;author_id&#34;</span> <span style="color:#008080">javaType=</span><span style="color:#d14">&#34;Author&#34;</span> <span style="color:#008080">select=</span><span style="color:#d14">&#34;selectAuthor&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/resultMap&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨<code>association </code>å­æ ‡ç­¾ï¼Œè¿›è¡Œå¤šå¯¹ä¸€æˆ–è€…ä¸€å¯¹ä¸€<code>å…³è”çš„åµŒå¥—ç»“æœæŸ¥è¯¢</code>ï¼Œé¿å…äº†â€œN+1&quot;é—®é¢˜</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--æŸ¥è¯¢åšå®¢çš„ä½œè€…--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;resultMap</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;blogResult&#34;</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;Blog&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;id</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;id&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;blog_id&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;title&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;blog_title&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;association</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;author&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;blog_author_id&#34;</span> <span style="color:#008080">javaType=</span><span style="color:#d14">&#34;Author&#34;</span> <span style="color:#008080">resultMap=</span><span style="color:#d14">&#34;authorResult&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;resultMap</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;authorResult&#34;</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;Author&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;id</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;id&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;author_id&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;username&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;author_username&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;password&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;author_password&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;email&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;author_email&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;bio&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;author_bio&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;select</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;selectBlog&#34;</span> <span style="color:#008080">resultMap=</span><span style="color:#d14">&#34;blogResult&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  select
</span></span><span style="display:flex;"><span>  B.id            as blog_id,
</span></span><span style="display:flex;"><span>  B.title         as blog_title,
</span></span><span style="display:flex;"><span>  B.author_id     as blog_author_id,
</span></span><span style="display:flex;"><span>  A.id            as author_id,
</span></span><span style="display:flex;"><span>  A.username      as author_username,
</span></span><span style="display:flex;"><span>  A.password      as author_password,
</span></span><span style="display:flex;"><span>  A.email         as author_email,
</span></span><span style="display:flex;"><span>  A.bio           as author_bio
</span></span><span style="display:flex;"><span>  from Blog B left outer join Author A on B.author_id = A.id
</span></span><span style="display:flex;"><span>  where B.id = #{id}
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨<code>collection</code>å­æ ‡ç­¾ï¼Œè¿›è¡Œ<code>é›†åˆçš„åµŒå¥—æŸ¥è¯¢</code>ï¼Œæ³¨æ„<span style="color:yellow">ofType</span>æŒ‡çš„æ˜¯å…ƒç´ ç±»å‹ï¼ŒjavaTypeèƒ½æ¨æµ‹å‡ºæ¥å¯ä»¥ä¸å†™</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--æŸ¥è¯¢åšå®¢ä¸‹æœ‰å¤šå°‘æ–‡ç« --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;resultMap</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;blogResult&#34;</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;Blog&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;collection</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;posts&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;id&#34;</span> <span style="color:#008080">ofType=</span><span style="color:#d14">&#34;Post&#34;</span> <span style="color:#008080">select=</span><span style="color:#d14">&#34;selectPostsForBlog&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;select</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;selectBlog&#34;</span> <span style="color:#008080">resultMap=</span><span style="color:#d14">&#34;blogResult&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  SELECT * FROM BLOG WHERE ID = #{id}
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/select&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;select</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;selectPostsForBlog&#34;</span> <span style="color:#008080">resultType=</span><span style="color:#d14">&#34;Post&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  SELECT * FROM POST WHERE BLOG_ID = #{id}
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨<code>collection</code>å­æ ‡ç­¾ï¼Œè¿›è¡Œ<code>é›†åˆçš„åµŒå¥—ç»“æœæŸ¥è¯¢</code>ï¼Œé¿å…å¤šæ¬¡å‘é€SQLï¼Œæé«˜æ•ˆç‡</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;resultMap</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;blogResult&#34;</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;Blog&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;id</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;id&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;blog_id&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;title&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;blog_title&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;collection</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;posts&#34;</span> <span style="color:#008080">ofType=</span><span style="color:#d14">&#34;Post&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;id</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;id&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;post_id&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;subject&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;post_subject&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;body&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;post_body&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/collection&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/resultMap&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;select</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;selectBlog&#34;</span> <span style="color:#008080">resultMap=</span><span style="color:#d14">&#34;blogResult&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  select
</span></span><span style="display:flex;"><span>  B.id as blog_id,
</span></span><span style="display:flex;"><span>  B.title as blog_title,
</span></span><span style="display:flex;"><span>  B.author_id as blog_author_id,
</span></span><span style="display:flex;"><span>  P.id as post_id,
</span></span><span style="display:flex;"><span>  P.subject as post_subject,
</span></span><span style="display:flex;"><span>  P.body as post_body,
</span></span><span style="display:flex;"><span>  from Blog B
</span></span><span style="display:flex;"><span>  left outer join Post P on B.id = P.blog_id
</span></span><span style="display:flex;"><span>  where B.id = #{id}
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿ç”¨<code>discriminator </code>å­æ ‡ç­¾å®Œæˆé‰´åˆ«å™¨å·¥ä½œï¼Œç›¸å½“äºjavaä¸­çš„switchè¯­å¥ã€‚ä¸€èˆ¬ç”¨äºåŒè¡¨æè¿°ç»§æ‰¿å…³ç³»ï¼ˆä¸å»ºè®®ä½¿ç”¨ï¼‰</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--æ ¹æ®é‰´åˆ«å­—æ®µçš„å€¼è‡ªåŠ¨æ˜ å°„æˆå¯¹åº”çš„å­ç±»--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;resultMap</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;vehicleResult&#34;</span> <span style="color:#008080">type=</span><span style="color:#d14">&#34;Vehicle&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;id</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;id&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;id&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;vin&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;vin&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;year&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;year&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;make&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;make&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;model&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;model&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;color&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;color&#34;</span><span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#998;font-style:italic">&lt;!-- javaType:è¿”å›çš„å€¼ç±»å‹ï¼ˆç”¨äºæ¯”è¾ƒçš„åˆ—ï¼‰--&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;discriminator</span> <span style="color:#008080">javaType=</span><span style="color:#d14">&#34;int&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;vehicle_type&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#998;font-style:italic">&lt;!-- resultType:å¯¹åº”å“ªä¸ªå­ç±»ç»“æœé›†ï¼Œresultå­æ ‡ç­¾ï¼šå­ç±»ç‰¹æœ‰å±æ€§ --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;case</span> <span style="color:#008080">value=</span><span style="color:#d14">&#34;1&#34;</span> <span style="color:#008080">resultType=</span><span style="color:#d14">&#34;carResult&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;doorCount&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;door_count&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/case&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;case</span> <span style="color:#008080">value=</span><span style="color:#d14">&#34;2&#34;</span> <span style="color:#008080">resultType=</span><span style="color:#d14">&#34;truckResult&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;boxSize&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;box_size&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;extendedCab&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;extended_cab&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/case&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;case</span> <span style="color:#008080">value=</span><span style="color:#d14">&#34;3&#34;</span> <span style="color:#008080">resultType=</span><span style="color:#d14">&#34;vanResult&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;powerSlidingDoor&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;power_sliding_door&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/case&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;case</span> <span style="color:#008080">value=</span><span style="color:#d14">&#34;4&#34;</span> <span style="color:#008080">resultType=</span><span style="color:#d14">&#34;suvResult&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#000080">&lt;result</span> <span style="color:#008080">property=</span><span style="color:#d14">&#34;allWheelDrive&#34;</span> <span style="color:#008080">column=</span><span style="color:#d14">&#34;all_wheel_drive&#34;</span> <span style="color:#000080">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/case&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/discriminator&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/resultMap&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å…­åŠ¨æ€-sql">å…­ã€åŠ¨æ€ SQL</h2>
<h3 id="ifç”¨äºæ¡ä»¶åˆ¤æ–­">ifï¼Œç”¨äºæ¡ä»¶åˆ¤æ–­</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;select</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;findActiveBlogWithTitleLike&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008080">resultType=</span><span style="color:#d14">&#34;Blog&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  SELECT * FROM BLOG 
</span></span><span style="display:flex;"><span>  WHERE state = â€˜ACTIVEâ€™ 
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;if</span> <span style="color:#008080">test=</span><span style="color:#d14">&#34;title != null&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    AND title like #{title}
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="choose-choose-when-choose-otherwise">choose, choose-when, choose-otherwise</h3>
<p>æœ‰æ—¶æˆ‘ä»¬ä¸æƒ³åº”ç”¨åˆ°æ‰€æœ‰çš„æ¡ä»¶è¯­å¥ï¼Œè€Œåªæƒ³ä»ä¸­æ‹©å…¶ä¸€é¡¹ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼ŒMyBatis æä¾›äº† choose å…ƒç´ ï¼Œå®ƒæœ‰ç‚¹åƒ Java ä¸­çš„ switch è¯­å¥</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;select</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;findActiveBlogLike&#34;</span> <span style="color:#008080">resultType=</span><span style="color:#d14">&#34;Blog&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  SELECT * FROM BLOG WHERE state = â€˜ACTIVEâ€™
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;choose&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;when</span> <span style="color:#008080">test=</span><span style="color:#d14">&#34;title != null&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>      AND title like #{title}
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/when&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;when</span> <span style="color:#008080">test=</span><span style="color:#d14">&#34;author != null and author.name != null&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>      AND author_name like #{author.name}
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/when&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;otherwise&gt;</span>
</span></span><span style="display:flex;"><span>      AND featured = 1
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/otherwise&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/choose&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="trim-where-set">trim, where, set</h3>
<p>ç”¨äºè§£å†³<strong>where</strong>åè·Ÿæ— æ„ä¹‰æ¡ä»¶ä¾‹å¦‚<code>where 1=1</code>é—®é¢˜</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;select</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;findActiveBlogLike&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#008080">resultType=</span><span style="color:#d14">&#34;Blog&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  SELECT * FROM BLOG 
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;where&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;if</span> <span style="color:#008080">test=</span><span style="color:#d14">&#34;state != null&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>      state = #{state}
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/if&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;if</span> <span style="color:#008080">test=</span><span style="color:#d14">&#34;title != null&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>      AND title like #{title}
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;if</span> <span style="color:#008080">test=</span><span style="color:#d14">&#34;author != null and author.name != null&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>      AND author_name like #{author.name}
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/where&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>where</strong> å…ƒç´ åªä¼šåœ¨è‡³å°‘æœ‰ä¸€ä¸ªå­å…ƒç´ çš„æ¡ä»¶è¿”å› SQL å­å¥çš„æƒ…å†µä¸‹æ‰å»æ’å…¥â€œWHEREâ€å­å¥ã€‚è€Œä¸”ï¼Œè‹¥è¯­å¥çš„å¼€å¤´ä¸ºâ€œANDâ€æˆ–â€œORâ€ï¼Œ<strong>where</strong> å…ƒç´ ä¹Ÿä¼šå°†å®ƒä»¬å»é™¤</p>
</blockquote>
<p>ç±»ä¼¼äº<strong>where</strong>è§£å†³selectè¯­å¥é—®é¢˜ï¼Œ<strong>set</strong>è§£å†³updateè¯­å¥é—®é¢˜</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;update</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;updateAuthorIfNecessary&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  update Author
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;set&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;if</span> <span style="color:#008080">test=</span><span style="color:#d14">&#34;username != null&#34;</span><span style="color:#000080">&gt;</span>username=#{username},<span style="color:#000080">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;if</span> <span style="color:#008080">test=</span><span style="color:#d14">&#34;password != null&#34;</span><span style="color:#000080">&gt;</span>password=#{password},<span style="color:#000080">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;if</span> <span style="color:#008080">test=</span><span style="color:#d14">&#34;email != null&#34;</span><span style="color:#000080">&gt;</span>email=#{email},<span style="color:#000080">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000080">&lt;if</span> <span style="color:#008080">test=</span><span style="color:#d14">&#34;bio != null&#34;</span><span style="color:#000080">&gt;</span>bio=#{bio}<span style="color:#000080">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/set&gt;</span>
</span></span><span style="display:flex;"><span>  where id=#{id}
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/update&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>è¿™é‡Œï¼Œ<strong>set</strong>å…ƒç´ ä¼šåŠ¨æ€å‰ç½® SET å…³é”®å­—ï¼ŒåŒæ—¶ä¹Ÿä¼šåˆ æ‰æ— å…³çš„é€—å·ï¼Œå› ä¸ºç”¨äº†æ¡ä»¶è¯­å¥ä¹‹åå¾ˆå¯èƒ½å°±ä¼šåœ¨ç”Ÿæˆçš„ SQL è¯­å¥çš„åé¢ç•™ä¸‹è¿™äº›é€—å·</p>
</blockquote>
<p>whereå’Œsetåº•å±‚éƒ½æ˜¯ä½¿ç”¨trimã€‚prefix/suffix-åŠ å…¥çš„å‰ï¼ˆåï¼‰ç¼€ï¼ŒprefixOverrides/suffixOverrides-å‰åè¦†ç›–çš„å­—ç¬¦</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--ç›¸å½“äºsetæ ‡ç­¾--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;trim</span> <span style="color:#008080">prefix=</span><span style="color:#d14">&#34;set&#34;</span> <span style="color:#008080">prefixOverrides=</span><span style="color:#d14">&#34;,&#34;</span> <span style="color:#008080">suffixOverrides=</span><span style="color:#d14">&#34;,&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  ...		
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/trim&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--ç›¸å½“äºwhereæ ‡ç­¾--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;trim</span> <span style="color:#008080">prefix=</span><span style="color:#d14">&#34;where&#34;</span> <span style="color:#008080">prefixOverrides=</span><span style="color:#d14">&#34;and|or&#34;</span>  <span style="color:#008080">suffixOverrides=</span><span style="color:#d14">&#34;,&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  ...		
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/trim&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="foreach">foreach</h3>
<p>åŠ¨æ€ SQL çš„å¦å¤–ä¸€ä¸ªå¸¸ç”¨çš„æ“ä½œéœ€æ±‚æ˜¯å¯¹ä¸€ä¸ªé›†åˆè¿›è¡Œéå†ï¼Œé€šå¸¸æ˜¯åœ¨æ„å»º IN æ¡ä»¶è¯­å¥çš„æ—¶å€™ã€‚æ¯”å¦‚ï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;select</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;selectPersonIn&#34;</span> <span style="color:#008080">resultType=</span><span style="color:#d14">&#34;com.kun.Person&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  SELECT * FROM Person WHERE ID in
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;foreach</span> <span style="color:#008080">item=</span><span style="color:#d14">&#34;item&#34;</span> <span style="color:#008080">index=</span><span style="color:#d14">&#34;index&#34;</span> <span style="color:#008080">collection=</span><span style="color:#d14">&#34;ids&#34;</span> <span style="color:#008080">open=</span><span style="color:#d14">&#34;(&#34;</span> <span style="color:#008080">separator=</span><span style="color:#d14">&#34;,&#34;</span> <span style="color:#008080">close=</span><span style="color:#d14">&#34;)&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    #{item}
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/foreach&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>item-å˜é‡é›†åˆå»é™¤çš„å…ƒç´ ï¼Œindex-å…ƒç´ çš„ç´¢å¼•ï¼Œcollection-é›†åˆå‚æ•°åç§°ã€‚</p>
<p>é›†åˆç±»å‹å¯ä»¥æ˜¯listã€setã€mapçš„keyã€mapçš„valueã€‚ã€index ä½œä¸ºmap çš„keyã€‚itemä¸ºmapçš„å€¼ã€‘ï¼Œä¾‹å¦‚ï¼š</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;foreach</span> <span style="color:#008080">collection=</span><span style="color:#d14">&#34;ent&#34;</span>  <span style="color:#008080">item=</span><span style="color:#d14">&#34;id&#34;</span> <span style="color:#008080">separator=</span><span style="color:#d14">&#34;,&#34;</span> <span style="color:#008080">open=</span><span style="color:#d14">&#34;(&#34;</span> <span style="color:#008080">close=</span><span style="color:#d14">&#34;)&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  #{id}
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/foreach&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="bind">bind</h3>
<p>å¯ä»¥å°†OGNLè¡¨è¾¾å¼çš„å€¼ç»‘å®šåˆ°ä¸€ä¸ªå˜é‡ä¸­ï¼Œæ–¹ä¾¿åæ¥å¼•ç”¨è¿™ä¸ªå˜é‡çš„å€¼ã€‚</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;select</span> <span style="color:#008080">id=</span><span style="color:#d14">&#34;getEmps&#34;</span> <span style="color:#008080">resultType=</span><span style="color:#d14">&#34;com.hand.mybatis.bean.Employee&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;bind</span> <span style="color:#008080">name=</span><span style="color:#d14">&#34;bindeName&#34;</span> <span style="color:#008080">value=</span><span style="color:#d14">&#34;&#39;%&#39;+eName+&#39;%&#39;&#34;</span><span style="color:#000080">/&gt;</span> <span style="color:#998;font-style:italic">&lt;!--eNameæ˜¯employeeä¸­ä¸€ä¸ªå±æ€§å€¼--&gt;</span>
</span></span><span style="display:flex;"><span>  SELECT * FROM emp 
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;if</span> <span style="color:#008080">test=</span><span style="color:#d14">&#34;_parameter!=null&#34;</span><span style="color:#000080">&gt;</span>
</span></span><span style="display:flex;"><span>    where ename like #{bindeName}
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;/if&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/select&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
    </div>

    

    <div class="container-comment-giscus">
        <script src="https://giscus.app/client.js"
        data-repo="loveminimal/comment"
        data-repo-id="R_kgDOJNJQ8g"
        data-category="General"
        data-category-id="DIC_kwDOJNJQ8s4CYl0m"
        data-mapping="title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="noborder_light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
        </script>
</div>
</div>

        </div>
        <div id="footer"><div class="container-footer">
    

    <div class="beian">
        
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41092802000242">
            

        </a>

        
        <a href="//beian.miit.gov.cn" target="_blank">
            
            <span class="some">icp...<span>
            
        </a>
    </div>

    
    <div class="info">
        
        <a href="https://github.com/loveminimal/hugo-theme-virgo">ğŸ•Šï¸</a> 2016 - <span id="info-date"></span>
    </div>

</div></div>
        <div class="cool-after" style="
            
                background-color: rgba(255, 255, 255, 0.49); 
                backdrop-filter: saturate(100%) blur(6px);
            
            "></div>
    </body>
</html>
