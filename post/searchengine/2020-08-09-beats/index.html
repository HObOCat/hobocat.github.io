<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="beatsçš„ä½¿ç”¨ - https://hobocat.github.io/post/searchengine/2020-08-09-beats/">
    <meta name="author" content="Jack - https://hobocat.github.io/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>beatsçš„ä½¿ç”¨</title>
    
    <base target="_blank">
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    
    
    
    
    <link rel="stylesheet" href="https://hobocat.github.io/style.min.94e7ed14b48117025ebd1148adc11f7268f1ebf50d97297ac663edf1aa6f52dc.css">
    
    <script>const DARK =  false ;</script>
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate cool">
        <div class="container-floating-box">
	<div class="box box1"></div>
	<div class="box box11"></div>
	<div class="box box12"></div>
	<div class="box box2"></div>
	<div class="box box3"></div>
	<div class="box box4"></div>
	<div class="box box5"></div>
	<div class="box box6"></div>
	<div class="box box7"></div>
	<div class="box box8"></div>
	<div class="box box9"></div>
</div>
        <div class="cool-before" style="background: url('/imgs/bg/wallhaven-6qr21l.jpg') left top/100% no-repeat fixed;"></div>
        <div id="header" class=""><div class="container-header">

    
    
    
    <div class="right">
        
        <h1 class="title">beatsçš„ä½¿ç”¨</h1>
    
        
        
            <div id="toc">ğŸ“œ</div>
        
    </div>
</div>
</div>
        <div id="content">










<div class="container-main container-page ">

    

    
    
    
    

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="7409" width="12" height="12">
                <path
                    d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z"
                    p-id="7410" fill="#adb5bd"></path>
            </svg>
            2020-08-09&nbsp;&nbsp;&nbsp;
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="23838" width="11" height="11">
                <path
                    d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z"
                    p-id="23839" fill="#adb5bd"></path>
            </svg>
            2024-05-15&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="33866" width="12" height="12">
                <path
                    d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z"
                    fill="#adb5bd" p-id="33867"></path>
                <path
                    d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z"
                    fill="#adb5bd" p-id="33868"></path>
            </svg>
            2277 å­—</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="32892" width="12" height="12">
                <path
                    d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z"
                    p-id="32893" fill="#adb5bd"></path>
                <path
                    d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z"
                    p-id="32894" fill="#adb5bd"></path>
            </svg>
            5 åˆ†é’Ÿ</span>
        <div class="container-ctgtag">
	<div class="taxonomy">
		<div class="tag">
			
			
		</div>
	</div>
</div>
        
    </div>

    <div class="toc">
        <div class="container-page-operation">
	<div class="page-operation">
		<div><a href="/"><img src="/imgs/icons/home-2.svg" alt=""></a></div>
		<div><a href="/nav"><img src="/imgs/icons/iov-navigate-1.svg" alt=""></a></div>
		<div><a href="/wiki"><img src="/imgs/icons/wiki.svg" alt=""></a></div>
		<div><a href="/tags"><img src="/imgs/icons/treetags.svg" alt=""></a></div>
		<div id="light-dark"><a><img src="/imgs/icons/moon2.svg" alt=""></a></div>
		<div><a href="#"><img src="/imgs/icons/up2.svg" alt=""></a></div>
	</div>
</div>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#ä¸€ç®€ä»‹">ä¸€ã€ç®€ä»‹</a></li>
    <li><a href="#äºŒingest-node">äºŒã€Ingest Node</a></li>
    <li><a href="#ä¸‰filebeat">ä¸‰ã€Filebeat</a>
      <ul>
        <li><a href="#é…ç½®filebeat">é…ç½®Filebeat</a></li>
        <li><a href="#é…ç½®index-template">é…ç½®Index Template</a></li>
        <li><a href="#é…ç½®kibana-dashboard">é…ç½®Kibana Dashboard</a></li>
        <li><a href="#æŸ¥çœ‹é…ç½®">æŸ¥çœ‹é…ç½®</a></li>
        <li><a href="#modulesçš„ä½¿ç”¨">Modulesçš„ä½¿ç”¨</a></li>
      </ul>
    </li>
    <li><a href="#å››metricbeat">å››ã€Metricbeat</a>
      <ul>
        <li><a href="#ç®€ä»‹">ç®€ä»‹</a></li>
        <li><a href="#modulesçš„ä½¿ç”¨-1">Modulesçš„ä½¿ç”¨</a></li>
      </ul>
    </li>
    <li><a href="#äº”packetbeat">äº”ã€Packetbeat</a>
      <ul>
        <li><a href="#ç®€ä»‹-1">ç®€ä»‹</a></li>
        <li><a href="#ä½¿ç”¨">ä½¿ç”¨</a></li>
      </ul>
    </li>
    <li><a href="#å…­heartbeat">å…­ã€Heartbeat</a>
      <ul>
        <li><a href="#ç®€ä»‹-2">ç®€ä»‹</a></li>
        <li><a href="#ä½¿ç”¨-1">ä½¿ç”¨</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

    <div class='content  '>
        <h2 id="ä¸€ç®€ä»‹">ä¸€ã€ç®€ä»‹</h2>
<p>ä¸€ä¸ªè½»é‡çº§çš„åŸºäºgolangå¼€å‘çš„æ•°æ®ä¼ è¾“è€…ï¼Œç”¨äºæ”¶é›†æ•°æ®å¸¸ç”¨çš„beatæœ‰ä¸‹ï¼š</p>
<ul>
<li>Filebeat        æ—¥å¿—æ–‡ä»¶</li>
<li>Metricbeat   æ”¶é›†æ“ä½œç³»ç»Ÿå’Œå¸¸ç”¨è½¯ä»¶æ•°æ®</li>
<li>Packetbeat   æ”¶é›†ç½‘ç»œæ•°æ®</li>
<li>Heartbeat     å¥åº·æ£€æŸ¥</li>
</ul>
<p>æ•°æ®æ‰­è½¬å¯èƒ½çš„ç¤ºä¾‹å¦‚ä¸‹</p>
<p>beatsã€æ”¶é›†æ•°æ®ã€‘ =ã€‹ elasticsearchã€å­˜å‚¨ï¼ŒIngest Nodeå¤„ç†ã€‘=ã€‹kibanaã€å¯è§†åŒ–åˆ†æã€‘</p>
<p>beatsã€æ”¶é›†æ•°æ®ã€‘ =ã€‹ logstashã€æ•°æ®å¤„ç†è¿‡æ»¤ã€‘=ã€‹elasticsearchã€å­˜å‚¨ï¼ŒIngest Nodeå¤„ç†ã€‘=ã€‹kibanaã€å¯è§†åŒ–åˆ†æã€‘</p>
<h2 id="äºŒingest-node">äºŒã€Ingest Node</h2>
<p><code>ingest node</code>æ˜¯elasticsearchçš„ä¸€ç§èŠ‚ç‚¹ç±»å‹ã€é€‰ä¸¾èŠ‚ç‚¹ã€åè°ƒèŠ‚ç‚¹ã€æ•°æ®èŠ‚ç‚¹ã€‘ã€‚å¯ä»¥åœ¨æ•°æ®å­˜å‚¨åˆ°ESä¹‹å‰å¯¹æ•°æ®è¿›è¡Œå¤„ç†ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹æ‰€æœ‰èŠ‚ç‚¹éƒ½å·²å¯ç”¨æ­¤åŠŸèƒ½ï¼Œä¹Ÿå¯é€šè¿‡<code>node.ingestï¼šfalse</code>å…³é—­</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>####################################### åˆ›å»ºPipeline #######################################
</span></span><span style="display:flex;"><span>PUT _ingest/pipeline/test
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  &#34;description&#34;: &#34;This is a test pipeline&#34;,
</span></span><span style="display:flex;"><span>  &#34;processors&#34;: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      &#34;set&#34;: {
</span></span><span style="display:flex;"><span>        &#34;field&#34;: &#34;custom_field&#34;,
</span></span><span style="display:flex;"><span>        &#34;value&#34;: &#34;custom_value&#34;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      &#34;convert&#34;: {
</span></span><span style="display:flex;"><span>        &#34;field&#34;: &#34;age&#34;,
</span></span><span style="display:flex;"><span>        &#34;type&#34;: &#34;integer&#34;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  &#34;version&#34;: 1
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>##################################### åˆ é™¤ã€æŸ¥è¯¢Pipeline #####################################
</span></span><span style="display:flex;"><span>DELETE _ingest/pipeline/test
</span></span><span style="display:flex;"><span>GET _ingest/pipeline/test
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>##################################### æ¨¡æ‹Ÿæµ‹è¯•Pipeline #####################################
</span></span><span style="display:flex;"><span>POST _ingest/pipeline/_simulate
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  &#34;pipeline&#34;: {
</span></span><span style="display:flex;"><span>    &#34;description&#34;: &#34;This is a test pipeline&#34;,
</span></span><span style="display:flex;"><span>    &#34;processors&#34;: [
</span></span><span style="display:flex;"><span>      {
</span></span><span style="display:flex;"><span>        &#34;set&#34;: {
</span></span><span style="display:flex;"><span>          &#34;field&#34;: &#34;custom_field&#34;,
</span></span><span style="display:flex;"><span>          &#34;value&#34;: &#34;custom_value&#34;
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        &#34;geoip&#34;:{
</span></span><span style="display:flex;"><span>          &#34;field&#34;: &#34;ip&#34;,
</span></span><span style="display:flex;"><span>          &#34;target_field&#34;: &#34;ip_info&#34;
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        &#34;user_agent&#34;: {
</span></span><span style="display:flex;"><span>          &#34;field&#34;: &#34;agent&#34;,
</span></span><span style="display:flex;"><span>          &#34;target_field&#34;: &#34;user_ua&#34;
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>        &#34;convert&#34;: {
</span></span><span style="display:flex;"><span>          &#34;field&#34;: &#34;age&#34;,
</span></span><span style="display:flex;"><span>          &#34;type&#34;: &#34;integer&#34;,
</span></span><span style="display:flex;"><span>          &#34;on_failure&#34;: [
</span></span><span style="display:flex;"><span>            {
</span></span><span style="display:flex;"><span>              &#34;set&#34;: {
</span></span><span style="display:flex;"><span>                &#34;field&#34;: &#34;age_conver_error&#34;,
</span></span><span style="display:flex;"><span>                &#34;value&#34;: &#34;{{_ingest.on_failure_message}}&#34;
</span></span><span style="display:flex;"><span>              }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>          ]
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    ],
</span></span><span style="display:flex;"><span>    &#34;version&#34;: 1
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  &#34;docs&#34;: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      &#34;_source&#34;: {
</span></span><span style="display:flex;"><span>        &#34;message&#34;: &#34;m m m m m &#34;,
</span></span><span style="display:flex;"><span>        &#34;age&#34;: &#34;xxx18&#34;,
</span></span><span style="display:flex;"><span>        &#34;ip&#34;:&#34;124.207.37.189&#34;,
</span></span><span style="display:flex;"><span>        &#34;agent&#34;: &#34;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/81.0.4044.129 Safari/537.36&#34;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>POST _ingest/pipeline/test/_simulate
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  &#34;docs&#34;: [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      &#34;_source&#34;: {
</span></span><span style="display:flex;"><span>        &#34;message&#34;: &#34;m m m m m &#34;
</span></span><span style="display:flex;"><span>      }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Pipeline</code>çš„<code>processors</code>åŸºæœ¬ä¸Šå’Œlogstashçš„<code>filter</code>ä¸€ä¸€å¯¹åº”</p>
<ul>
<li>convert</li>
<li>grok</li>
<li>data</li>
<li>gsub</li>
<li>join</li>
<li>json</li>
<li>geoip</li>
<li>user_agent</li>
<li>remove</li>
<li>script =ã€‹ ruby</li>
</ul>
<h2 id="ä¸‰filebeat">ä¸‰ã€Filebeat</h2>
<p>Filebeatæ˜¯ç”¨äºè½¬å‘å’Œé›†ä¸­æ—¥å¿—æ•°æ®çš„è½»é‡çº§ä¼ é€ç¨‹åºï¼Œç‰¹æ€§æœ‰ä¸‹</p>
<ul>
<li>è¯»å–æ—¥å¿—ï¼Œä½†æ˜¯ä¸åšæ•°æ®çš„è§£æå¤„ç†</li>
<li>ä¿è¯æ•°æ®è‡³å°‘è¢«è¯»å–ä¸€æ¬¡ï¼Œå³æ•°æ®ä¸ä¼šä¸¢å¤±</li>
<li>å¯ä»¥å¤„ç†å¤šè¡Œæ•°æ®ï¼Œå¯ä»¥è§£æjsonæ ¼å¼æ•°æ®ï¼Œæ‹¥æœ‰ç®€å•çš„è¿‡æ»¤èƒ½åŠ›</li>
</ul>
<h3 id="é…ç½®filebeat">é…ç½®Filebeat</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#000080">filebeat.inputs</span>:<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>- <span style="color:#000080">type</span>:<span style="color:#bbb"> </span>log                <span style="color:#bbb"> </span><span style="color:#998;font-style:italic">#typeçš„ç±»å‹æœ‰ï¼šLogã€Stdinã€Redisã€UDPã€Dockerã€TCPã€Syslogã€NetFlow</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">paths</span>:<span style="color:#bbb">                    </span><span style="color:#998;font-style:italic">#æ–‡ä»¶çš„ä½ç½®</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>- <span style="color:#d14">&#34;/var/log/nginx/*&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">encoding</span>:<span style="color:#bbb"> </span>utf-8          <span style="color:#bbb"> </span><span style="color:#998;font-style:italic">#æ–‡ä»¶ç¼–ç›®</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">tags</span>:<span style="color:#bbb"> </span>[<span style="color:#d14">&#34;txt&#34;</span>,<span style="color:#d14">&#34;web&#34;</span>]<span style="color:#bbb">       </span><span style="color:#998;font-style:italic">#æ·»åŠ çš„è‡ªå®šä¹‰æ ‡ç­¾</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">fields</span>:<span style="color:#bbb">                   </span><span style="color:#998;font-style:italic">#æ·»åŠ çš„è‡ªå®šä¹‰å­—æ®µ</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000080">apache</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">fields_under_root</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">   </span><span style="color:#998;font-style:italic">#è§£æå‡ºæ¥çš„å­—æ®µæ˜¯å¦æ”¾åœ¨æ ¹ä¸‹,å¦åˆ™åœ¨fieldä¸‹</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">output.elasticsearch</span>:<span style="color:#bbb">       </span><span style="color:#998;font-style:italic">#è¾“å‡ºåˆ°çš„esåœ°å€ï¼Œoutputåªèƒ½æœ‰ä¸€ä¸ªï¼Œè°ƒè¯•å¯ä»¥å¯åŠ¨æ—¶ç”¨ç”¨ -d &#34;publish&#34; æ‰“å°</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">hosts</span>:<span style="color:#bbb"> </span>[<span style="color:#d14">&#34;localhost:9200&#34;</span>]<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">setup.kibana</span>:<span style="color:#bbb">               </span><span style="color:#998;font-style:italic">#kibanaåœ°å€ï¼Œç”¨äºå¯¼å…¥Dashboard</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000080">host</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;localhost:5601&#34;</span><span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="é…ç½®index-template">é…ç½®Index Template</h3>
<p>å¦‚æœä»…ä½¿ç”¨ä¸€æ¬¡ä¸å»ºè®®åœ¨Filebeatä¸­åˆ›å»ºï¼Œå¯ç›´æ¥åœ¨elasticsearchä¸­åˆ›å»º</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">#æ˜¯å¦å¯ç”¨template</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">setup.template.enable</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#æ˜¯å¦æ¯æ¬¡beatså¯åŠ¨å°±è¦è¦†ç›–ä»¥å‰çš„templateå®šä¹‰</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">setup.template.overwrite</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#è¦å‘elasticsearchä¸­çš„åˆ›å»ºçš„templateåç§°</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">setup.template.name</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;nginx&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#è¦å‘elasticsearchä¸­çš„åˆ›å»ºçš„templateçš„pattern</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">setup.template.pattern</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;nginx-*&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#è¦å‘elasticsearchä¸­çš„åˆ›å»ºçš„templateçš„mappingä¿¡æ¯</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">setup.template.fields</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;nginx_filed.yml&#34;</span><span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="é…ç½®kibana-dashboard">é…ç½®Kibana Dashboard</h3>
<p>å¯ä»¥é€šè¿‡é…ç½®æ‰“å¼€Dashboardä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤å¯¼å…¥<code>./filebeat setup --dashboards</code>ï¼Œéƒ½æ˜¯ä¸€æ¬¡æ€§å…¨éƒ¨å¯¼å…¥</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">#å‘kibanaåˆ›å»ºçš„Dashboardçš„indexåç§°</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">setup.dashboards.index</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;nginx-*&#34;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#æ˜¯å¦å¯ç”¨Dashboardï¼Œé»˜è®¤false</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000080">setup.dashboards.enabled</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æŸ¥çœ‹é…ç½®">æŸ¥çœ‹é…ç½®</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>./filebeat <span style="color:#0086b3">export</span> config     <span style="color:#998;font-style:italic">#æŸ¥çœ‹å½“å‰é…ç½®æ–‡ä»¶çš„è¯¦ç»†å®šä¹‰</span>
</span></span><span style="display:flex;"><span>./filebeat <span style="color:#0086b3">export</span> template   <span style="color:#998;font-style:italic">#æŸ¥çœ‹å½“å‰é…ç½®æ–‡ä»¶ä½¿ç”¨çš„templateçš„è¯¦ç»†å®šä¹‰</span>
</span></span><span style="display:flex;"><span>./filebeat <span style="color:#0086b3">export</span> template -E setup.template.fields<span style="color:#000;font-weight:bold">=</span>nginx_field.yml  <span style="color:#998;font-style:italic">#æŸ¥çœ‹æŒ‡å®šçš„templateçš„è¯¦ç»†å®šä¹‰</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>å¯ä»¥é€šè¿‡<code>./filebeat -e -c filebeat.yml -d &quot;publish&quot;</code>æ‰§è¡Œæ—¶çœ‹åˆ°è¯¦ç»†ä¿¡æ¯</p>
<p>-eï¼šè¾“å‡ºåˆ°stderrï¼Œé»˜è®¤è¾“å‡ºåˆ°logs/filebeatæ–‡ä»¶</p>
<p>-d &ldquo;publish&rdquo;ï¼šè¾“å‡º&quot;publish&quot;çš„ç›¸å…³æ—¥å¿—ä¿¡æ¯</p>
</blockquote>
<h3 id="modulesçš„ä½¿ç”¨">Modulesçš„ä½¿ç”¨</h3>
<ol>
<li>æŸ¥çœ‹æ¨¡å—åˆ—è¡¨<code>./filebeat modules list</code></li>
<li>å¼€å¯æ¨¡å—<code>./filebeat modules enable nginx</code></li>
<li>å…³é—­æ¨¡å—<code>./filebeat modules disable nginx</code></li>
<li>ä¿®æ”¹modulesæ–‡ä»¶å¤¹ä¸‹å¯¹åº”å¼€å¯çš„æ¨¡å—çš„ymlæ–‡ä»¶ã€ä¸»è¦æ—¶é…ç½®æ–‡ä»¶è·¯å¾„ï¼Œæ³¨æ„æ–‡ä»¶æƒé™ã€‘</li>
<li>æ‰§è¡Œ<code>nohup ./filebeat -e -c filebeat.yml -d &quot;publish&quot; &amp;</code></li>
</ol>
<h2 id="å››metricbeat">å››ã€Metricbeat</h2>
<h3 id="ç®€ä»‹">ç®€ä»‹</h3>
<p>metricbeatç”¨äºå®šæœŸæ”¶é›†æ“ä½œç³»ç»Ÿã€è½¯ä»¶æœåŠ¡çš„æŒ‡æ ‡æ•°æ®ã€‚å­˜å…¥elasticsearchç”¨äºè®°å½•åº¦é‡å’Œèšåˆæ•°æ®ï¼Œå…·æœ‰è®¡åˆ’æ€§</p>
<h3 id="modulesçš„ä½¿ç”¨-1">Modulesçš„ä½¿ç”¨</h3>
<ol>
<li>æŸ¥çœ‹æ¨¡å—åˆ—è¡¨<code>./metricbeat modules list</code></li>
<li>å¼€å¯æ¨¡å—<code>./metricbeat modules enable system</code></li>
<li>å…³é—­æ¨¡å—<code>./metricbeat modules disable system</code></li>
<li>ä¿®æ”¹<code>metricbeat.yml</code>é…ç½®outputå’ŒDashboard</li>
<li>å¯¼å…¥Dashboardé…ç½®<code>./metricbeat setup --dashboards</code></li>
<li><span style="color:red">ä¿®æ”¹å¯¹åº”æ¨¡å—çš„é…ç½®ï¼Œå¼€å¯éœ€è¦çš„<code>metricsets</code>å’Œè°ƒæ•´æ”¶é›†æ—¶é—´é—´éš”</span></li>
<li>æ‰§è¡Œ<code>nohup ./metricbeat -e -c metricbeat.yml -d &quot;publish&quot; &amp;</code></li>
</ol>
<h2 id="äº”packetbeat">äº”ã€Packetbeat</h2>
<h3 id="ç®€ä»‹-1">ç®€ä»‹</h3>
<p>ç”¨äºæŠ“å–ç½‘ç»œåŒ…æ•°æ®ï¼Œå¯ä»¥è‡ªåŠ¨è§£æç½‘ç»œåŒ…åè®®ä¾‹å¦‚<code>ICMP DNS</code>ã€<code>HTTP</code>ã€<code>Mysql/PgSQL/MongoDB</code>ã€<code>Memcache</code>ã€<code>Thrift</code>ã€<code>TLS</code>ç­‰</p>
<p>packetbeatæŠ“åŒ…é…ç½®æœ‰ä¸¤ç§</p>
<h3 id="ä½¿ç”¨">ä½¿ç”¨</h3>
<ol>
<li>ä¿®æ”¹<code>packetbeat.yml</code>é…ç½®outputå’ŒDashboard</li>
<li>é…ç½®<code>packetbeat.yml</code>å„ä¸ªæ¨¡å—çš„å‚æ•°ä¿¡æ¯</li>
<li>å¯¼å…¥Dashboardé…ç½®<code>./packetbeat setup --dashboards</code></li>
<li>æ‰§è¡Œ<code>nohup ./packetbeat -e -c packetbeat.yml -d &quot;publish&quot; &amp;</code>ã€æ³¨æ„ç½‘å¡æƒé™ï¼Œä¸è¡Œéœ€è¦ç”¨rootç”¨æˆ·æ‰§è¡Œã€‘</li>
</ol>
<h2 id="å…­heartbeat">å…­ã€Heartbeat</h2>
<h3 id="ç®€ä»‹-2">ç®€ä»‹</h3>
<p>åšå¿ƒè·³æ£€æµ‹ï¼Œåˆ¤æ–­å¯¹æ–¹æ˜¯å¦å­˜æ´»</p>
<h3 id="ä½¿ç”¨-1">ä½¿ç”¨</h3>
<ol>
<li>ä¿®æ”¹<code>heartbeat.yml</code>é…ç½®outputå’ŒDashboard</li>
<li>é…ç½®<code>heartbeat.yml</code>å„ä¸ªç¨‹åºéœ€è¦çš„åè®®</li>
<li>å¯¼å…¥Dashboardé…ç½®<code>./heartbeat setup --dashboards</code></li>
<li>æ‰§è¡Œ<code>nohup ./heartbeat -e -c heartbeat.yml -d &quot;publish&quot; &amp;</code></li>
</ol>
<blockquote>
<p>æ›´å¤šç¤¾åŒºbeatæŸ¥çœ‹<a href="https://www.elastic.co/guide/en/beats/libbeat/current/community-beats.html">é“¾æ¥</a></p>
</blockquote>

    </div>

    

    <div class="container-comment-giscus">
        <script src="https://giscus.app/client.js"
        data-repo="loveminimal/comment"
        data-repo-id="R_kgDOJNJQ8g"
        data-category="General"
        data-category-id="DIC_kwDOJNJQ8s4CYl0m"
        data-mapping="title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="noborder_light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
        </script>
</div>
</div>

        </div>
        <div id="footer"><div class="container-footer">
    

    <div class="beian">
        
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41092802000242">
            

        </a>

        
        <a href="//beian.miit.gov.cn" target="_blank">
            
            <span class="some">icp...<span>
            
        </a>
    </div>

    
    <div class="info">
        
        <a href="https://github.com/loveminimal/hugo-theme-virgo">ğŸ•Šï¸</a> 2016 - <span id="info-date"></span>
    </div>

</div></div>
        <div class="cool-after" style="
            
                background-color: rgba(255, 255, 255, 0.49); 
                backdrop-filter: saturate(100%) blur(6px);
            
            "></div>
    </body>
</html>
