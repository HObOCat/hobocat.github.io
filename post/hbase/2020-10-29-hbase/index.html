<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="HBaseä½¿ç”¨ - https://hobocat.github.io/post/hbase/2020-10-29-hbase/">
    <meta name="author" content="Jack - https://hobocat.github.io/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>HBaseä½¿ç”¨</title>
    
    <base target="_blank">
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    
    
    
    
    <link rel="stylesheet" href="https://hobocat.github.io/style.min.94e7ed14b48117025ebd1148adc11f7268f1ebf50d97297ac663edf1aa6f52dc.css">
    
    <script>const DARK =  false ;</script>
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate cool">
        <div class="container-floating-box">
	<div class="box box1"></div>
	<div class="box box11"></div>
	<div class="box box12"></div>
	<div class="box box2"></div>
	<div class="box box3"></div>
	<div class="box box4"></div>
	<div class="box box5"></div>
	<div class="box box6"></div>
	<div class="box box7"></div>
	<div class="box box8"></div>
	<div class="box box9"></div>
</div>
        <div class="cool-before" style="background: url('/imgs/bg/wallhaven-6qr21l.jpg') left top/100% no-repeat fixed;"></div>
        <div id="header" class=""><div class="container-header">

    
    
    
    <div class="right">
        
        <h1 class="title">HBaseä½¿ç”¨</h1>
    
        
        
            <div id="toc">ğŸ“œ</div>
        
    </div>
</div>
</div>
        <div id="content">










<div class="container-main container-page ">

    

    
    
    
    

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="7409" width="12" height="12">
                <path
                    d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z"
                    p-id="7410" fill="#adb5bd"></path>
            </svg>
            2020-10-29&nbsp;&nbsp;&nbsp;
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="23838" width="11" height="11">
                <path
                    d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z"
                    p-id="23839" fill="#adb5bd"></path>
            </svg>
            2024-05-15&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="33866" width="12" height="12">
                <path
                    d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z"
                    fill="#adb5bd" p-id="33867"></path>
                <path
                    d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z"
                    fill="#adb5bd" p-id="33868"></path>
            </svg>
            9718 å­—</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
                p-id="32892" width="12" height="12">
                <path
                    d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z"
                    p-id="32893" fill="#adb5bd"></path>
                <path
                    d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z"
                    p-id="32894" fill="#adb5bd"></path>
            </svg>
            20 åˆ†é’Ÿ</span>
        <div class="container-ctgtag">
	<div class="taxonomy">
		<div class="tag">
			
			
		</div>
	</div>
</div>
        
    </div>

    <div class="toc">
        <div class="container-page-operation">
	<div class="page-operation">
		<div><a href="/"><img src="/imgs/icons/home-2.svg" alt=""></a></div>
		<div><a href="/nav"><img src="/imgs/icons/iov-navigate-1.svg" alt=""></a></div>
		<div><a href="/wiki"><img src="/imgs/icons/wiki.svg" alt=""></a></div>
		<div><a href="/tags"><img src="/imgs/icons/treetags.svg" alt=""></a></div>
		<div id="light-dark"><a><img src="/imgs/icons/moon2.svg" alt=""></a></div>
		<div><a href="#"><img src="/imgs/icons/up2.svg" alt=""></a></div>
	</div>
</div>
        <nav id="TableOfContents">
  <ul>
    <li><a href="#ä¸€ç®€ä»‹å®‰è£…">ä¸€ã€ç®€ä»‹&amp;å®‰è£…</a>
      <ul>
        <li><a href="#ç®€ä»‹">ç®€ä»‹</a></li>
        <li><a href="#æœ¯è¯­">æœ¯è¯­</a></li>
        <li><a href="#å®‰è£…">å®‰è£…</a></li>
      </ul>
    </li>
    <li><a href="#äºŒå‘½ä»¤è¡Œæ“ä½œ">äºŒã€å‘½ä»¤è¡Œæ“ä½œ</a></li>
    <li><a href="#ä¸‰hbaseæ¶æ„åŠå…¶åŸç†">ä¸‰ã€HBaseæ¶æ„åŠå…¶åŸç†</a>
      <ul>
        <li><a href="#å†™æ•°æ®æµç¨‹">å†™æ•°æ®æµç¨‹</a></li>
        <li><a href="#memstoreåˆ·å†™ä¸ºhfileæ—¶æœº">MemStoreåˆ·å†™ä¸ºHFILEæ—¶æœº</a></li>
        <li><a href="#è¯»æ•°æ®æµç¨‹">è¯»æ•°æ®æµç¨‹</a></li>
        <li><a href="#æ–‡ä»¶åˆå¹¶">æ–‡ä»¶åˆå¹¶</a></li>
        <li><a href="#region-split">Region Split</a></li>
      </ul>
    </li>
    <li><a href="#å››hbase-api">å››ã€HBase API</a>
      <ul>
        <li><a href="#åˆ›å»ºå‘½åç©ºé—´">åˆ›å»ºå‘½åç©ºé—´</a></li>
        <li><a href="#åˆ¤æ–­è¡¨æ˜¯å¦å­˜åœ¨">åˆ¤æ–­è¡¨æ˜¯å¦å­˜åœ¨</a></li>
        <li><a href="#åˆ›å»ºè¡¨">åˆ›å»ºè¡¨</a></li>
        <li><a href="#åˆ é™¤è¡¨">åˆ é™¤è¡¨</a></li>
        <li><a href="#å‘è¡¨ä¸­æ’å…¥æ•°æ®">å‘è¡¨ä¸­æ’å…¥æ•°æ®</a></li>
        <li><a href="#åˆ é™¤æ•°æ®">åˆ é™¤æ•°æ®</a></li>
        <li><a href="#æ‰«ææ•°æ®">æ‰«ææ•°æ®</a></li>
        <li><a href="#è·å–æŸä¸€è¡Œæ•°æ®">è·å–æŸä¸€è¡Œæ•°æ®</a></li>
        <li><a href="#è·å–æŸä¸€è¡ŒæŒ‡å®šåˆ—æ—åˆ—çš„æ•°æ®">è·å–æŸä¸€è¡ŒæŒ‡å®š&quot;åˆ—æ—:åˆ—&quot;çš„æ•°æ®</a></li>
      </ul>
    </li>
    <li><a href="#äº”æ‰©å±•ä¼˜åŒ–">äº”ã€æ‰©å±•ä¼˜åŒ–</a>
      <ul>
        <li><a href="#hbase-apiä¸mräº¤äº’">HBase APIä¸MRäº¤äº’</a></li>
        <li><a href="#hbase-apiä¸hiveå¯¹æ¥">HBase APIä¸Hiveå¯¹æ¥</a></li>
        <li><a href="#hbaseä¼˜åŒ–">HBaseä¼˜åŒ–</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>

    <div class='content  '>
        <h2 id="ä¸€ç®€ä»‹å®‰è£…">ä¸€ã€ç®€ä»‹&amp;å®‰è£…</h2>
<h3 id="ç®€ä»‹">ç®€ä»‹</h3>
<p>HBaseæ˜¯ä¸€ç§åˆ†å¸ƒå¼ã€å¯æ‰©å±•ã€æ”¯æŒæµ·é‡æ•°æ®å­˜å‚¨çš„NoSQLæ•°æ®åº“ã€‚</p>
<p>é€»è¾‘ä¸Šï¼ŒHBaseçš„æ•°æ®æ¨¡å‹åŒå…³ç³»å‹æ•°æ®åº“å¾ˆç±»ä¼¼ï¼Œæ•°æ®å­˜å‚¨åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œæœ‰è¡Œæœ‰åˆ—ã€‚ ä½†ä»HBaseçš„åº•å±‚ç‰©ç†å­˜å‚¨ç»“æ„ï¼ˆK-Vï¼‰æ¥çœ‹ï¼ŒHBaseæ›´åƒæ˜¯ä¸€ä¸ªå¤šç»´åº¦çš„map</p>
<img src="/img/hbase/HBaseé€»è¾‘ç»“æ„.png" style="zoom:60%;" />
<img src="/img/hbase/hbaseç‰©ç†ç»“æ„.png" style="zoom:67%;" />
<h3 id="æœ¯è¯­">æœ¯è¯­</h3>
<p>1ï¼‰Namespace</p>
<p>å‘½åç©ºé—´ï¼Œç±»ä¼¼äºå…³ç³»å‹æ•°æ®åº“çš„DataBaseæ¦‚å¿µï¼Œæ¯ä¸ªå‘½åç©ºé—´ä¸‹æœ‰å¤šä¸ªè¡¨ã€‚HBaseæœ‰ä¸¤ä¸ªè‡ªå¸¦çš„å‘½åç©ºé—´åˆ†åˆ«æ˜¯hbaseå’Œdefaultã€‚hbaseä¸­å­˜æ”¾çš„æ˜¯HBaseå†…ç½®çš„è¡¨ï¼Œ defaultè¡¨æ˜¯ç”¨æˆ·é»˜è®¤ä½¿ç”¨çš„å‘½åç©ºé—´ã€‚</p>
<p>2ï¼‰Region</p>
<p>æŒ‰ç…§æ•°æ®é‡åˆ‡åˆ†çš„è¡Œç»„æˆçš„åˆ‡ç‰‡ç§°ä¸ºRegionã€‚</p>
<p>3ï¼‰Row</p>
<p>HBaseè¡¨ä¸­çš„æ¯è¡Œæ•°æ®éƒ½ç”±ä¸€ä¸ªRowKeyå’Œå¤šä¸ªColumnï¼ˆåˆ—ï¼‰ç»„æˆï¼Œæ•°æ®æ˜¯æŒ‰ç…§RowKeyçš„å­—å…¸é¡ºåºå­˜å‚¨çš„ï¼Œå¹¶ä¸”æŸ¥è¯¢æ•°æ®æ—¶åªèƒ½æ ¹æ® RowKey è¿›è¡Œæ£€ç´¢ï¼Œæ‰€ä»¥RowKeyçš„è®¾è®¡ååˆ†é‡è¦ã€‚</p>
<p>4ï¼‰Column</p>
<p>HBaseä¸­çš„æ¯ä¸ªåˆ—éƒ½ç”±Column Familyï¼ˆåˆ—æ—ï¼‰å’ŒColumn Qualifierï¼ˆåˆ—é™å®šç¬¦ï¼‰è¿›è¡Œé™å®šã€‚å»ºè¡¨æ—¶åªéœ€æŒ‡æ˜åˆ—æ—ï¼Œè€Œåˆ—é™å®šç¬¦æ— éœ€é¢„å…ˆå®šä¹‰ã€‚</p>
<p>5ï¼‰Timestamp</p>
<p>ç”¨äºæ ‡è¯†æ•°æ®çš„ä¸åŒç‰ˆæœ¬ï¼ˆversionï¼‰ï¼Œæ¯æ¡æ•°æ®å†™å…¥æ—¶ï¼Œå¦‚æœä¸æŒ‡å®šæ—¶é—´æˆ³ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºå…¶åŠ ä¸Šè¯¥å­—æ®µï¼Œå…¶å€¼ä¸ºå†™å…¥HBaseçš„æ—¶é—´ã€‚</p>
<p>6ï¼‰Cell</p>
<p>ç”±{rowkey, column Family:column Qualifier, timestamp}å”¯ä¸€ç¡®å®šçš„å•å…ƒã€‚cellä¸­çš„æ•°æ®æ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œå…¨éƒ¨æ˜¯å­—èŠ‚ç å½¢å¼å­˜å‚¨ã€‚</p>
<h3 id="å®‰è£…">å®‰è£…</h3>
<p>å‰ææ¡ä»¶ï¼šå·²å®‰è£…zookeeperï¼ŒHadoop</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šè§£å‹</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>tar -zxvf hbase-2.3.2-bin.tar.gz -C /opt/module
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ç¬¬äºŒæ­¥ï¼šé…ç½®<code>hbase-env.sh</code></strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#998;font-style:italic"># JAVA_HOMEé…ç½®</span>
</span></span><span style="display:flex;"><span><span style="color:#0086b3">export</span> <span style="color:#008080">JAVA_HOME</span><span style="color:#000;font-weight:bold">=</span>/opt/module/jdk8
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># ä¸ä½¿ç”¨å†…ç½®çš„zk</span>
</span></span><span style="display:flex;"><span><span style="color:#0086b3">export</span> <span style="color:#008080">HBASE_MANAGES_ZK</span><span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">false</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ç¬¬ä¸‰æ­¥ï¼šä¿®æ”¹<code>hbase-site.xml</code></strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- æ¯ä¸ªregionServerçš„å…±äº«ç›®å½•,ç”¨æ¥æŒä¹…åŒ–Hbase,é»˜è®¤æƒ…å†µä¸‹åœ¨/tmp/hbaseä¸‹é¢ --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.rootdir<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>/hbase<span style="color:#000080">&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- hbaseé›†ç¾¤æ¨¡å¼,falseè¡¨ç¤ºhbaseçš„å•æœºï¼Œtrueè¡¨ç¤ºæ˜¯åˆ†å¸ƒå¼æ¨¡å¼ --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.cluster.distributed<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>true<span style="color:#000080">&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- hbase masterèŠ‚ç‚¹çš„ç«¯å£ --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.master.port<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>16000<span style="color:#000080">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- hbase masterçš„web uié¡µé¢çš„ç«¯å£ --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.master.info.port<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>16010<span style="color:#000080">&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- hbase masterçš„web uié¡µé¢ç»‘å®šçš„åœ°å€ --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span> 
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.master.info.bindAddress<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>0.0.0.0<span style="color:#000080">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- hbaseä¾èµ–çš„zkåœ°å€ --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.zookeeper.quorum<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>centos161,centos162,centos163<span style="color:#000080">&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- zookeeperçš„å·¥ä½œç›®å½• --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.zookeeper.property.dataDir<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>/opt/module/zookeeper/data<span style="color:#000080">&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- ä¸€ä¸ªregionè¿›è¡Œmajor compactionåˆå¹¶çš„å‘¨æœŸï¼Œåœ¨è¿™ä¸ªç‚¹çš„æ—¶å€™ï¼Œè¿™ä¸ªregionä¸‹çš„æ‰€æœ‰hfileä¼šè¿›è¡Œåˆå¹¶ï¼Œé»˜è®¤æ˜¯7å¤©ã€‚major   
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">        compactionéå¸¸è€—èµ„æº,å»ºè®®ç”Ÿäº§å…³é—­(è®¾ç½®ä¸º0)ï¼Œåœ¨åº”ç”¨ç©ºé—²æ—¶é—´æ‰‹åŠ¨è§¦å‘ã€compact è¡¨åã€‘ --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.hregion.majorcompaction<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>604800000<span style="color:#000080">&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- ä¸€ä¸ªæŠ–åŠ¨æ¯”ä¾‹ï¼Œæ„æ€æ˜¯è¯´ä¸Šä¸€ä¸ªå‚æ•°è®¾ç½®æ˜¯7å¤©è¿›è¡Œä¸€æ¬¡åˆå¹¶ï¼Œä¹Ÿå¯ä»¥æœ‰50%çš„æŠ–åŠ¨æ¯”ä¾‹ï¼Œç”Ÿäº§ç¯å¢ƒmajorcompactionåº”è¯¥è¢«å…³é—­ï¼Œæ­¤å‚æ•°å°±ä¸é‡è¦äº† --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.hregion.majorcompaction.jitter<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>0.50<span style="color:#000080">&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- ä¸€ä¸ªstoreé‡Œé¢å…è®¸å­˜çš„hfileçš„ä¸ªæ•°ï¼Œè¶…è¿‡è¿™ä¸ªä¸ªæ•°ä¼šè¢«å†™åˆ°æ–°çš„ä¸€ä¸ªhfileé‡Œé¢ ä¹Ÿå³æ˜¯æ¯ä¸ªregionçš„æ¯ä¸ªåˆ—æ—å¯¹åº”çš„memstoreåœ¨fulshä¸ºhfileçš„æ—¶å€™ï¼Œé»˜è®¤æƒ…å†µä¸‹å½“è¾¾åˆ°3ä¸ªhfileçš„æ—¶å€™å°±ä¼šå¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œåˆå¹¶é‡å†™ä¸ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œè®¾ç½®ä¸ªæ•°è¶Šå¤§å¯ä»¥å‡å°‘è§¦å‘åˆå¹¶çš„æ—¶é—´ï¼Œä½†æ˜¯æ¯æ¬¡åˆå¹¶çš„æ—¶é—´å°±ä¼šè¶Šé•¿ --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.hstore.compactionThreshold<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>3<span style="color:#000080">&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- #######################################ä»¥ä¸‹æ˜¯éå¿…é¡»é…ç½®å‚æ•°####################################### --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- regionServerçš„å…¨å±€memstoreçš„å¤§å°ï¼Œè¶…è¿‡è¯¥å¤§å°ä¼šè§¦å‘flushåˆ°ç£ç›˜çš„æ“ä½œï¼Œé»˜è®¤æ˜¯å †å¤§å°çš„40%ï¼Œè€Œä¸”regionserverçº§åˆ«çš„flushä¼šé˜»å¡å®¢æˆ·ç«¯è¯»å†™ --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.regionserver.global.memstore.size<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå®‰å…¨çš„è®¾ç½®ï¼Œæœ‰æ—¶å€™é›†ç¾¤çš„â€œå†™è´Ÿè½½â€éå¸¸é«˜ï¼Œå†™å…¥é‡ä¸€ç›´è¶…è¿‡flushçš„é‡ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¸Œæœ›memstoreä¸è¦è¶…è¿‡ä¸€å®šçš„å®‰å…¨è®¾ç½®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå†™æ“ä½œå°±è¦è¢«é˜»å¡ä¸€ç›´åˆ°memstoreæ¢å¤åˆ°ä¸€ä¸ªâ€œå¯ç®¡ç†â€çš„å¤§å°ï¼Œè¿™ä¸ªå¤§å°å°±æ˜¯é»˜è®¤å€¼æ˜¯å †å¤§å°*0.4*0.95ï¼Œä¹Ÿå°±æ˜¯å½“regionserverçº§åˆ«çš„flushæ“ä½œå‘é€åï¼Œä¼šé˜»å¡å®¢æˆ·ç«¯å†™ï¼Œä¸€ç›´é˜»å¡åˆ°æ•´ä¸ªregionserverçº§åˆ«çš„memstoreçš„å¤§å°ä¸ºå †å¤§å°*0.4*0.95ä¸ºæ­¢ --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.regionserver.global.memstore.size.lower.limit<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>  
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- å†…å­˜ä¸­çš„æ–‡ä»¶åœ¨è‡ªåŠ¨åˆ·æ–°ä¹‹å‰èƒ½å¤Ÿå­˜æ´»çš„æœ€é•¿æ—¶é—´ï¼Œé»˜è®¤æ˜¯1h --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.regionserver.optionalcacheflushinterval<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>3600000<span style="color:#000080">&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- å•ä¸ªregioné‡Œmemstoreçš„ç¼“å­˜å¤§å°ï¼Œè¶…è¿‡é‚£ä¹ˆæ•´ä¸ªHRegionå°±ä¼šflush,é»˜è®¤128M --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.hregion.memstore.flush.size<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>134217728<span style="color:#000080">&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>  
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ç¬¬å››æ­¥ï¼šä¿®æ”¹<code>regionservers</code></strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>centos161
</span></span><span style="display:flex;"><span>centos162
</span></span><span style="display:flex;"><span>centos163
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ç¬¬äº”æ­¥ï¼šè½¯è¿æ¥Hadoopé…ç½®æ–‡ä»¶åˆ°HBase</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>ln -s /opt/module/hadoop/etc/hadoop/core-site.xml /opt/module/hbase/conf/core-site.xml
</span></span><span style="display:flex;"><span>ln -s /opt/module/hadoop/etc/hadoop/hdfs-site.xml /opt/module/hbase/conf/hdfs-site.xml
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ç¬¬å…­æ­¥ï¼šé…ç½®<code>/etc/profile</code>ï¼ŒåŠ å…¥HBASE_HOMEå’ŒPATHè·¯å¾„</strong></p>
<p><strong>ç¬¬ä¸ƒæ­¥ï¼šHBaseè¿œç¨‹å‘é€åˆ°å…¶ä»–é›†ç¾¤æœºå™¨</strong></p>
<p><strong>ç¬¬å…«æ­¥ï¼šå¯åŠ¨</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>bin/start-hbase.sh 
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic"># è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼</span>
</span></span><span style="display:flex;"><span>bin/hbase shell
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="äºŒå‘½ä»¤è¡Œæ“ä½œ">äºŒã€å‘½ä»¤è¡Œæ“ä½œ</h2>
<p><strong>åˆ›å»ºå‘½åç©ºé—´</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase">create_namespace &#39;bigdata&#39;
</code></pre><p><strong>åˆ é™¤å‘½åç©ºé—´ï¼Œéœ€è¦å‘½åç©ºé—´ä¸‹çš„æ²¡æœ‰è¡¨</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase">drop_namespace &#39;bigdata&#39;
</code></pre><p><strong>åˆ›å»ºè¡¨</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase"># åˆ›å»ºä¸€å¼ personè¡¨ï¼Œåˆ—æ—ä¸ºbase_infoå’Œaddr
create &#39;bigdata:person&#39;,&#39;base_info&#39;,&#39;addr&#39;
</code></pre><p><strong>æ’å…¥æ•°æ®åˆ°è¡¨</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase">put &#39;bigdata:person&#39;,&#39;1001&#39;,&#39;base_info:name&#39;,&#39;Jack&#39;
put &#39;bigdata:person&#39;,&#39;1001&#39;,&#39;base_info:age&#39;,&#39;18&#39;
put &#39;bigdata:person&#39;,&#39;1001&#39;,&#39;addr:city&#39;,&#39;beijing&#39;
put &#39;bigdata:person&#39;,&#39;1002&#39;,&#39;base_info:name&#39;,&#39;tom&#39;
put &#39;bigdata:person&#39;,&#39;1003&#39;,&#39;base_info:name&#39;,&#39;rose&#39;
put &#39;bigdata:person&#39;,&#39;1003&#39;,&#39;base_info:name&#39;,&#39;rose&#39;
# æ’å…¥æ•°æ®å¹¶æŒ‡å®šæ—¶é—´æˆ³
put &#39;bigdata:person&#39;,&#39;1001&#39;,&#39;addr:city&#39;,&#39;shanghai&#39;,1603437570384
</code></pre><p><strong>æ‰«æè¡¨æ•°æ®</strong></p>
<pre tabindex="0"><code># å…¨è¡¨æ‰«æ
scan &#39;bigdata:person&#39;
# å·¦é—­å³å¼€æ‰«æ
scan &#39;bigdata:person&#39;,{STARTROW =&gt; &#39;1001&#39;, ENDROW =&gt; &#39;1003&#39;}
# ä»æŒ‡å®šSTARTROWå¼€å§‹æ‰«æ
scan &#39;bigdata:person&#39;,{STARTROW =&gt; &#39;1001&#39;}
# ä»æŒ‡å®šSTARTROWå¼€å§‹æ‰«ææŒ‡å®šä¸ªæ•°
scan &#39;bigdata:person&#39;,{STARTROW =&gt; &#39;1001&#39;, LIMIT =&gt; 10}
</code></pre><p><strong>æŸ¥çœ‹è¡¨ç»“æ„ä¿¡æ¯</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase">describe &#39;bigdata:person&#39;
</code></pre><p><strong>æ›´æ–°æŒ‡å®šå­—æ®µçš„æ•°æ®</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase">put &#39;bigdata:person&#39;,&#39;1001&#39;,&#39;base_info:name&#39;,&#39;Jane&#39;
</code></pre><p><strong>æŸ¥çœ‹æŒ‡å®šè¡Œæˆ–æŒ‡å®šè¡Œçš„æŒ‡å®šåˆ—æ•°æ®</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase"># æŸ¥çœ‹æŒ‡å®šè¡Œå†…å®¹
get &#39;bigdata:person&#39;,&#39;1001&#39;
# æŸ¥çœ‹æŒ‡å®šè¡Œçš„æŒ‡å®šåˆ—ç¥–æ•°æ®
get &#39;bigdata:person&#39;,&#39;1001&#39;,&#39;base_info&#39;
# æŸ¥çœ‹æŒ‡å®šè¡Œçš„æŒ‡å®šåˆ—æ•°æ®
get &#39;bigdata:person&#39;,&#39;1001&#39;,&#39;base_info:name&#39;
# è·å¾—æŒ‡å®šåˆ—æ—ä¸‹çš„ç‰ˆæœ¬æ•°æ®
get &#39;bigdata:person&#39;,&#39;1001&#39;,{COLUMN=&gt;&#39;base_info&#39;,VERSIONS=&gt;3}
# è·å¾—æŒ‡å®šåˆ—æ—ä¸‹çš„æŒ‡å®šåˆ—ç‰ˆæœ¬æ•°æ®
get &#39;bigdata:person&#39;,&#39;1001&#39;,{COLUMN=&gt;&#39;base_info:name&#39;,VERSIONS=&gt;3}
</code></pre><p><strong>ç»Ÿè®¡è¡¨æŒ‡å®šè¡Œæ•°</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase">count &#39;bigdata:person&#39;
</code></pre><p><strong>åˆ é™¤æ•°æ®</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase"># åˆ é™¤æŸrowkeyçš„å…¨éƒ¨æ•°æ®
deleteall &#39;bigdata:person&#39;,&#39;1003&#39;
# åˆ é™¤æŸrowkeyçš„æŸä¸€åˆ—æ•°æ®
delete &#39;bigdata:person&#39;,&#39;1001&#39;,&#39;base_info:age&#39;
# æ¸…ç©ºè¡¨æ•°æ®
truncate &#39;bigdata:person&#39; 
</code></pre><p><strong>åˆ é™¤è¡¨</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase"># é¦–å…ˆå…ˆå°†è¡¨å˜æˆä¸å¯ç”¨çŠ¶æ€
disable &#39;bigdata:person&#39;
# dropè¡¨
drop &#39;bigdata:person&#39;
</code></pre><p><strong>å˜æ›´è¡¨ä¿¡æ¯</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase">alter &#39;bigdata:person&#39;,{NAME=&gt;&#39;base_info&#39;,VERSIONS=&gt;3}
</code></pre><h2 id="ä¸‰hbaseæ¶æ„åŠå…¶åŸç†">ä¸‰ã€HBaseæ¶æ„åŠå…¶åŸç†</h2>
<img src="/img/hbase/æ¶æ„.png" style="zoom:67%;" />
<ul>
<li>
<p>StoreFile</p>
<p>ä¿å­˜å®é™…æ•°æ®çš„ç‰©ç†æ–‡ä»¶ï¼ŒStoreFileä»¥HFileçš„å½¢å¼å­˜å‚¨åœ¨HDFSä¸Šã€‚æ¯ä¸ªStoreä¼šæœ‰ä¸€ä¸ªæˆ–å¤šä¸ªStoreFileï¼Œæ•°æ®åœ¨æ¯ä¸ªStoreFileä¸­éƒ½æ˜¯æœ‰åºçš„</p>
</li>
<li>
<p>MemStore</p>
<p>å†™ç¼“å­˜ï¼Œç”±äºHFileä¸­çš„æ•°æ®è¦æ±‚æ˜¯æœ‰åºçš„ï¼Œæ‰€ä»¥æ•°æ®æ˜¯å…ˆå­˜å‚¨åœ¨MemStoreä¸­ï¼Œæ’å¥½åºåç­‰åˆ°è¾¾åˆ·å†™æ—¶æœºæ‰ä¼šåˆ·å†™åˆ°HFileï¼Œæ¯æ¬¡åˆ·å†™éƒ½ä¼šå½¢æˆä¸€ä¸ªæ–°çš„HFile</p>
</li>
<li>
<p>HLogã€WALã€‘</p>
<p>ç”±äºæ•°æ®è¦ç»MemStoreæ’åºåæ‰èƒ½åˆ·å†™åˆ°HFileï¼Œä½†æŠŠæ•°æ®ä¿å­˜åœ¨å†…å­˜ä¸­ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜æ•°æ®ä¼šå…ˆå†™åœ¨ä¸€ä¸ªå«åšWrite-Ahead logfileçš„æ–‡ä»¶ä¸­ï¼Œç„¶åå†å†™å…¥MemStoreä¸­ã€‚æ‰€ä»¥åœ¨ç³»ç»Ÿå‡ºç°æ•…éšœçš„æ—¶å€™ï¼Œæ•°æ®å¯ä»¥é€šè¿‡è¿™ä¸ªæ—¥å¿—æ–‡ä»¶é‡å»º</p>
</li>
</ul>
<h3 id="å†™æ•°æ®æµç¨‹">å†™æ•°æ®æµç¨‹</h3>
<img src="/img/hbase/å†™æ•°æ®æµç¨‹.png" style="zoom:80%;" />
<p>1ï¼‰Clientå…ˆè®¿é—®zookeeperï¼Œè·å–<code>hbase:meta</code>è¡¨ä½äºå“ªä¸ªRegionServerï¼Œmateè¡¨å­˜å‚¨äº†æ¯ä¸ªregionçš„ä¿¡æ¯</p>
<p>2ï¼‰è®¿é—®å¯¹åº”çš„RegionServerï¼Œè·å–<code>hbase:meta</code>è¡¨ï¼Œæ ¹æ®è¯»è¯·æ±‚çš„<code>namespace:table/rowkey</code>ï¼Œ æŸ¥è¯¢å‡ºç›®æ ‡æ•°æ®ä½äºå“ªä¸ªRegionServerä¸­çš„Regionä¸­ã€‚å¹¶å°†è¯¥tableçš„regionä¿¡æ¯ä»¥åŠmetaè¡¨çš„ä½ç½®ä¿¡æ¯ç¼“å­˜åœ¨å®¢æˆ·ç«¯çš„meta cacheï¼Œæ–¹ä¾¿ä¸‹æ¬¡è®¿é—®</p>
<p>3ï¼‰ä¸ç›®æ ‡RegionServerè¿›è¡Œé€šè®¯</p>
<p>4ï¼‰å°†æ•°æ®é¡ºåºå†™å…¥ï¼ˆè¿½åŠ ï¼‰åˆ°WAL</p>
<p>5ï¼‰å°†æ•°æ®å†™å…¥å¯¹åº”çš„MemStoreï¼Œæ•°æ®ä¼šåœ¨MemStoreè¿›è¡Œæ’åº</p>
<p>6ï¼‰å‘å®¢æˆ·ç«¯å‘é€ack</p>
<p>7ï¼‰ç­‰è¾¾åˆ°MemStoreçš„åˆ·å†™æ—¶æœºåï¼Œå°†æ•°æ®åˆ·å†™åˆ°HFile</p>
<blockquote>
<p>å®é™…æ“ä½œæ˜¯å…ˆå†™å…¥walå†…å­˜ï¼Œå†å†™å…¥memstoreï¼Œä¹‹åwalå†…å­˜æ•°æ®åˆ·ç›˜åˆ°hdfsï¼Œå¦‚æœè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸è¿›è¡Œå›æ»šæ“ä½œ</p>
</blockquote>
<h3 id="memstoreåˆ·å†™ä¸ºhfileæ—¶æœº">MemStoreåˆ·å†™ä¸ºHFILEæ—¶æœº</h3>
<ul>
<li>
<p>å½“æŸä¸ªmemstroeçš„å¤§å°è¾¾åˆ°äº†<code>hbase.hregion.memstore.flush.size</code>ï¼ˆé»˜è®¤å€¼128Mï¼‰ï¼Œå…¶æ‰€åœ¨regionçš„æ‰€æœ‰memstoreéƒ½ä¼šåˆ·å†™ã€‚å½“memstoreçš„å¤§å°è¾¾åˆ°äº†<code>hbase.hregion.memstore.flush.size</code>*<code>hbase.hregion.memstore.block.multiplier</code>ï¼ˆé»˜è®¤å€¼4ï¼‰æ—¶ï¼Œä¼šé˜»æ­¢ç»§ç»­å¾€è¯¥memstoreå†™æ•°æ®ã€‚</p>
</li>
<li>
<p>å½“RegionServerä¸­memstoreçš„æ€»å¤§å°è¾¾åˆ°<code>java_heapsize</code>*<code>hbase.regionserver.global.memstore.size</code>ï¼ˆé»˜è®¤å€¼0.4ï¼‰</p>
<p>*<code>hbase.regionserver.global.memstore.size.lower.limit</code>ï¼ˆé»˜è®¤å€¼ 0.95ï¼‰ä¼šæŒ‰ç…§å…¶æ‰€æœ‰memstoreçš„å¤§å°é¡ºåºï¼ˆç”±å¤§åˆ°å°ï¼‰ä¾æ¬¡è¿›è¡Œåˆ·å†™ã€‚ç›´åˆ°RegionServerä¸­æ‰€æœ‰memstoreçš„æ€»å¤§å°å‡å°åˆ°ä¸Šè¿°å€¼ä»¥ä¸‹ã€‚ å½“RegionServerä¸­memstoreçš„æ€»å¤§å°è¾¾åˆ°</p>
<p><code>java_heapsize</code>*<code>hbase.regionserver.global.memstore.size</code>æ—¶ï¼Œä¼šé˜»æ­¢ç»§ç»­å¾€æ‰€æœ‰çš„ memstore å†™æ•°æ®ã€‚</p>
</li>
<li>
<p>åˆ°è¾¾è‡ªåŠ¨åˆ·å†™çš„æ—¶é—´ã€‚è‡ªåŠ¨åˆ·æ–°çš„æ—¶é—´é—´éš”ç”±è¯¥å±æ€§è¿›è¡Œé…ç½® <code>hbase.regionserver.optionalcacheflushinterval</code>ï¼ˆé»˜è®¤1å°æ—¶ï¼‰ã€‚</p>
</li>
<li>
<p>å½“WALæ–‡ä»¶çš„æ•°é‡è¶…è¿‡<code>hbase.regionserver.max.logs</code>ä¼šæŒ‰ç…§æ—¶é—´é¡ºåºä¾æ¬¡è¿›è¡Œåˆ·å†™ï¼Œç›´åˆ° WAL æ–‡ä»¶æ•°é‡å‡å°åˆ°å…¶å€¼ä»¥ä¸‹ï¼ˆè¯¥å±æ€§åå·²ç»åºŸå¼ƒï¼Œ ç°æ— éœ€æ‰‹åŠ¨è®¾ç½®ï¼Œæœ€å¤§å€¼ä¸º 32ï¼‰ã€‚</p>
</li>
</ul>
<h3 id="è¯»æ•°æ®æµç¨‹">è¯»æ•°æ®æµç¨‹</h3>
<img src="/img/hbase/è¯»æ•°æ®æµç¨‹.png" style="zoom:80%;" />
<p>1ï¼‰Clientå…ˆè®¿é—®zookeeperï¼Œè·å–<code>hbase:meta</code>è¡¨çš„RegionServer</p>
<p>2ï¼‰è®¿é—®å¯¹åº”çš„RegionServerï¼Œè·å–<code>hbase:meta</code>è¡¨ï¼Œæ ¹æ®è¯»è¯·æ±‚çš„<code>namespace:table/rowkey</code>ï¼Œ æŸ¥è¯¢å‡ºç›®æ ‡æ•°æ®çš„RegionServerä¸­çš„Regionã€‚å¹¶å°†è¯¥tableçš„regionä¿¡æ¯ä»¥åŠmetaè¡¨çš„ä½ç½®ä¿¡æ¯ç¼“å­˜åœ¨å®¢æˆ·ç«¯çš„metacacheï¼Œæ–¹ä¾¿ä¸‹æ¬¡è®¿é—®</p>
<p>3ï¼‰ä¸ç›®æ ‡RegionServerè¿›è¡Œé€šè®¯</p>
<p>4ï¼‰åˆ†åˆ«åœ¨BlockCacheï¼ˆè¯»ç¼“å­˜ï¼‰ï¼ŒMemStoreå’ŒStoreFileï¼ˆHFileï¼‰ä¸­æŸ¥è¯¢ç›®æ ‡æ•°æ®ï¼Œå¹¶å°†æŸ¥åˆ°çš„æ‰€æœ‰æ•°æ®è¿›è¡Œåˆå¹¶ã€‚æ­¤å¤„æ‰€æœ‰æ•°æ®æ˜¯æŒ‡åŒä¸€æ¡æ•°æ®çš„ä¸åŒç‰ˆæœ¬ï¼ˆtimestampï¼‰æˆ–è€…ä¸åŒçš„ç±»å‹ï¼ˆPut/Deleteï¼‰</p>
<p>5ï¼‰å°†ä»æ–‡ä»¶ä¸­æŸ¥è¯¢åˆ°çš„æ•°æ®å—ï¼ˆBlockï¼ŒHFileæ•°æ®å­˜å‚¨å•å…ƒï¼Œé»˜è®¤å¤§å°ä¸º64KBï¼‰ç¼“å­˜åˆ°BlockCache</p>
<p>6ï¼‰å°†åˆå¹¶åçš„æœ€ç»ˆç»“æœè¿”å›ç»™å®¢æˆ·ç«¯</p>
<blockquote>
<p>BlockCahceä¼šè®°å½•rowkeyå’Œè½ç›˜æ–‡ä»¶åŠå¯¹åº”æ•°æ®ï¼Œå¦‚æœè½ç›˜æ–‡ä»¶å·²è¢«ç¼“å­˜é‚£ä¹ˆå·²è¢«ç¼“å­˜çš„æ–‡ä»¶ä¸éœ€è¦å†æ¬¡è¯»å–</p>
</blockquote>
<h3 id="æ–‡ä»¶åˆå¹¶">æ–‡ä»¶åˆå¹¶</h3>
<p>â€‹	ç”±äºmemstoreæ¯æ¬¡åˆ·å†™éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„HFileï¼Œä¸”åŒä¸€ä¸ªå­—æ®µçš„ä¸åŒç‰ˆæœ¬ï¼ˆtimestampï¼‰å’Œä¸åŒç±»å‹ï¼ˆPut/Deleteï¼‰æœ‰å¯èƒ½ä¼šåˆ†å¸ƒåœ¨ä¸åŒçš„HFileä¸­ï¼Œå› æ­¤æŸ¥è¯¢æ—¶éœ€è¦éå†æ‰€æœ‰çš„HFileã€‚ä¸ºäº†å‡å°‘HFileçš„ä¸ªæ•°ï¼Œä»¥åŠæ¸…ç†è¿‡æœŸå’Œåˆ é™¤çš„æ•°æ®ï¼Œä¼šè¿›è¡ŒStoreFile Compactionã€‚                                                                                                                                                                                                                                                                                                                                                                         	Compactionåˆ†ä¸ºä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯<code>Minor Compaction</code>å’Œ<code>Major Compaction</code>ã€‚Minor Compactionä¼šå°†ä¸´è¿‘çš„è‹¥å¹²ä¸ªè¾ƒå°çš„HFileåˆå¹¶æˆä¸€ä¸ªè¾ƒå¤§çš„ HFileï¼Œ<span style="color:red">ä½†ä¸ä¼šæ¸…ç†è¿‡æœŸå’Œåˆ é™¤çš„æ•°æ®</span>ã€‚<code>Major Compaction</code>ä¼šå°†ä¸€ä¸ªStoreä¸‹çš„æ‰€æœ‰çš„HFileåˆå¹¶æˆä¸€ä¸ªå¤§HFileï¼Œ<span style="color:red">å¹¶ä¸”ä¼šæ¸…ç†æ‰è¿‡æœŸå’Œåˆ é™¤çš„æ•°æ®</span>ã€‚</p>
<blockquote>
<p>å¯ä½¿ç”¨<code>scan tableName,{RAW=&gt;true,VERSIONS=&gt;10}</code>æŸ¥çœ‹å…ˆä¿å­˜çš„æ‰€æœ‰æ•°æ®</p>
</blockquote>
<h3 id="region-split">Region Split</h3>
<p>â€‹	é»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªTableèµ·åˆåªæœ‰ä¸€ä¸ªRegionï¼Œéšç€æ•°æ®çš„ä¸æ–­å†™å…¥ï¼ŒRegionä¼šè‡ªåŠ¨è¿›è¡Œæ‹†åˆ†ã€‚åˆšæ‹†åˆ†æ—¶ï¼Œä¸¤ä¸ªå­Regionéƒ½ä½äºå½“å‰çš„RegionServerï¼Œä½†å¤„äºè´Ÿè½½å‡è¡¡çš„è€ƒè™‘ï¼Œ HMasteræœ‰å¯èƒ½ä¼šå°†æŸä¸ªRegionè½¬ç§»ç»™å…¶ä»–çš„RegionServerã€‚</p>
<p>å½“1ä¸ªregionä¸­çš„æŸä¸ªStoreä¸‹æ‰€æœ‰StoreFileçš„æ€»å¤§å°è¶…è¿‡ä»¥ä¸‹å…¬å¼è§¦å‘ï¼Œå…¶ä¸­Rä¸ºå½“å‰RegionServerä¸­å±äºè¯¥Tableçš„ä¸ªæ•°</p>
<p>Min(R^2 * hbase.hregion.memstore.flush.size, hbase.hregion.max.filesize)</p>
<ul>
<li>hbase.hregion.max.filesizeé»˜è®¤10G</li>
<li>hbase.hregion.memstore.flush.sizeé»˜è®¤128M</li>
</ul>
<blockquote>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“æˆ‘ä»¬é€šè¿‡åˆ›å»ºä¸€å¼ è¡¨æ—¶ï¼Œåªæœ‰ä¸€ä¸ªregionæ­£å¤„äºæ··æ²Œæ—¶æœŸï¼Œstart-end keyæ— è¾¹ç•Œå¯è°“æµ·çº³ç™¾å·ã€‚æ‰€æœ‰çš„rowkeyéƒ½å†™å…¥åˆ°è¿™ä¸ªregioné‡Œï¼Œç„¶åæ•°æ®è¶Šæ¥è¶Šå¤šï¼Œregionçš„sizeè¶Šæ¥è¶Šå¤§æ—¶ï¼Œå¤§åˆ°ä¸€å®šçš„é˜€å€¼hbaseå°±ä¼šå°†regionä¸€åˆ†ä¸ºäºŒï¼Œæˆä¸º2ä¸ªregionï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåˆ†è£‚ï¼ˆregion-splitï¼‰ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å°±è¿™æ ·é»˜è®¤å»ºè¡¨ï¼Œè¡¨é‡Œä¸æ–­çš„putæ•°æ®ï¼Œæ›´ä¸¥é‡çš„æ˜¯æˆ‘ä»¬çš„rowkeyè¿˜æ˜¯é¡ºåºå¢å¤§çš„ï¼Œæ˜¯æ¯”è¾ƒå¯æ€•çš„ã€‚å­˜åœ¨çš„ç¼ºç‚¹æ¯”è¾ƒæ˜æ˜¾ï¼š</p>
<ul>
<li>é¦–å…ˆæ˜¯çƒ­ç‚¹å†™ï¼Œæˆ‘ä»¬æ€»æ˜¯å‘æœ€å¤§çš„start keyæ‰€åœ¨çš„regionå†™æ•°æ®ï¼Œå› ä¸ºæˆ‘ä»¬çš„rowkeyæ€»æ˜¯ä¼šæ¯”ä¹‹å‰çš„å¤§ï¼Œå¹¶ä¸”hbaseçš„æ˜¯æŒ‰å‡åºæ–¹å¼æ’åºçš„ã€‚æ‰€ä»¥å†™æ“ä½œæ€»æ˜¯è¢«å®šä½åˆ°æ— ä¸Šç•Œçš„é‚£ä¸ªregionä¸­</li>
<li>å…¶æ¬¡ï¼Œç”±äºçƒ­ç‚¹ï¼Œæˆ‘ä»¬æ€»æ˜¯å¾€æœ€å¤§çš„start keyçš„regionå†™è®°å½•ï¼Œä¹‹å‰åˆ†è£‚å‡ºæ¥çš„regionä¸ä¼šè¢«å†™æ•°æ®ï¼Œæœ‰ç‚¹æ‰“å…¥å†·å®«çš„æ„Ÿè§‰ï¼Œä»–ä»¬éƒ½å¤„äºåŠæ»¡çŠ¶æ€ï¼Œè¿™æ ·çš„åˆ†å¸ƒä¹Ÿæ˜¯ä¸åˆ©çš„</li>
</ul>
</blockquote>
<h2 id="å››hbase-api">å››ã€HBase API</h2>
<h3 id="åˆ›å»ºå‘½åç©ºé—´">åˆ›å»ºå‘½åç©ºé—´</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">createNamespace</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Configuration<span style="color:#bbb"> </span>configuration<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Configuration();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>configuration.<span style="color:#008080">set</span>(HConstants.<span style="color:#008080">ZOOKEEPER_QUORUM</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;centos161,centos162,centos163&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Connection<span style="color:#bbb"> </span>connection<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ConnectionFactory.<span style="color:#008080">createConnection</span>(configuration);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Admin<span style="color:#bbb"> </span>admin<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>connection.<span style="color:#008080">getAdmin</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>NamespaceDescriptor<span style="color:#bbb"> </span>namespaceDescriptor<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>NamespaceDescriptor.<span style="color:#008080">create</span>(<span style="color:#d14">&#34;bigdata&#34;</span>).<span style="color:#008080">build</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>admin.<span style="color:#008080">createNamespace</span>(namespaceDescriptor);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>admin.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>connection.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åˆ¤æ–­è¡¨æ˜¯å¦å­˜åœ¨">åˆ¤æ–­è¡¨æ˜¯å¦å­˜åœ¨</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">tableExists</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Configuration<span style="color:#bbb"> </span>configuration<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Configuration();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>configuration.<span style="color:#008080">set</span>(HConstants.<span style="color:#008080">ZOOKEEPER_QUORUM</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;centos161,centos162,centos163&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Connection<span style="color:#bbb"> </span>connection<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ConnectionFactory.<span style="color:#008080">createConnection</span>(configuration);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Admin<span style="color:#bbb"> </span>admin<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>connection.<span style="color:#008080">getAdmin</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#458;font-weight:bold">boolean</span><span style="color:#bbb"> </span>result<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>admin.<span style="color:#008080">tableExists</span>(TableName.<span style="color:#008080">valueOf</span>(<span style="color:#d14">&#34;bigdata:person&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;table exists &#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>result);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>admin.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>connection.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åˆ›å»ºè¡¨">åˆ›å»ºè¡¨</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">createTable</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Configuration<span style="color:#bbb"> </span>configuration<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Configuration();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>configuration.<span style="color:#008080">set</span>(HConstants.<span style="color:#008080">ZOOKEEPER_QUORUM</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;centos161,centos162,centos163&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Connection<span style="color:#bbb"> </span>connection<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ConnectionFactory.<span style="color:#008080">createConnection</span>(configuration);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Admin<span style="color:#bbb"> </span>admin<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>connection.<span style="color:#008080">getAdmin</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>TableDescriptorBuilder<span style="color:#bbb"> </span>tableDescriptorBuilder<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>TableDescriptorBuilder.<span style="color:#008080">newBuilder</span>(TableName.<span style="color:#008080">valueOf</span>(<span style="color:#d14">&#34;bigdata&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;student&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>ColumnFamilyDescriptorBuilder<span style="color:#bbb"> </span>familyDescriptorBuilder<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ColumnFamilyDescriptorBuilder.<span style="color:#008080">newBuilder</span>(Bytes.<span style="color:#008080">toBytes</span>(<span style="color:#d14">&#34;info&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>familyDescriptorBuilder.<span style="color:#008080">setMaxVersions</span>(3);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>tableDescriptorBuilder.<span style="color:#008080">setColumnFamily</span>(familyDescriptorBuilder.<span style="color:#008080">build</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>admin.<span style="color:#008080">createTable</span>(tableDescriptorBuilder.<span style="color:#008080">build</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>admin.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>connection.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åˆ é™¤è¡¨">åˆ é™¤è¡¨</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">dropTable</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Configuration<span style="color:#bbb"> </span>configuration<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Configuration();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>configuration.<span style="color:#008080">set</span>(HConstants.<span style="color:#008080">ZOOKEEPER_QUORUM</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;centos161,centos162,centos163&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Connection<span style="color:#bbb"> </span>connection<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ConnectionFactory.<span style="color:#008080">createConnection</span>(configuration);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Admin<span style="color:#bbb"> </span>admin<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>connection.<span style="color:#008080">getAdmin</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>admin.<span style="color:#008080">disableTable</span>(TableName.<span style="color:#008080">valueOf</span>(<span style="color:#d14">&#34;bigdata&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;student&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>admin.<span style="color:#008080">deleteTable</span>(TableName.<span style="color:#008080">valueOf</span>(<span style="color:#d14">&#34;bigdata&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;student&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>admin.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>connection.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å‘è¡¨ä¸­æ’å…¥æ•°æ®">å‘è¡¨ä¸­æ’å…¥æ•°æ®</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">addData</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Configuration<span style="color:#bbb"> </span>configuration<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Configuration();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>configuration.<span style="color:#008080">set</span>(HConstants.<span style="color:#008080">ZOOKEEPER_QUORUM</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;centos161,centos162,centos163&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Connection<span style="color:#bbb"> </span>connection<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ConnectionFactory.<span style="color:#008080">createConnection</span>(configuration);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Table<span style="color:#bbb"> </span>stuTable<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>connection.<span style="color:#008080">getTable</span>(TableName.<span style="color:#008080">valueOf</span>(<span style="color:#d14">&#34;bigdata&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;student&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Put<span style="color:#bbb"> </span>put<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Put(Bytes.<span style="color:#008080">toBytes</span>(<span style="color:#d14">&#34;1001&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>put.<span style="color:#008080">addColumn</span>(Bytes.<span style="color:#008080">toBytes</span>(<span style="color:#d14">&#34;info&#34;</span>),<span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toBytes</span>(<span style="color:#d14">&#34;name&#34;</span>),<span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toBytes</span>(<span style="color:#d14">&#34;zhangsan&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>stuTable.<span style="color:#008080">put</span>(put);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>stuTable.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>connection.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="åˆ é™¤æ•°æ®">åˆ é™¤æ•°æ®</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">delData</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Configuration<span style="color:#bbb"> </span>configuration<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Configuration();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>configuration.<span style="color:#008080">set</span>(HConstants.<span style="color:#008080">ZOOKEEPER_QUORUM</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;centos161,centos162,centos163&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Connection<span style="color:#bbb"> </span>connection<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ConnectionFactory.<span style="color:#008080">createConnection</span>(configuration);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Table<span style="color:#bbb"> </span>stuTable<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>connection.<span style="color:#008080">getTable</span>(TableName.<span style="color:#008080">valueOf</span>(<span style="color:#d14">&#34;bigdata&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;student&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Delete<span style="color:#bbb"> </span>delete<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Delete(Bytes.<span style="color:#008080">toBytes</span>(<span style="color:#d14">&#34;1001&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>stuTable.<span style="color:#008080">delete</span>(delete);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>stuTable.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>connection.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ‰«ææ•°æ®">æ‰«ææ•°æ®</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">scanData</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Configuration<span style="color:#bbb"> </span>configuration<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Configuration();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>configuration.<span style="color:#008080">set</span>(HConstants.<span style="color:#008080">ZOOKEEPER_QUORUM</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;centos161,centos162,centos163&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Connection<span style="color:#bbb"> </span>connection<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ConnectionFactory.<span style="color:#008080">createConnection</span>(configuration);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Table<span style="color:#bbb"> </span>stuTable<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>connection.<span style="color:#008080">getTable</span>(TableName.<span style="color:#008080">valueOf</span>(<span style="color:#d14">&#34;bigdata&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;student&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Scan<span style="color:#bbb"> </span>scan<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Scan();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>ResultScanner<span style="color:#bbb"> </span>scanner<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>stuTable.<span style="color:#008080">getScanner</span>(scan);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(Result<span style="color:#bbb"> </span>result<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>scanner)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Cell<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>cells<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>result.<span style="color:#008080">rawCells</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(Cell<span style="color:#bbb"> </span>cell<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>cells)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;è¡Œé”®:&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toString</span>(CellUtil.<span style="color:#008080">cloneRow</span>(cell)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;åˆ—æ—:&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toString</span>(CellUtil.<span style="color:#008080">cloneFamily</span>(cell)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;åˆ—:&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toString</span>(CellUtil.<span style="color:#008080">cloneQualifier</span>(cell)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;å€¼:&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toString</span>(CellUtil.<span style="color:#008080">cloneValue</span>(cell)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>stuTable.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>connection.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è·å–æŸä¸€è¡Œæ•°æ®">è·å–æŸä¸€è¡Œæ•°æ®</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">getRow</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Configuration<span style="color:#bbb"> </span>configuration<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Configuration();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>configuration.<span style="color:#008080">set</span>(HConstants.<span style="color:#008080">ZOOKEEPER_QUORUM</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;centos161,centos162,centos163&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Connection<span style="color:#bbb"> </span>connection<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ConnectionFactory.<span style="color:#008080">createConnection</span>(configuration);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Table<span style="color:#bbb"> </span>stuTable<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>connection.<span style="color:#008080">getTable</span>(TableName.<span style="color:#008080">valueOf</span>(<span style="color:#d14">&#34;bigdata&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;student&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Get<span style="color:#bbb"> </span>get<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Get(Bytes.<span style="color:#008080">toBytes</span>(<span style="color:#d14">&#34;1001&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//è®¾ç½®è¯»å–æ‰€æœ‰ç‰ˆæœ¬</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//get.readAllVersions();</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//è®¾ç½®æ—¶é—´æˆ³</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">//get.setTimestamp()</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Result<span style="color:#bbb"> </span>result<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>stuTable.<span style="color:#008080">get</span>(get);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(Cell<span style="color:#bbb"> </span>cell<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>result.<span style="color:#008080">rawCells</span>())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;è¡Œé”®ï¼š&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toString</span>(result.<span style="color:#008080">getRow</span>()));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;åˆ—æ—ï¼š&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toString</span>(CellUtil.<span style="color:#008080">cloneFamily</span>(cell)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;åˆ—ï¼š&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toString</span>(CellUtil.<span style="color:#008080">cloneQualifier</span>(cell)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;å€¼ï¼š&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toString</span>(CellUtil.<span style="color:#008080">cloneValue</span>(cell)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;æ—¶é—´æˆ³ï¼š&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>cell.<span style="color:#008080">getTimestamp</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>stuTable.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>connection.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="è·å–æŸä¸€è¡ŒæŒ‡å®šåˆ—æ—åˆ—çš„æ•°æ®">è·å–æŸä¸€è¡ŒæŒ‡å®š&quot;åˆ—æ—:åˆ—&quot;çš„æ•°æ®</h3>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#3c5d5d;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">getRowQualifier</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Configuration<span style="color:#bbb"> </span>configuration<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Configuration();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>configuration.<span style="color:#008080">set</span>(HConstants.<span style="color:#008080">ZOOKEEPER_QUORUM</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;centos161,centos162,centos163&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Connection<span style="color:#bbb"> </span>connection<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ConnectionFactory.<span style="color:#008080">createConnection</span>(configuration);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Table<span style="color:#bbb"> </span>stuTable<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>connection.<span style="color:#008080">getTable</span>(TableName.<span style="color:#008080">valueOf</span>(<span style="color:#d14">&#34;bigdata&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;student&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Get<span style="color:#bbb"> </span>get<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Get(Bytes.<span style="color:#008080">toBytes</span>(<span style="color:#d14">&#34;1001&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>get.<span style="color:#008080">addColumn</span>(Bytes.<span style="color:#008080">toBytes</span>(<span style="color:#d14">&#34;info&#34;</span>),<span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toBytes</span>(<span style="color:#d14">&#34;name&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Result<span style="color:#bbb"> </span>result<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>stuTable.<span style="color:#008080">get</span>(get);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(Cell<span style="color:#bbb"> </span>cell<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>result.<span style="color:#008080">rawCells</span>())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;è¡Œé”®ï¼š&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toString</span>(result.<span style="color:#008080">getRow</span>()));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;åˆ—æ—ï¼š&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toString</span>(CellUtil.<span style="color:#008080">cloneFamily</span>(cell)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;åˆ—ï¼š&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toString</span>(CellUtil.<span style="color:#008080">cloneQualifier</span>(cell)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;å€¼ï¼š&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toString</span>(CellUtil.<span style="color:#008080">cloneValue</span>(cell)));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;æ—¶é—´æˆ³ï¼š&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>cell.<span style="color:#008080">getTimestamp</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>stuTable.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>connection.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="äº”æ‰©å±•ä¼˜åŒ–">äº”ã€æ‰©å±•ä¼˜åŒ–</h2>
<h3 id="hbase-apiä¸mräº¤äº’">HBase APIä¸MRäº¤äº’</h3>
<p>é€šè¿‡HBaseçš„ç›¸å…³JavaAPIï¼Œæˆ‘ä»¬å¯ä»¥å®ç°ä¼´éšHBaseæ“ä½œMapReduceè¿‡ç¨‹ï¼Œæ¯”å¦‚ä½¿ç”¨MapReduceå°†æ•°æ®ä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå¯¼å…¥åˆ°HBase çš„è¡¨ä¸­ï¼Œæ¯”å¦‚æˆ‘ä»¬ä»HBaseä¸­è¯»å–ä¸€äº›åŸå§‹æ•°æ®åä½¿ç”¨MapReduceåšæ•°æ®åˆ†æã€‚</p>
<h4 id="é…ç½®ç¯å¢ƒå˜é‡è¿è¡Œå®˜æ–¹æ¡ˆä¾‹"><strong>é…ç½®ç¯å¢ƒå˜é‡&amp;è¿è¡Œå®˜æ–¹æ¡ˆä¾‹</strong></h4>
<p><strong>ä¸´æ—¶é…ç½®</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#0086b3">export</span> <span style="color:#008080">HBASE_HOME</span><span style="color:#000;font-weight:bold">=</span>/opt/module/hbase
</span></span><span style="display:flex;"><span><span style="color:#0086b3">export</span> <span style="color:#008080">HADOOP_HOME</span><span style="color:#000;font-weight:bold">=</span>/opt/module/hadoop
</span></span><span style="display:flex;"><span><span style="color:#0086b3">export</span> <span style="color:#008080">HADOOP_CLASSPATH</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">`</span><span style="color:#d14">${</span><span style="color:#008080">HBASE_HOME</span><span style="color:#d14">}</span>/bin/hbase mapredcp<span style="color:#d14">`</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>æ°¸ä¹…é…ç½®</strong></p>
<p>é…ç½®<code>/etc/profile</code></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#0086b3">export</span> <span style="color:#008080">HBASE_HOME</span><span style="color:#000;font-weight:bold">=</span>/opt/module/hbase
</span></span><span style="display:flex;"><span><span style="color:#0086b3">export</span> <span style="color:#008080">HADOOP_HOME</span><span style="color:#000;font-weight:bold">=</span>/opt/module/hadoop
</span></span></code></pre></td></tr></table>
</div>
</div><p>é…ç½®<code>hadoop-env.sh</code>ï¼ˆæ³¨æ„ï¼šåœ¨ for å¾ªç¯ä¹‹åé…ï¼‰</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#0086b3">export</span> <span style="color:#008080">HADOOP_CLASSPATH</span><span style="color:#000;font-weight:bold">=</span><span style="color:#008080">$HADOOP_CLASSPATH</span>:/opt/module/hbase/lib/*
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="è¿è¡Œå®˜æ–¹æ¡ˆä¾‹">è¿è¡Œå®˜æ–¹æ¡ˆä¾‹</h4>
<p><strong>æµ‹è¯•è¿è¡Œå®˜æ–¹çš„MapReduceä»»åŠ¡ç»Ÿè®¡è¡Œæ•°</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>yarn jar lib/hbase-mapreduce-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar rowcounter <span style="color:#d14">&#34;bigdata:person&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä½¿ç”¨ MapReduceå°†æœ¬åœ°æ•°æ®å¯¼å…¥åˆ°HBase</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase"># åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ª tsv æ ¼å¼çš„æ–‡ä»¶ï¼šfruit.tsv
# 1001	Apple	Red
# 1002	Pear	Yellow
# 1003	Pineapple Yellow

# HBase shellæ‰§è¡Œ
create &#39;fruit&#39;,&#39;info&#39;

hdfs dfs -mkdir /input_fruit
hdfs dfs -put fruit.tsv /input_fruit

yarn jar lib/hbase-mapreduce-[version].jar importtsv \
-Dimporttsv.columns=HBASE_ROW_KEY,info:name,info:color fruit hdfs://centos161:9000/input_fruit

scan &#39;fruit&#39;
</code></pre><h4 id="è‡ªå®šä¹‰">è‡ªå®šä¹‰</h4>
<p>å®ç°ä»HDFSè¯»å–æ•°æ®é€å…¥HBase</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">99
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">FruitMapper</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">extends</span><span style="color:#bbb"> </span>Mapper<span style="color:#000;font-weight:bold">&lt;</span>LongWritable,<span style="color:#bbb"> </span>Text,<span style="color:#bbb"> </span>LongWritable,<span style="color:#bbb"> </span>Text<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">protected</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">map</span>(LongWritable<span style="color:#bbb"> </span>key,<span style="color:#bbb"> </span>Text<span style="color:#bbb"> </span>value,<span style="color:#bbb"> </span>Context<span style="color:#bbb"> </span>context)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException,<span style="color:#bbb"> </span>InterruptedException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>context.<span style="color:#008080">write</span>(key,<span style="color:#bbb"> </span>value);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">FruitReducer</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">extends</span><span style="color:#bbb"> </span>TableReducer<span style="color:#000;font-weight:bold">&lt;</span>LongWritable,<span style="color:#bbb"> </span>Text,<span style="color:#bbb"> </span>NullWritable<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>inputColumnFamilyColumnNamesArg;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span>List<span style="color:#000;font-weight:bold">&lt;</span>ColumnFamilyColumnName<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>columnFamilyColumnNames<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>ArrayList<span style="color:#000;font-weight:bold">&lt;&gt;</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">protected</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">setup</span>(Context<span style="color:#bbb"> </span>context)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException,<span style="color:#bbb"> </span>InterruptedException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Configuration<span style="color:#bbb"> </span>configuration<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>context.<span style="color:#008080">getConfiguration</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">this</span>.<span style="color:#008080">inputColumnFamilyColumnNamesArg</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>configuration.<span style="color:#008080">get</span>(<span style="color:#d14">&#34;columnFamily-columnName&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>String<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>inputColumnFamilyColumnNamesArgArray<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>inputColumnFamilyColumnNamesArg.<span style="color:#008080">split</span>(<span style="color:#d14">&#34;,&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(String<span style="color:#bbb"> </span>item<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>inputColumnFamilyColumnNamesArgArray)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>String<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>columnFamilyColumnName<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>item.<span style="color:#008080">split</span>(<span style="color:#d14">&#34;:&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>columnFamilyColumnNames.<span style="color:#008080">add</span>(<span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>ColumnFamilyColumnName(columnFamilyColumnName<span style="color:#000;font-weight:bold">[</span>0<span style="color:#000;font-weight:bold">]</span>,<span style="color:#bbb"> </span>columnFamilyColumnName<span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(ColumnFamilyColumnName<span style="color:#bbb"> </span>columnFamilyColumnName<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>columnFamilyColumnNames)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;family: &#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>columnFamilyColumnName.<span style="color:#008080">getFamily</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;column: &#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>columnFamilyColumnName.<span style="color:#008080">getColumnName</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">protected</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">reduce</span>(LongWritable<span style="color:#bbb"> </span>key,<span style="color:#bbb"> </span>Iterable<span style="color:#000;font-weight:bold">&lt;</span>Text<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span>values,<span style="color:#bbb"> </span>Context<span style="color:#bbb"> </span>context)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException,<span style="color:#bbb"> </span>InterruptedException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(Text<span style="color:#bbb"> </span>value<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>values)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>String<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>fields<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>value.<span style="color:#008080">toString</span>().<span style="color:#008080">split</span>(<span style="color:#d14">&#34;\t&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(<span style="color:#d14">&#34;length :&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">+</span><span style="color:#bbb"> </span>fields.<span style="color:#008080">length</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>Put<span style="color:#bbb"> </span>put<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Put(Bytes.<span style="color:#008080">toBytes</span>(fields<span style="color:#000;font-weight:bold">[</span>0<span style="color:#000;font-weight:bold">]</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>fieldIndex<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>1;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">for</span><span style="color:#bbb"> </span>(ColumnFamilyColumnName<span style="color:#bbb"> </span>columnFamilyColumnName<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span>columnFamilyColumnNames)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">if</span><span style="color:#bbb"> </span>(fieldIndex<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&lt;</span><span style="color:#bbb"> </span>fields.<span style="color:#008080">length</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&amp;&amp;</span><span style="color:#bbb"> </span>fieldIndex<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&lt;=</span><span style="color:#bbb"> </span>columnFamilyColumnNames.<span style="color:#008080">size</span>())<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">          </span>System.<span style="color:#008080">out</span>.<span style="color:#008080">println</span>(fields<span style="color:#000;font-weight:bold">[</span>fieldIndex<span style="color:#000;font-weight:bold">]</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">          </span>put.<span style="color:#008080">addColumn</span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>Bytes.<span style="color:#008080">toBytes</span>(columnFamilyColumnName.<span style="color:#008080">getFamily</span>()),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>Bytes.<span style="color:#008080">toBytes</span>(columnFamilyColumnName.<span style="color:#008080">getColumnName</span>()),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">            </span>Bytes.<span style="color:#008080">toBytes</span>(fields<span style="color:#000;font-weight:bold">[</span>fieldIndex<span style="color:#000;font-weight:bold">]</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">        </span>fieldIndex<span style="color:#000;font-weight:bold">++</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">      </span>context.<span style="color:#008080">write</span>(NullWritable.<span style="color:#008080">get</span>(),<span style="color:#bbb"> </span>put);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Data</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@AllArgsConstructor</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">ColumnFamilyColumnName</span><span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>family;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span>String<span style="color:#bbb"> </span>columnName;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">class</span> <span style="color:#458;font-weight:bold">FruitDriver</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">implements</span><span style="color:#bbb"> </span>Tool<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">private</span><span style="color:#bbb"> </span>Configuration<span style="color:#bbb"> </span>configuration;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">run</span>(String<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>args)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>Exception<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic">// 1.è·å–Jobå¯¹è±¡</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Job<span style="color:#bbb"> </span>job<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>Job.<span style="color:#008080">getInstance</span>(configuration);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic">// 2.è·å–é©±åŠ¨ç±»è·¯å¾„</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>job.<span style="color:#008080">setJarByClass</span>(FruitDriver.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic">// 3.è®¾ç½®Mapper&amp;Mapperè¾“å‡ºç±»å‹</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>job.<span style="color:#008080">setMapperClass</span>(FruitMapper.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>job.<span style="color:#008080">setMapOutputKeyClass</span>(LongWritable.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>job.<span style="color:#008080">setMapOutputValueClass</span>(Text.<span style="color:#008080">class</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic">// 4.è®¾ç½®Reducer</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>TableMapReduceUtil.<span style="color:#008080">initTableReducerJob</span>(<span style="color:#d14">&#34;bigdata:student&#34;</span>,<span style="color:#bbb"> </span>FruitReducer.<span style="color:#008080">class</span>,<span style="color:#bbb"> </span>job);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic">// 5.è®¾ç½®è¾“å…¥è·¯å¾„</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>FileInputFormat.<span style="color:#008080">setInputPaths</span>(job,<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Path(<span style="color:#d14">&#34;hdfs://192.168.22.161:9000/data&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic">// 6.æäº¤ä»»åŠ¡</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>job.<span style="color:#008080">submit</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span>job.<span style="color:#008080">waitForCompletion</span>(<span style="color:#000;font-weight:bold">true</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">?</span><span style="color:#bbb"> </span>0<span style="color:#bbb"> </span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">-</span>1;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">setConf</span>(Configuration<span style="color:#bbb"> </span>conf)<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>configuration<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>conf;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#3c5d5d;font-weight:bold">@Override</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span>Configuration<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">getConf</span>()<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">return</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">this</span>.<span style="color:#008080">configuration</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">static</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">main</span>(String<span style="color:#000;font-weight:bold">[]</span><span style="color:#bbb"> </span>args)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>Exception<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>Configuration<span style="color:#bbb"> </span>configuration<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Configuration();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>configuration.<span style="color:#008080">set</span>(<span style="color:#d14">&#34;fs.defaultFS&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;hdfs://192.168.22.161:9000&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>configuration.<span style="color:#008080">set</span>(<span style="color:#d14">&#34;columnFamily-columnName&#34;</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;info:name,info:sex&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>configuration.<span style="color:#008080">set</span>(HConstants.<span style="color:#008080">ZOOKEEPER_QUORUM</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;centos161,centos162,centos163&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span><span style="color:#458;font-weight:bold">int</span><span style="color:#bbb"> </span>res<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ToolRunner.<span style="color:#008080">run</span>(configuration,<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>FruitDriver(),<span style="color:#bbb"> </span>args);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>System.<span style="color:#008080">exit</span>(res);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>}<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="hbase-apiä¸hiveå¯¹æ¥">HBase APIä¸Hiveå¯¹æ¥</h3>
<blockquote>
<p>hiveçš„libä¸‹çš„hive-hbase-handler-[version].jarå¯èƒ½ä¸å…¼å®¹ï¼Œå¦‚æœæœ‰é—®é¢˜éœ€è¦é‡æ–°ç¼–è¯‘</p>
</blockquote>
<h4 id="ç¯å¢ƒå‡†å¤‡">ç¯å¢ƒå‡†å¤‡</h4>
<p>é¦–å…ˆé…ç½®å¥½HBASE_HOMEï¼ŒHIVE_HOMEï¼Œç„¶åå»ºç«‹è½¯é“¾æ¥</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>ln -s <span style="color:#008080">$HBASE_HOME</span>/lib/hbase-common-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar <span style="color:#008080">$HIVE_HOME</span>/lib/hbase-common-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar
</span></span><span style="display:flex;"><span>ln -s <span style="color:#008080">$HBASE_HOME</span>/lib/hbase-server-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar <span style="color:#008080">$HIVE_HOME</span>/lib/hbase- server-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar
</span></span><span style="display:flex;"><span>ln -s <span style="color:#008080">$HBASE_HOME</span>/lib/hbase-client-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar <span style="color:#008080">$HIVE_HOME</span>/lib/hbase-client-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar
</span></span><span style="display:flex;"><span>ln -s <span style="color:#008080">$HBASE_HOME</span>/lib/hbase-protocol-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar <span style="color:#008080">$HIVE_HOME</span>/lib/hbase-protocol-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar
</span></span><span style="display:flex;"><span>ln -s <span style="color:#008080">$HBASE_HOME</span>/lib/hbase-it-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar <span style="color:#008080">$HIVE_HOME</span>/lib/hbase-it-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar
</span></span><span style="display:flex;"><span>ln -s <span style="color:#008080">$HBASE_HOME</span>/lib/hbase-hadoop2-compat-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar <span style="color:#008080">$HIVE_HOME</span>/lib/hbase-hadoop2-compat-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar
</span></span><span style="display:flex;"><span>ln -s <span style="color:#008080">$HBASE_HOME</span>/lib/hbase-hadoop-compat-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar <span style="color:#008080">$HIVE_HOME</span>/lib/hbase-hadoop-compat-<span style="color:#000;font-weight:bold">[</span>version<span style="color:#000;font-weight:bold">]</span>.jar
</span></span></code></pre></td></tr></table>
</div>
</div><p>é…ç½®<code>hive-site.xml </code></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hive.zookeeper.quorum<span style="color:#000080">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>centos161,centos162,centos163<span style="color:#000080">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hive.zookeeper.client.port<span style="color:#000080">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>2181<span style="color:#000080">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="æ¡ˆä¾‹">æ¡ˆä¾‹</h4>
<p><strong>å»ºç«‹Hiveè¡¨å¹¶å…³è”HBaseè¡¨ï¼Œæ’å…¥æ•°æ®åˆ°Hiveè¡¨çš„åŒæ—¶èƒ½å¤Ÿå½±å“HBaseè¡¨</strong></p>
<p>â‘ ã€åˆ›å»ºå…³è”è¡¨</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span>hive_hbase_emp_table(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>empno<span style="color:#bbb"> </span><span style="color:#0086b3">int</span>,<span style="color:#bbb"> </span>ename<span style="color:#bbb"> </span>string,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>job<span style="color:#bbb"> </span>string,<span style="color:#bbb"> </span>mgr<span style="color:#bbb"> </span><span style="color:#0086b3">int</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>hiredate<span style="color:#bbb"> </span>string,<span style="color:#bbb"> </span>sal<span style="color:#bbb"> </span>double,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>comm<span style="color:#bbb"> </span>double,<span style="color:#bbb"> </span>deptno<span style="color:#bbb"> </span><span style="color:#0086b3">int</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>STORED<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">BY</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;org.apache.hadoop.hive.hbase.HBaseStorageHandler&#39;</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">WITH</span><span style="color:#bbb"> </span>SERDEPROPERTIES<span style="color:#bbb"> </span>(<span style="color:#d14">&#34;hbase.columns.mapping&#34;</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;:key,info:ename,info:job,info:mgr,info:hiredate,info:sal,info:comm,info:deptno&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>TBLPROPERTIES<span style="color:#bbb"> </span>(<span style="color:#d14">&#34;hbase.table.name&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#d14">&#34;hbase_emp_table&#34;</span>);<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>å®Œæˆä¹‹åï¼Œå¯ä»¥åˆ†åˆ«è¿›å…¥ Hive å’Œ HBase æŸ¥çœ‹ï¼Œéƒ½ç”Ÿæˆäº†å¯¹åº”çš„è¡¨</p>
</blockquote>
<p>â‘¡ã€åœ¨Hiveä¸­åˆ›å»ºä¸´æ—¶ä¸­é—´è¡¨ï¼Œç”¨äºloadæ–‡ä»¶ä¸­çš„æ•°æ®</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span>emp(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>empno<span style="color:#bbb"> </span><span style="color:#0086b3">int</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>ename<span style="color:#bbb"> </span>string,<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>job<span style="color:#bbb"> </span>string,<span style="color:#bbb"> </span>mgr<span style="color:#bbb"> </span><span style="color:#0086b3">int</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>hiredate<span style="color:#bbb"> </span>string,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>sal<span style="color:#bbb"> </span>double,<span style="color:#bbb"> </span>comm<span style="color:#bbb"> </span>double,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>deptno<span style="color:#bbb"> </span><span style="color:#0086b3">int</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">row</span><span style="color:#bbb"> </span>format<span style="color:#bbb"> </span>delimited<span style="color:#bbb"> </span>fields<span style="color:#bbb"> </span>terminated<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">by</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;\t&#39;</span>;<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>â‘¢ã€å‘Hiveä¸­é—´è¡¨ä¸­loadæ•°æ®</p>
<pre tabindex="0"><code class="language-hive" data-lang="hive">load data local inpath &#39;/opt/module/hive/input/emp.txt&#39; into table emp;
</code></pre><p>â‘£ã€é€šè¿‡insertå‘½ä»¤å°†ä¸­é—´è¡¨ä¸­çš„æ•°æ®å¯¼å…¥åˆ°Hiveå…³è”Hbaseçš„é‚£å¼ è¡¨ä¸­</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">insert</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">into</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">table</span><span style="color:#bbb"> </span>hive_hbase_emp_table<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb"> </span>emp;<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>â‘¤ã€æŸ¥çœ‹Hiveä»¥åŠå…³è”çš„HBaseè¡¨ä¸­æ˜¯å¦å·²ç»æˆåŠŸçš„åŒæ­¥æ’å…¥äº†æ•°æ®</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>hive:  select * from hive_hbase_emp_table;
</span></span><span style="display:flex;"><span>Hbase: scan &#39;hbase_emp_table&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>HIVEä½¿ç”¨å¤–éƒ¨è¡¨ï¼Œç›´æ¥å…³è”HBASE</strong></p>
<p>â‘ ã€åˆ›å»ºå…³è”è¡¨</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">EXTERNAL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span>relevance_hbase_emp(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>empno<span style="color:#bbb"> </span><span style="color:#0086b3">int</span>,<span style="color:#bbb"> </span>ename<span style="color:#bbb"> </span>string,<span style="color:#bbb"> </span>job<span style="color:#bbb"> </span>string,<span style="color:#bbb"> </span>mgr<span style="color:#bbb"> </span><span style="color:#0086b3">int</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>hiredate<span style="color:#bbb"> </span>string,<span style="color:#bbb"> </span>sal<span style="color:#bbb"> </span>double,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>comm<span style="color:#bbb"> </span>double,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>deptno<span style="color:#bbb"> </span><span style="color:#0086b3">int</span>)<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>STORED<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">BY</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;org.apache.hadoop.hive.hbase.HBaseStorageHandler&#39;</span><span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">WITH</span><span style="color:#bbb"> </span>SERDEPROPERTIES<span style="color:#bbb"> </span>(<span style="color:#d14">&#34;hbase.columns.mapping&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#d14">&#34;:key,info:ename,info:job,info:mgr,info:hiredate,info:sal,info:co mm,info:deptno&#34;</span>)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>TBLPROPERTIES<span style="color:#bbb"> </span>(<span style="color:#d14">&#34;hbase.table.name&#34;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#d14">&#34;hbase_emp_table&#34;</span>);<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>â‘¡ã€ å…³è”åå°±å¯ä»¥ä½¿ç”¨Hiveå‡½æ•°è¿›è¡Œä¸€äº›åˆ†ææ“ä½œäº†</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">count</span>(<span style="color:#000;font-weight:bold">*</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb"> </span>relevance_hbase_emp;<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="hbaseä¼˜åŒ–">HBaseä¼˜åŒ–</h3>
<h4 id="masteré«˜å¯ç”¨">Masteré«˜å¯ç”¨</h4>
<ol>
<li>
<p>å…³é—­HBaseé›†ç¾¤ï¼ˆå¦‚æœæ²¡æœ‰å¼€å¯åˆ™è·³è¿‡æ­¤æ­¥ï¼‰</p>
</li>
<li>
<p>åœ¨confç›®å½•ä¸‹åˆ›å»ºbackup-masters</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>touch conf/backup-masters
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>åœ¨backup-mastersæ–‡ä»¶ä¸­é…ç½®é«˜å¯ç”¨HMasterèŠ‚ç‚¹</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span><span style="color:#0086b3">echo</span> centos161 &gt;&gt; conf/backup-masters
</span></span><span style="display:flex;"><span><span style="color:#0086b3">echo</span> centos162 &gt;&gt; conf/backup-masters
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>å°†æ•´ä¸ªconfç›®å½•scpåˆ°å…¶ä»–èŠ‚ç‚¹</p>
</li>
<li>
<p>æ‰“å¼€é¡µé¢æµ‹è¯•æŸ¥çœ‹<code>http://192.168.22.161:16010</code></p>
</li>
</ol>
<h4 id="é¢„åˆ†åŒº">é¢„åˆ†åŒº</h4>
<p>â€‹	æ¯ä¸€ä¸ªregionç»´æŠ¤ç€StartRowä¸EndRowï¼Œå¦‚æœåŠ å…¥çš„æ•°æ®ç¬¦åˆæŸä¸ªRegionç»´æŠ¤çš„RowKey èŒƒå›´ï¼Œåˆ™è¯¥æ•°æ®äº¤ç»™è¿™ä¸ªRegionç»´æŠ¤ã€‚é‚£ä¹ˆä¾ç…§è¿™ä¸ªåŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•°æ®æ‰€è¦æŠ•æ”¾çš„åˆ†åŒºæå‰å¤§è‡´çš„è§„åˆ’å¥½ï¼Œä»¥æé«˜HBaseæ€§èƒ½ã€‚</p>
<blockquote>
<p>é¢„åˆ†åŒºè®¾ç½®å®Œæˆä»¥åè‡ªåŠ¨åˆ‡åˆ†è§„åˆ™ä¾ç„¶æœ‰æ•ˆï¼Œæœ€å¥½é¢„ä¼°æ¯ä¸ªRegionServerä¸Šæ”¾2~3ä¸ªRegionæ¥ä¿è¯æ€§èƒ½</p>
</blockquote>
<p><strong>æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨è®¾ç½®é¢„åˆ†åŒº</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase">create	&#39;staff&#39;,&#39;info&#39;,&#39;partition&#39;,SPLITS	=&gt; [&#39;1000&#39;,&#39;2000&#39;,&#39;3000&#39;,&#39;4000&#39;]
</code></pre><p><strong>æ–¹å¼äºŒï¼šç”Ÿæˆ 16 è¿›åˆ¶åºåˆ—é¢„åˆ†åŒº</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase">create &#39;staff&#39;,&#39;info&#39;,&#39;partition&#39;,{NUMREGIONS =&gt; 15, SPLITALGO =&gt; &#39;HexStringSplit&#39;}
</code></pre><p><strong>æ–¹å¼ä¸‰ï¼šæŒ‰ç…§æ–‡ä»¶ä¸­è®¾ç½®çš„è§„åˆ™é¢„åˆ†åŒº</strong></p>
<pre tabindex="0"><code class="language-hbase" data-lang="hbase"># åˆ›å»º splits.txt æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š
# aaaa
# bbbb
# cccc
# dddd

create &#39;staff&#39;,&#39;partition&#39;,SPLITS_FILE =&gt; &#39;splits.txt&#39;
</code></pre><p><strong>æ–¹å¼å››ï¼šä½¿ç”¨JavaAPIåˆ›å»ºé¢„åˆ†åŒº</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#998;font-style:italic">/**
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  * é¢„åˆ†åŒº
</span></span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">  */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#3c5d5d;font-weight:bold">@Test</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">public</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">void</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">preSplit</span>()<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">throws</span><span style="color:#bbb"> </span>IOException<span style="color:#bbb"> </span>{<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Configuration<span style="color:#bbb"> </span>configuration<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span>Configuration();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>configuration.<span style="color:#008080">set</span>(HConstants.<span style="color:#008080">ZOOKEEPER_QUORUM</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;centos161,centos162,centos163&#34;</span>);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Connection<span style="color:#bbb"> </span>connection<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ConnectionFactory.<span style="color:#008080">createConnection</span>(configuration);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>Admin<span style="color:#bbb"> </span>admin<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>connection.<span style="color:#008080">getAdmin</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span><span style="color:#458;font-weight:bold">byte</span><span style="color:#000;font-weight:bold">[][]</span><span style="color:#bbb"> </span>splitKeys<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">new</span><span style="color:#bbb"> </span><span style="color:#458;font-weight:bold">byte</span><span style="color:#000;font-weight:bold">[][]</span>{Bytes.<span style="color:#008080">toBytes</span>(<span style="color:#d14">&#34;30000&#34;</span>),<span style="color:#bbb"> </span>Bytes.<span style="color:#008080">toBytes</span>(<span style="color:#d14">&#34;60000&#34;</span>)};<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>TableDescriptorBuilder<span style="color:#bbb"> </span>tableDescriptorBuilder<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>TableDescriptorBuilder.<span style="color:#008080">newBuilder</span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">    </span>TableName.<span style="color:#008080">valueOf</span>(NamespaceDescriptor.<span style="color:#008080">DEFAULT_NAMESPACE_NAME_STR</span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34;staff&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>ColumnFamilyDescriptorBuilder<span style="color:#bbb"> </span>familyDescriptorBuilder<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>ColumnFamilyDescriptorBuilder.<span style="color:#008080">newBuilder</span>(Bytes.<span style="color:#008080">toBytes</span>(<span style="color:#d14">&#34;info&#34;</span>));<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>tableDescriptorBuilder.<span style="color:#008080">setColumnFamily</span>(familyDescriptorBuilder.<span style="color:#008080">build</span>());<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>admin.<span style="color:#008080">createTable</span>(tableDescriptorBuilder.<span style="color:#008080">build</span>(),<span style="color:#bbb"> </span>splitKeys);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>admin.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb">  </span>connection.<span style="color:#008080">close</span>();<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span><span style="color:#bbb"></span>}<span style="color:#bbb">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="rowkeyè®¾è®¡åŸåˆ™">RowKeyè®¾è®¡åŸåˆ™</h4>
<p>RowKeyè¦å…·æœ‰å”¯ä¸€æ€§ï¼Œæ•£åˆ—æ€§ï¼Œé•¿åº¦åŸåˆ™ã€å°½é‡é•¿ã€‘</p>
<p>ä¸¾ä¾‹åœºæ™¯ï¼š</p>
<p>æ•°æ®ï¼šä¸»å«æ‰‹æœº-&gt;è¢«å«æ‰‹æœº  æ—¶é—´  æ—¶é•¿</p>
<p>ä¸šåŠ¡ï¼šç”¨æ‰‹æœºå·æŸ¥è¯¢æœˆä»½è¯¦æƒ…</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>æ•°æ®ï¼š
</span></span><span style="display:flex;"><span>15712904478-&gt;13269081322 2020-10-28 11:24:10 500
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>rowkeyè®¾è®¡ï¼Œå¦‚æœæ•°æ®é‡3000Gæ•°æ®é¢„è®¡åˆ’åˆ†300ä¸ªåŒº
</span></span><span style="display:flex;"><span>rowKyeç¬¬ä¸€éƒ¨åˆ†ï¼šæ‰‹æœºå·%300
</span></span><span style="display:flex;"><span>rowKyeç¬¬äºŒéƒ¨åˆ†ï¼šæ‰‹æœºå·
</span></span><span style="display:flex;"><span>rowKyeç¬¬ä¸‰éƒ¨åˆ†ï¼šæ—¶é—´
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>001_15712904478_2020-10-28 11:24:10
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>æŸ¥è¯¢2æœˆä»½è´¦å•
</span></span><span style="display:flex;"><span>ROWSTART: 001_15712904478_2020-02
</span></span><span style="display:flex;"><span>ROWEND:   001_15712904478_2020-03
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="å†…å­˜ä¼˜åŒ–åŸºç¡€ä¼˜åŒ–">å†…å­˜ä¼˜åŒ–&amp;åŸºç¡€ä¼˜åŒ–</h4>
<p><strong>å†…å­˜ä¼˜åŒ–</strong></p>
<p>â€‹	HBaseæ“ä½œè¿‡ç¨‹ä¸­éœ€è¦å¤§é‡çš„å†…å­˜å¼€é”€ï¼Œæ¯•ç«ŸTableæ˜¯å¯ä»¥ç¼“å­˜åœ¨å†…å­˜ä¸­çš„ï¼Œä¸€èˆ¬ä¼šåˆ†é…æ•´ä¸ªå¯ç”¨å†…å­˜çš„70%ç»™HBaseçš„Java å †ã€‚ä½†æ˜¯<span style="color:red">ä¸å»ºè®®åˆ†é…éå¸¸å¤§çš„å †å†…å­˜</span>ï¼Œå› ä¸ºGCè¿‡ç¨‹æŒç»­å¤ªä¹…ä¼šå¯¼è‡´RegionServerå¤„äºé•¿æœŸä¸å¯ç”¨çŠ¶æ€ï¼Œä¸€èˆ¬16~48Gå†…å­˜å°±å¯ä»¥äº†ï¼Œå¦‚æœå› ä¸ºæ¡†æ¶å ç”¨å†…å­˜è¿‡é«˜å¯¼è‡´ç³»ç»Ÿå†…å­˜ä¸è¶³ï¼Œæ¡†æ¶ä¸€æ ·ä¼šè¢«ç³»ç»ŸæœåŠ¡æ‹–æ­»ã€‚</p>
<p><strong>ä¼˜åŒ–DataNodeå…è®¸çš„æœ€å¤§æ–‡ä»¶æ‰“å¼€æ•°</strong></p>
<p>é…ç½®hdfs-site.xml</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- HBaseä¸€èˆ¬éƒ½ä¼šåŒä¸€æ—¶é—´æ“ä½œå¤§é‡çš„æ–‡ä»¶ï¼Œæ ¹æ®é›†ç¾¤çš„æ•°é‡å’Œè§„æ¨¡ä»¥åŠæ•°æ®åŠ¨ä½œè®¾ç½®ä¸º4096æˆ–è€…æ›´é«˜ã€‚é»˜è®¤å€¼ï¼š4096 --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>dfs.datanode.max.transfer.threads<span style="color:#000080">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>4096<span style="color:#000080">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä¼˜åŒ–å»¶è¿Ÿé«˜çš„æ•°æ®æ“ä½œçš„ç­‰å¾…æ—¶é—´</strong></p>
<p>é…ç½®hdfs-site.xml</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- å¦‚æœå¯¹äºæŸä¸€æ¬¡æ•°æ®æ“ä½œæ¥è®²ï¼Œå»¶è¿Ÿéå¸¸é«˜ï¼Œsocket éœ€è¦ç­‰å¾…æ›´é•¿çš„æ—¶é—´ï¼Œå»ºè®®æŠŠè¯¥å€¼è®¾ç½®ä¸ºæ›´å¤§çš„å€¼ï¼ˆé»˜è®¤ 60000 æ¯«ç§’ï¼‰ --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>dfs.image.transfer.timeout<span style="color:#000080">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>60000<span style="color:#000080">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä¼˜åŒ–æ•°æ®çš„å†™å…¥æ•ˆç‡</strong></p>
<p>é…ç½®mapred-site.xml</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- å¦‚æœå¯¹äºæŸä¸€æ¬¡æ•°æ®æ“ä½œæ¥è®²ï¼Œå»¶è¿Ÿéå¸¸é«˜ï¼Œsocket éœ€è¦ç­‰å¾…æ›´é•¿çš„æ—¶é—´ï¼Œå»ºè®®æŠŠè¯¥å€¼è®¾ç½®ä¸ºæ›´å¤§çš„å€¼ï¼ˆé»˜è®¤ 60000 æ¯«ç§’ï¼‰ --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>mapreduce.map.output.compress<span style="color:#000080">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>false<span style="color:#000080">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- å¯è®¾ç½®å‹ç¼©æ–¹å¼ä¸º org.apache.hadoop.io.compress.GzipCodecï¼Œé»˜è®¤ DefaultCodec--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>mapreduce.map.output.compress.codec<span style="color:#000080">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>org.apache.hadoop.io.compress.DefaultCodec	<span style="color:#000080">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>è®¾ç½®RPCç›‘å¬æ•°é‡</strong></p>
<p>é…ç½®hbase-site.xml</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- regionServerç«¯é»˜è®¤å¼€å¯çš„RPCç›‘æ§å®ä¾‹æ•°ï¼Œä¹Ÿå³RegionServerèƒ½å¤Ÿå¤„ç†çš„IOè¯·æ±‚çº¿ç¨‹æ•°ï¼Œé»˜è®¤30 --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.regionserver.handler.count<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>30<span style="color:#000080">&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>  
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä¼˜åŒ–HStoreæ–‡ä»¶å¤§å°</strong></p>
<p>é…ç½®hbase-site.xml</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!--HStoreFileæœ€å¤§çš„å¤§å°ï¼Œå½“æŸä¸ªregionçš„æŸä¸ªåˆ—æ—è¶…è¿‡è¿™ä¸ªå¤§å°ä¼šè¿›è¡Œregionæ‹†åˆ†ï¼Œé»˜è®¤10G --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.hregion.max.filesize<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>10737418240<span style="color:#000080">&lt;/value&gt;</span>   
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span> 
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä¼˜åŒ– HBase å®¢æˆ·ç«¯ç¼“å­˜</strong></p>
<p>é…ç½®hbase-site.xml</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- hbaseå®¢æˆ·ç«¯æ¯æ¬¡å†™ç¼“å†²çš„å¤§å°(ä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯æ‰¹é‡æäº¤åˆ°serverç«¯)ï¼Œè¿™å—å¤§å°ä¼šåŒæ—¶å ç”¨å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ï¼Œç¼“å†²åŒºæ›´å¤§å¯ä»¥å‡å°‘RPCæ¬¡æ•°ï¼Œä½†æ˜¯æ›´å¤§æ„å‘³ç€å†…å­˜å ç”¨æ›´å¤šï¼Œé»˜è®¤2M --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.client.write.buffer<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>2097152<span style="color:#000080">&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>  
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>æŒ‡å®šscan.next æ‰«æHBaseæ‰€è·å–çš„è¡Œæ•°</strong></p>
<p>é…ç½®hbase-site.xml</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- åœ¨æ‰§è¡Œhbase scanæ“ä½œçš„æ—¶å€™ï¼Œå®¢æˆ·ç«¯ç¼“å­˜çš„è¡Œæ•°ï¼Œè®¾ç½®å°æ„å‘³ç€æ›´å¤šçš„rpcæ¬¡æ•°ï¼Œè®¾ç½®å¤§æ¯”è¾ƒåƒå†…å­˜ --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.client.scanner.caching<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;</span>2147483647<span style="color:#000080">&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>  
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>flushã€compactã€split æœºåˆ¶</strong></p>
<p>é…ç½®hbase-site.xml</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- regionServerçš„å…¨å±€memstoreçš„å¤§å°ï¼Œè¶…è¿‡è¯¥å¤§å°ä¼šè§¦å‘flushåˆ°ç£ç›˜çš„æ“ä½œï¼Œé»˜è®¤æ˜¯å †å¤§å°çš„40%ï¼Œè€Œä¸”regionserverçº§åˆ«çš„flushä¼šé˜»å¡å®¢æˆ·ç«¯è¯»å†™ --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.regionserver.global.memstore.size<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#998;font-style:italic">&lt;!-- å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå®‰å…¨çš„è®¾ç½®ï¼Œæœ‰æ—¶å€™é›†ç¾¤çš„â€œå†™è´Ÿè½½â€éå¸¸é«˜ï¼Œå†™å…¥é‡ä¸€ç›´è¶…è¿‡flushçš„é‡ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¸Œæœ›memstoreä¸è¦è¶…è¿‡ä¸€å®šçš„å®‰å…¨è®¾ç½®ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå†™æ“ä½œå°±è¦è¢«é˜»å¡ä¸€ç›´åˆ°memstoreæ¢å¤åˆ°ä¸€ä¸ªâ€œå¯ç®¡ç†â€çš„å¤§å°ï¼Œè¿™ä¸ªå¤§å°å°±æ˜¯é»˜è®¤å€¼æ˜¯å †å¤§å°*0.4*0.95ï¼Œä¹Ÿå°±æ˜¯å½“regionserverçº§åˆ«çš„flushæ“ä½œå‘é€åï¼Œä¼šé˜»å¡å®¢æˆ·ç«¯å†™ï¼Œä¸€ç›´é˜»å¡åˆ°æ•´ä¸ªregionserverçº§åˆ«çš„memstoreçš„å¤§å°ä¸ºå †å¤§å°*0.4*0.95ä¸ºæ­¢ --&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;property&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;name&gt;</span>hbase.regionserver.global.memstore.size.lower.limit<span style="color:#000080">&lt;/name&gt;</span>  
</span></span><span style="display:flex;"><span>  <span style="color:#000080">&lt;value&gt;&lt;/value&gt;</span>  
</span></span><span style="display:flex;"><span><span style="color:#000080">&lt;/property&gt;</span>  
</span></span></code></pre></td></tr></table>
</div>
</div>
    </div>

    

    <div class="container-comment-giscus">
        <script src="https://giscus.app/client.js"
        data-repo="loveminimal/comment"
        data-repo-id="R_kgDOJNJQ8g"
        data-category="General"
        data-category-id="DIC_kwDOJNJQ8s4CYl0m"
        data-mapping="title"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="noborder_light"
        data-lang="zh-CN"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
        </script>
</div>
</div>

        </div>
        <div id="footer"><div class="container-footer">
    

    <div class="beian">
        
        <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41092802000242">
            

        </a>

        
        <a href="//beian.miit.gov.cn" target="_blank">
            
            <span class="some">icp...<span>
            
        </a>
    </div>

    
    <div class="info">
        
        <a href="https://github.com/loveminimal/hugo-theme-virgo">ğŸ•Šï¸</a> 2016 - <span id="info-date"></span>
    </div>

</div></div>
        <div class="cool-after" style="
            
                background-color: rgba(255, 255, 255, 0.49); 
                backdrop-filter: saturate(100%) blur(6px);
            
            "></div>
    </body>
</html>
